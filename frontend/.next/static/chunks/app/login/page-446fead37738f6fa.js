(self["webpackChunk_N_E"]=self["webpackChunk_N_E"]||[]).push([[520],{210:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>v,A:()=>m});var r=s(5155);var a=s(2115);var n=s(5695);var i=s(5404);var o=s(5317);var c=s(3915);const d={apiKey:"AIzaSyDeO4RNogxdrDxOJEWfAbsyr67jh19fIFc",authDomain:"gesticom-4e956.firebaseapp.com",projectId:"gesticom-4e956",storageBucket:"gesticom-4e956.firebasestorage.app",messagingSenderId:"158166010651",appId:"1:158166010651:web:58b14e98489ea9046a61be"};const l=!(0,c.Dk)().length?(0,c.Wp)(d):(0,c.Sx)();const u=(0,i.xI)(l);const f=(0,o.aU)(l,"gesticom");const p=(0,a.createContext)(undefined);const m=()=>{const e=(0,a.useContext)(p);if(e===undefined){throw new Error("useAuth must be used within an AuthProvider")}return e};const v=e=>{let{children:t}=e;const[s,c]=(0,a.useState)(null);const[d,l]=(0,a.useState)(null);const[m,v]=(0,a.useState)(true);const x=(0,n.useRouter)();(0,a.useEffect)(()=>{const e=(0,i.hg)(u,async e=>{if(e){const t=await e.getIdToken();l(t);const s=await (0,o.x7)((0,o.H9)(f,"usuarios",e.uid));if(s.exists()){const t=s.data();c({id:e.uid,nombre:t.nombre||"Usuario",rut:t.rut||"",email:e.email||"",rol:t.rol||"vendedor"})}}else{c(null);l(null)}v(false)});return()=>e()},[]);const h=async(e,t)=>{await (0,i.x9)(u,e,t);x.push("/inventario")};const y=async()=>{await (0,i.CI)(u);x.push("/login")};const g=e=>{if(!s)return false;const t=Array.isArray(e)?e:[e];return t.includes(s.rol)};return(0,r.jsx)(p.Provider,{value:{usuario:s,token:d,login:h,logout:y,isLoading:m,isAuthenticated:!!s,hasRole:g},children:t})}},968:(e,t,s)=>{"use strict";s.d(t,{b:()=>c});var r=s(2115);var a=s(3655);var n=s(5155);var i="Label";var o=r.forwardRef((e,t)=>{return(0,n.jsx)(a.sG.label,{...e,ref:t,onMouseDown:t=>{var s;const r=t.target;if(r.closest("button, input, select, textarea"))return;(s=e.onMouseDown)===null||s===void 0?void 0:s.call(e,t);if(!t.defaultPrevented&&t.detail>1)t.preventDefault()}})});o.displayName=i;var c=o},1701:(e,t,s)=>{"use strict";s.r(t);s.d(t,{"default":()=>g});var r=s(5155);var a=s(2115);var n=s(5695);var i=s(210);var o=s(7168);var c=s(8482);var d=s(9852);var l=s(2714);var u=s(3580);var f=s(7108);var p=s(8749);var m=s(2657);var v=s(9946);const x=(0,v.A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const h=()=>{const[e,t]=(0,a.useState)("");const[s,n]=(0,a.useState)("");const[v,h]=(0,a.useState)(false);const[y,g]=(0,a.useState)(false);const{login:b}=(0,i.A)();const{toast:w}=(0,u.dj)();const j=async t=>{t.preventDefault();if(!e||!s){w({title:"Error",description:"Por favor completa todos los campos",variant:"destructive"});return}g(true);try{await b(e,s);w({title:"Bienvenido",description:"Has iniciado sesi\xf3n exitosamente"})}catch(e){w({title:"Error de autenticaci\xf3n",description:e instanceof Error?e.message:"Credenciales inv\xe1lidas",variant:"destructive"})}finally{g(false)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)(c.Zp,{className:"w-full max-w-md",children:[(0,r.jsxs)(c.aR,{className:"space-y-1 text-center",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[(0,r.jsx)(f.A,{className:"h-8 w-8 text-primary"}),(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"GestiCom"})]}),(0,r.jsx)(c.ZB,{className:"text-xl",children:"Iniciar Sesi\xf3n"}),(0,r.jsx)(c.BT,{children:"Ingresa tus credenciales para acceder al sistema"})]}),(0,r.jsxs)(c.Wu,{children:[(0,r.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"email",children:"Correo Electr\xf3nico"}),(0,r.jsx)(d.p,{id:"email",type:"email",placeholder:"usuario@gesticom.cl",value:e,onChange:e=>t(e.target.value),required:true,autoComplete:"email"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"password",children:"Contrase\xf1a"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(d.p,{id:"password",type:v?"text":"password",placeholder:"••••••••",value:s,onChange:e=>n(e.target.value),required:true,autoComplete:"current-password"}),(0,r.jsx)(o.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>h(!v),children:v?(0,r.jsx)(p.A,{className:"h-4 w-4"}):(0,r.jsx)(m.A,{className:"h-4 w-4"})})]})]}),(0,r.jsx)(o.$,{type:"submit",className:"w-full",disabled:y,children:y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Iniciando sesi\xf3n..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x,{className:"h-4 w-4 mr-2"}),"Iniciar Sesi\xf3n"]})})]}),(0,r.jsxs)("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:[(0,r.jsx)("p",{children:"\xbfProblemas para acceder?"}),(0,r.jsx)("p",{children:"Contacta al administrador del sistema"})]})]})]})})};const y=h;function g(){const{isAuthenticated:e,isLoading:t}=(0,i.A)();const s=(0,n.useRouter)();(0,a.useEffect)(()=>{if(!t&&e){s.push("/dashboard")}},[e,t,s]);if(t){return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}if(e){return null}return(0,r.jsx)(y,{})}},2657:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(9946);const a=(0,r.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2714:(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var r=s(5155);var a=s(2115);var n=s(968);var i=s(2085);var o=s(3999);const c=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70");const d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.b,{ref:t,className:(0,o.cn)(c(),s),...a})});d.displayName=n.b.displayName},3580:(e,t,s)=>{"use strict";s.d(t,{dj:()=>x});var r=s(2115);const a=1;const n=1e6;const i={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let o=0;function c(){o=(o+1)%Number.MAX_SAFE_INTEGER;return o.toString()}const d=new Map;const l=e=>{if(d.has(e)){return}const t=setTimeout(()=>{d.delete(e);m({type:"REMOVE_TOAST",toastId:e})},n);d.set(e,t)};const u=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,a)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:s}=t;if(s){l(s)}else{e.toasts.forEach(e=>{l(e.id)})}return{...e,toasts:e.toasts.map(e=>e.id===s||s===undefined?{...e,open:false}:e)}}case"REMOVE_TOAST":if(t.toastId===undefined){return{...e,toasts:[]}}return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}};const f=[];let p={toasts:[]};function m(e){p=u(p,e);f.forEach(e=>{e(p)})}function v(e){let{...t}=e;const s=c();const r=e=>m({type:"UPDATE_TOAST",toast:{...e,id:s}});const a=()=>m({type:"DISMISS_TOAST",toastId:s});m({type:"ADD_TOAST",toast:{...t,id:s,open:true,onOpenChange:e=>{if(!e)a()}}});return{id:s,dismiss:a,update:r}}function x(){const[e,t]=r.useState(p);r.useEffect(()=>{f.push(t);return()=>{const e=f.indexOf(t);if(e>-1){f.splice(e,1)}}},[e]);return{...e,toast:v,dismiss:e=>m({type:"DISMISS_TOAST",toastId:e})}}},3655:(e,t,s)=>{"use strict";s.d(t,{hO:()=>d,sG:()=>c});var r=s(2115);var a=s(7650);var n=s(9708);var i=s(5155);var o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"];var c=o.reduce((e,t)=>{const s=(0,n.TL)(`Primitive.${t}`);const a=r.forwardRef((e,r)=>{const{asChild:a,...n}=e;const o=a?s:t;if(typeof window!=="undefined"){window[Symbol.for("radix-ui")]=true}return(0,i.jsx)(o,{...n,ref:r})});a.displayName=`Primitive.${t}`;return{...e,[t]:a}},{});function d(e,t){if(e)a.flushSync(()=>e.dispatchEvent(t))}var l=null&&c},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(2596);var a=s(9688);function n(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++){t[s]=arguments[s]}return(0,a.QP)((0,r.$)(t))}},7108:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(9946);const a=(0,r.A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var r=s(5155);var a=s(2115);var n=s(9708);var i=s(2085);var o=s(3999);const c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}});const d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:d=false,...l}=e;const u=d?n.DX:"button";return(0,r.jsx)(u,{className:(0,o.cn)(c({variant:a,size:i,className:s})),ref:t,...l})});d.displayName="Button"},7980:(e,t,s)=>{Promise.resolve().then(s.bind(s,1701))},8482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>l,ZB:()=>c,Zp:()=>i,aR:()=>o});var r=s(5155);var a=s(2115);var n=s(3999);const i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";const o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});o.displayName="CardHeader";const c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});c.displayName="CardTitle";const d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";const l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});l.displayName="CardContent";const u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},8749:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(9946);const a=(0,r.A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},9852:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var r=s(5155);var a=s(2115);var n=s(3999);const i=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"}},e=>{var t=t=>e(e.s=t);e.O(0,[135,204,896,455,441,684,358],()=>t(7980));var s=e.O();_N_E=s}]);