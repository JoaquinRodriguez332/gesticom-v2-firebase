(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,22623,94179,98919,84614,e=>{"use strict";var a=e.i(43476),r=e.i(67881),s=e.i(25913),t=e.i(47163);let i=(0,s.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:r,...s}){return(0,a.jsx)("div",{className:(0,t.cn)(i({variant:r}),e),...s})}e.s(["Badge",()=>l],94179);var o=e.i(75254);let n=(0,o.default)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]),d=(0,o.default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>d],98919);let c=(0,o.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>c],84614);let u=(0,o.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);e.i(1405);var m=e.i(61668);e.s(["default",0,()=>{let{usuario:e,logout:s}=(0,m.useAuth)();return(console.log(" Usuario actual:",{id:e?.id,email:e?.email,nombre:e?.nombre,rol:e?.rol,tipo:typeof e?.rol}),e)?(0,a.jsx)("header",{className:"bg-white shadow-sm border-b sticky top-0 z-50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"bg-gray-900 rounded-lg p-2",children:(0,a.jsx)(n,{className:"h-6 w-6 text-white"})}),(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"GestiCom Dashboard"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.nombre}),(0,a.jsx)("div",{className:"flex items-center justify-end space-x-1",children:"admin"===e.rol?(0,a.jsxs)(l,{variant:"secondary",className:"text-xs",children:[(0,a.jsx)(d,{className:"h-3 w-3 mr-1"}),"Administrador"]}):(0,a.jsxs)(l,{variant:"secondary",className:"text-xs",children:[(0,a.jsx)(c,{className:"h-3 w-3 mr-1"}),"Trabajador"]})})]})}),(0,a.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:s,children:[(0,a.jsx)(u,{className:"h-4 w-4 mr-2"}),"Cerrar Sesi贸n"]})]})]})})}):null}],22623)},23750,e=>{"use strict";var a=e.i(43476),r=e.i(71645),s=e.i(47163);let t=r.forwardRef(({className:e,type:r,...t},i)=>(0,a.jsx)("input",{type:r,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...t}));t.displayName="Input",e.s(["Input",()=>t])},1405,e=>{"use strict";e.i(61668),e.s([])},67881,70065,e=>{"use strict";var a=e.i(43476),r=e.i(71645),s=e.i(91918),t=e.i(25913),i=e.i(47163);let l=(0,t.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:r,size:t,asChild:o=!1,...n},d)=>{let c=o?s.Slot:"button";return(0,a.jsx)(c,{className:(0,i.cn)(l({variant:r,size:t,className:e})),ref:d,...n})});o.displayName="Button",e.s(["Button",()=>o,"buttonVariants",()=>l],67881);let n=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));n.displayName="Card";let d=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));d.displayName="CardHeader";let c=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));c.displayName="CardTitle";let u=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...r}));u.displayName="CardDescription";let m=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...r}));m.displayName="CardContent",r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter",e.s(["Card",()=>n,"CardContent",()=>m,"CardDescription",()=>u,"CardHeader",()=>d,"CardTitle",()=>c],70065)},88844,e=>{"use strict";let a=(0,e.i(75254).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>a],88844)},12426,e=>{"use strict";let a=(0,e.i(75254).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>a],12426)},10708,e=>{"use strict";var a=e.i(43476),r=e.i(71645);e.i(74080);var s=e.i(91918),t=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let i=r.forwardRef((e,r)=>{let{asChild:i,...l}=e,o=i?s.Slot:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(o,{...l,ref:r})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{}),i=r.forwardRef((e,r)=>(0,a.jsx)(t.label,{...e,ref:r,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i.displayName="Label";var l=e.i(25913),o=e.i(47163);let n=(0,l.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)(i,{ref:s,className:(0,o.cn)(n(),e),...r}));d.displayName=i.displayName,e.s(["Label",()=>d],10708)},88511,e=>{"use strict";let a=(0,e.i(75254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>a],88511)},56909,e=>{"use strict";let a=(0,e.i(75254).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],56909)},30009,29441,e=>{"use strict";var a=e.i(43476),r=e.i(71645),s=e.i(30030),t=e.i(20783),i=e.i(26999),l=e.i(81140),o=e.i(91918),n="AlertDialog",[d,c]=(0,s.createContextScope)(n,[i.createDialogScope]),u=(0,i.createDialogScope)(),m=e=>{let{__scopeAlertDialog:r,...s}=e,t=u(r);return(0,a.jsx)(i.Root,{...t,...s,modal:!0})};m.displayName=n,r.forwardRef((e,r)=>{let{__scopeAlertDialog:s,...t}=e,l=u(s);return(0,a.jsx)(i.Trigger,{...l,...t,ref:r})}).displayName="AlertDialogTrigger";var x=e=>{let{__scopeAlertDialog:r,...s}=e,t=u(r);return(0,a.jsx)(i.Portal,{...t,...s})};x.displayName="AlertDialogPortal";var p=r.forwardRef((e,r)=>{let{__scopeAlertDialog:s,...t}=e,l=u(s);return(0,a.jsx)(i.Overlay,{...l,...t,ref:r})});p.displayName="AlertDialogOverlay";var h="AlertDialogContent",[f,g]=d(h),v=r.forwardRef((e,s)=>{let{__scopeAlertDialog:n,children:d,...c}=e,m=u(n),x=r.useRef(null),p=(0,t.useComposedRefs)(s,x),g=r.useRef(null);return(0,a.jsx)(i.WarningProvider,{contentName:h,titleName:j,docsSlug:"alert-dialog",children:(0,a.jsx)(f,{scope:n,cancelRef:g,children:(0,a.jsxs)(i.Content,{role:"alertdialog",...m,...c,ref:p,onOpenAutoFocus:(0,l.composeEventHandlers)(c.onOpenAutoFocus,e=>{e.preventDefault(),g.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,a.jsx)(o.Slottable,{children:d}),(0,a.jsx)(A,{contentRef:x})]})})})});v.displayName=h;var j="AlertDialogTitle",y=r.forwardRef((e,r)=>{let{__scopeAlertDialog:s,...t}=e,l=u(s);return(0,a.jsx)(i.Title,{...l,...t,ref:r})});y.displayName=j;var b="AlertDialogDescription",N=r.forwardRef((e,r)=>{let{__scopeAlertDialog:s,...t}=e,l=u(s);return(0,a.jsx)(i.Description,{...l,...t,ref:r})});N.displayName=b;var w=r.forwardRef((e,r)=>{let{__scopeAlertDialog:s,...t}=e,l=u(s);return(0,a.jsx)(i.Close,{...l,...t,ref:r})});w.displayName="AlertDialogAction";var k="AlertDialogCancel",C=r.forwardRef((e,r)=>{let{__scopeAlertDialog:s,...l}=e,{cancelRef:o}=g(k,s),n=u(s),d=(0,t.useComposedRefs)(r,o);return(0,a.jsx)(i.Close,{...n,...l,ref:d})});C.displayName=k;var A=({contentRef:e})=>{let a=`\`${h}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${h}\` by passing a \`${b}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${h}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return r.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(a)},[a,e]),null},D=e.i(47163),S=e.i(67881);let P=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)(p,{className:(0,D.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...r,ref:s}));P.displayName=p.displayName;let E=r.forwardRef(({className:e,...r},s)=>(0,a.jsxs)(x,{children:[(0,a.jsx)(P,{}),(0,a.jsx)(v,{ref:s,className:(0,D.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r})]}));E.displayName=v.displayName;let R=({className:e,...r})=>(0,a.jsx)("div",{className:(0,D.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...r});R.displayName="AlertDialogHeader";let M=({className:e,...r})=>(0,a.jsx)("div",{className:(0,D.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...r});M.displayName="AlertDialogFooter";let z=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)(y,{ref:s,className:(0,D.cn)("text-lg font-semibold",e),...r}));z.displayName=y.displayName;let F=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)(N,{ref:s,className:(0,D.cn)("text-sm text-muted-foreground",e),...r}));F.displayName=N.displayName;let T=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)(w,{ref:s,className:(0,D.cn)((0,S.buttonVariants)(),e),...r}));T.displayName=w.displayName;let I=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)(C,{ref:s,className:(0,D.cn)((0,S.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",e),...r}));function L(e,a){let[s,t]=(0,r.useState)(e);return(0,r.useEffect)(()=>{let r=setTimeout(()=>{t(e)},a);return()=>{clearTimeout(r)}},[e,a]),s}I.displayName=C.displayName,e.s(["AlertDialog",()=>m,"AlertDialogAction",()=>T,"AlertDialogCancel",()=>I,"AlertDialogContent",()=>E,"AlertDialogDescription",()=>F,"AlertDialogFooter",()=>M,"AlertDialogHeader",()=>R,"AlertDialogTitle",()=>z],30009),e.s(["useDebounce",()=>L],29441)},64204,e=>{"use strict";var a=e.i(43476),r=e.i(71645),s=e.i(18566);e.i(1405);var t=e.i(61668),i=e.i(67881),l=e.i(71689),o=e.i(7233),n=e.i(88844),d=e.i(22623),c=e.i(70065),u=e.i(23750),m=e.i(10708),x=e.i(47163);let p=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("textarea",{className:(0,x.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...r}));p.displayName="Textarea";var h=e.i(20682),f=e.i(54858);let g=({onProductoAgregado:e})=>{let[s,t]=(0,r.useState)({codigo:"",nombre:"",descripcion:"",precio:0,stock:0,categoria:"",proveedor:""}),[l,d]=(0,r.useState)(!1),{toast:x}=(0,h.useToast)(),g=e=>{let{name:a,value:r}=e.target;t(e=>({...e,[a]:"precio"===a||"stock"===a?Number(r):r}))},v=async a=>{a.preventDefault(),d(!0);try{await f.productosApi.create(s),x({title:"Producto creado",description:"El producto se ha agregado exitosamente al inventario."}),e(),t({codigo:"",nombre:"",descripcion:"",precio:0,stock:0,categoria:"",proveedor:""})}catch(a){console.error("Error al crear producto:",a);let e="No se pudo crear el producto. Int茅ntalo de nuevo.";a instanceof f.ApiError&&(e=a.message),x({title:"Error",description:e,variant:"destructive"})}finally{d(!1)}};return(0,a.jsxs)(c.Card,{className:"w-full max-w-2xl mx-auto",children:[(0,a.jsxs)(c.CardHeader,{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.Package,{className:"h-5 w-5 text-primary"}),(0,a.jsx)(c.CardTitle,{className:"text-xl",children:"Nuevo Producto"})]}),(0,a.jsx)(c.CardDescription,{children:"Agrega un nuevo producto al inventario"})]}),(0,a.jsx)(c.CardContent,{children:(0,a.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"codigo",children:"C贸digo de Barras"}),(0,a.jsx)(u.Input,{id:"codigo",name:"codigo",placeholder:"Ej: 123456789",value:s.codigo,onChange:g,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"nombre",children:"Nombre del Producto"}),(0,a.jsx)(u.Input,{id:"nombre",name:"nombre",placeholder:"Ej: Laptop Dell XPS",value:s.nombre,onChange:g,required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"descripcion",children:"Descripci贸n"}),(0,a.jsx)(p,{id:"descripcion",name:"descripcion",placeholder:"Descripci贸n detallada del producto...",value:s.descripcion,onChange:g,rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"precio",children:"Precio ($)"}),(0,a.jsx)(u.Input,{id:"precio",name:"precio",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:s.precio||"",onChange:g,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"stock",children:"Stock"}),(0,a.jsx)(u.Input,{id:"stock",name:"stock",type:"number",min:"0",placeholder:"0",value:s.stock||"",onChange:g,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"categoria",children:"Categor铆a"}),(0,a.jsx)(u.Input,{id:"categoria",name:"categoria",placeholder:"Ej: Electr贸nicos",value:s.categoria,onChange:g,required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"proveedor",children:"Proveedor"}),(0,a.jsx)(u.Input,{id:"proveedor",name:"proveedor",placeholder:"Nombre del proveedor",value:s.proveedor,onChange:g,required:!0})]}),(0,a.jsx)(i.Button,{type:"submit",className:"w-full",disabled:l,children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Plus,{className:"h-4 w-4 mr-2"}),"Crear Producto"]})})]})})]})};var v=e.i(94179),j=e.i(55436),y=e.i(88511),b=e.i(27612),N=e.i(12426),w=e.i(75254);let k=(0,w.default)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),C=(0,w.default)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),A=(0,w.default)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),D=(0,w.default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var S=e.i(30374),P=e.i(56909),E=e.i(37727);let R=({producto:e,onProductoActualizado:s,onClose:t})=>{let[l,o]=(0,r.useState)({nombre:e.nombre,descripcion:e.descripcion,precio:e.precio,stock:e.stock,categoria:e.categoria,proveedor:e.proveedor}),[n,d]=(0,r.useState)(!1),{toast:c}=(0,h.useToast)(),x=e=>{let{name:a,value:r}=e.target;o(e=>({...e,[a]:"precio"===a||"stock"===a?Number(r):r}))},g=async a=>{a.preventDefault(),d(!0);try{await f.productosApi.update(e.id,l),c({title:"Producto actualizado",description:"Los cambios se han guardado exitosamente."}),s()}catch(a){console.error("Error al actualizar producto:",a);let e="No se pudo actualizar el producto. Int茅ntalo de nuevo.";a instanceof f.ApiError&&(e=a.message),c({title:"Error",description:e,variant:"destructive"})}finally{d(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(S.DialogHeader,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(y.Edit,{className:"h-5 w-5 text-primary"}),(0,a.jsx)(S.DialogTitle,{children:"Editar Producto"})]})}),(0,a.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"nombre",children:"Nombre del Producto"}),(0,a.jsx)(u.Input,{id:"nombre",name:"nombre",value:l.nombre,onChange:x,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"categoria",children:"Categor铆a"}),(0,a.jsx)(u.Input,{id:"categoria",name:"categoria",value:l.categoria,onChange:x,required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"descripcion",children:"Descripci贸n"}),(0,a.jsx)(p,{id:"descripcion",name:"descripcion",value:l.descripcion,onChange:x,rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"precio",children:"Precio ($)"}),(0,a.jsx)(u.Input,{id:"precio",name:"precio",type:"number",step:"0.01",min:"0",value:l.precio||"",onChange:x,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"stock",children:"Stock"}),(0,a.jsx)(u.Input,{id:"stock",name:"stock",type:"number",min:"0",value:l.stock||"",onChange:x,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"proveedor",children:"Proveedor"}),(0,a.jsx)(u.Input,{id:"proveedor",name:"proveedor",value:l.proveedor,onChange:x,required:!0})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,a.jsxs)(i.Button,{type:"button",variant:"outline",onClick:t,children:[(0,a.jsx)(E.X,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),(0,a.jsx)(i.Button,{type:"submit",disabled:n,children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Guardando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.Save,{className:"h-4 w-4 mr-2"}),"Guardar Cambios"]})})]})]})]})};var M=e.i(30009),z=e.i(36971),F=e.i(29441);let T=({reload:e})=>{let[s,t]=(0,r.useState)([]),[l,o]=(0,r.useState)(""),[d,m]=(0,r.useState)(null),[x,p]=(0,r.useState)(null),[g,w]=(0,r.useState)(!0),[P,E]=(0,r.useState)(null),{toast:T}=(0,h.useToast)(),I=(0,F.useDebounce)(l,300),L=async e=>{w(!0),E(null);try{let a=await f.productosApi.getAll(e);t(a)}catch(a){console.error("Error al cargar productos:",a);let e="No se pudieron cargar los productos.";a instanceof f.ApiError&&(e=a.message),E(e),T({title:"Error",description:e,variant:"destructive"})}finally{w(!1)}};(0,r.useEffect)(()=>{L()},[e]),(0,r.useEffect)(()=>{I.trim()?L(I):L()},[I]);let B=async()=>{if(null!==x)try{await f.productosApi.delete(x),t(s.filter(e=>e.id!==x)),T({title:"Producto eliminado",description:"El producto se ha eliminado exitosamente."})}catch(a){console.error("Error al eliminar producto:",a);let e="No se pudo eliminar el producto.";a instanceof f.ApiError&&(e=a.message),T({title:"Error",description:e,variant:"destructive"})}finally{p(null)}};return g?(0,a.jsx)(c.Card,{className:"w-full",children:(0,a.jsx)(c.CardContent,{className:"p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):P?(0,a.jsx)(c.Card,{className:"w-full",children:(0,a.jsx)(c.CardContent,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-32 space-y-4",children:[(0,a.jsx)(D,{className:"h-12 w-12 text-destructive"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-lg font-semibold",children:"Error al cargar productos"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:P})]}),(0,a.jsx)(i.Button,{onClick:()=>L(),variant:"outline",children:"Reintentar"})]})})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(c.Card,{children:[(0,a.jsx)(c.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.Package,{className:"h-5 w-5 text-primary"}),(0,a.jsx)(c.CardTitle,{children:"Inventario de Productos"})]}),(0,a.jsxs)(v.Badge,{variant:"outline",className:"text-sm",children:[s.length," productos"]})]})}),(0,a.jsxs)(c.CardContent,{children:[(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)(j.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,a.jsx)(u.Input,{placeholder:"Buscar por nombre, c贸digo o categor铆a...",value:l,onChange:e=>o(e.target.value),className:"pl-10"})]}),(0,a.jsx)("div",{className:"grid gap-4",children:0===s.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)(n.Package,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"No se encontraron productos"})]}):s.map(e=>{let r=(0,z.getStockStatus)(e.stock);return(0,a.jsx)(c.Card,{className:"hover:shadow-md transition-shadow",children:(0,a.jsx)(c.CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:e.nombre}),(0,a.jsxs)(v.Badge,{variant:r.color,children:[r.icon," ",r.text]})]}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:e.descripcion}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(k,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.codigo})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(N.DollarSign,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:(0,z.formatearPrecio)(e.precio)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(n.Package,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[e.stock," unidades"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.categoria})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(C,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.proveedor})]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2 ml-4",children:[(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>m(e),children:(0,a.jsx)(y.Edit,{className:"h-4 w-4"})}),(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>p(e.id),className:"text-destructive hover:text-destructive",children:(0,a.jsx)(b.Trash2,{className:"h-4 w-4"})})]})]})})},e.id)})})]})]}),(0,a.jsx)(S.Dialog,{open:!!d,onOpenChange:()=>m(null),children:(0,a.jsx)(S.DialogContent,{className:"max-w-2xl",children:d&&(0,a.jsx)(R,{producto:d,onProductoActualizado:()=>{L(l),m(null)},onClose:()=>m(null)})})}),(0,a.jsx)(M.AlertDialog,{open:!!x,onOpenChange:()=>p(null),children:(0,a.jsxs)(M.AlertDialogContent,{children:[(0,a.jsxs)(M.AlertDialogHeader,{children:[(0,a.jsx)(M.AlertDialogTitle,{children:"驴Eliminar producto?"}),(0,a.jsx)(M.AlertDialogDescription,{children:"Esta acci贸n no se puede deshacer. El producto ser谩 eliminado permanentemente del inventario."})]}),(0,a.jsxs)(M.AlertDialogFooter,{children:[(0,a.jsx)(M.AlertDialogCancel,{children:"Cancelar"}),(0,a.jsx)(M.AlertDialogAction,{onClick:B,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Eliminar"})]})]})})]})};function I(){let{isAuthenticated:e,isLoading:c,hasRole:u}=(0,t.useAuth)(),m=(0,s.useRouter)(),[x,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{c||e||m.push("/login")},[e,c,m]),(0,r.useEffect)(()=>{!c&&e&&u("admin")},[c,e,u,m]),c)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):e?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(d.default,{}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(i.Button,{variant:"outline",size:"icon",onClick:()=>m.push("/dashboard"),className:"h-10 w-10",title:"Volver al Dashboard",children:(0,a.jsx)(l.ArrowLeft,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(n.Package,{className:"h-6 w-6"}),"Gesti贸n de Inventario"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Administra tus productos, stock y precios."})]})]}),(0,a.jsxs)(i.Button,{onClick:()=>p(!0),children:[(0,a.jsx)(o.Plus,{className:"h-4 w-4 mr-2"}),"Nuevo Producto"]})]}),(0,a.jsx)(T,{reload:h})]}),(0,a.jsx)(S.Dialog,{open:x,onOpenChange:p,children:(0,a.jsx)(S.DialogContent,{className:"max-w-2xl",children:(0,a.jsx)(g,{onProductoAgregado:()=>{f(!h),p(!1)}})})})]}):null}e.s(["default",()=>I],64204)}]);