(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,22623,94179,98919,84614,e=>{"use strict";var a=e.i(43476),t=e.i(67881),s=e.i(25913),r=e.i(47163);let i=(0,s.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...s}){return(0,a.jsx)("div",{className:(0,r.cn)(i({variant:t}),e),...s})}e.s(["Badge",()=>l],94179);var d=e.i(75254);let n=(0,d.default)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]),o=(0,d.default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>o],98919);let c=(0,d.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>c],84614);let x=(0,d.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);e.i(1405);var m=e.i(61668);e.s(["default",0,()=>{let{usuario:e,logout:s}=(0,m.useAuth)();return(console.log("ðŸ” Usuario actual:",{id:e?.id,email:e?.email,nombre:e?.nombre,rol:e?.rol,tipo:typeof e?.rol}),e)?(0,a.jsx)("header",{className:"bg-white shadow-sm border-b sticky top-0 z-50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"bg-gray-900 rounded-lg p-2",children:(0,a.jsx)(n,{className:"h-6 w-6 text-white"})}),(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"GestiCom Dashboard"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.nombre}),(0,a.jsx)("div",{className:"flex items-center justify-end space-x-1",children:"admin"===e.rol?(0,a.jsxs)(l,{variant:"secondary",className:"text-xs",children:[(0,a.jsx)(o,{className:"h-3 w-3 mr-1"}),"Administrador"]}):(0,a.jsxs)(l,{variant:"secondary",className:"text-xs",children:[(0,a.jsx)(c,{className:"h-3 w-3 mr-1"}),"Trabajador"]})})]})}),(0,a.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:s,children:[(0,a.jsx)(x,{className:"h-4 w-4 mr-2"}),"Cerrar SesiÃ³n"]})]})]})})}):null}],22623)},1928,e=>{"use strict";let a=(0,e.i(75254).default)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);e.s(["ShoppingCart",()=>a],1928)},23750,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(47163);let r=t.forwardRef(({className:e,type:t,...r},i)=>(0,a.jsx)("input",{type:t,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...r}));r.displayName="Input",e.s(["Input",()=>r])},1405,e=>{"use strict";e.i(61668),e.s([])},67881,70065,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(91918),r=e.i(25913),i=e.i(47163);let l=(0,r.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=t.forwardRef(({className:e,variant:t,size:r,asChild:d=!1,...n},o)=>{let c=d?s.Slot:"button";return(0,a.jsx)(c,{className:(0,i.cn)(l({variant:t,size:r,className:e})),ref:o,...n})});d.displayName="Button",e.s(["Button",()=>d,"buttonVariants",()=>l],67881);let n=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let o=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let c=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle";let x=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));x.displayName="CardDescription";let m=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));m.displayName="CardContent",t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter",e.s(["Card",()=>n,"CardContent",()=>m,"CardDescription",()=>x,"CardHeader",()=>o,"CardTitle",()=>c],70065)},88844,e=>{"use strict";let a=(0,e.i(75254).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>a],88844)},12426,e=>{"use strict";let a=(0,e.i(75254).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>a],12426)},90716,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(18566);e.i(1405);var r=e.i(61668),i=e.i(67881),l=e.i(23750),d=e.i(70065),n=e.i(94179),o=e.i(30374),c=e.i(20682),x=e.i(55436),m=e.i(1928),p=e.i(7233),h=e.i(75254);let u=(0,h.default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var f=e.i(27612),v=e.i(12426),g=e.i(88844);let y=(0,h.default)("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),j=(0,h.default)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),b=(0,h.default)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),N=(0,h.default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),w=(0,h.default)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var k=e.i(71689);let C=(0,h.default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var S=e.i(22623),M=e.i(54858),A=e.i(36971);function B(){let{usuario:e,isAuthenticated:h,isLoading:B,hasRole:P}=(0,r.useAuth)(),z=(0,s.useRouter)(),[V,T]=(0,t.useState)([]),[H,L]=(0,t.useState)([]),[D,E]=(0,t.useState)([]),[R,_]=(0,t.useState)(""),[$,q]=(0,t.useState)(""),[I,O]=(0,t.useState)("venta"),[F,U]=(0,t.useState)(!1),[G,K]=(0,t.useState)(null),[Y,Z]=(0,t.useState)(!1);(0,t.useEffect)(()=>{B||h?h&&J():z.push("/login")},[h,B,z]);let J=async()=>{try{let[e,a]=await Promise.all([M.productosApi.getAll(),M.ventasApi.getAll()]);T(e),E(a)}catch(e){console.error("Error cargando datos:",e),(0,c.toast)({title:"Error",description:"No se pudieron cargar los datos.",variant:"destructive"})}},Q=()=>{if(!$.trim())return;let e=V.find(e=>e.codigo===$.trim());e?(X(e),q(""),(0,c.toast)({title:"Producto agregado",description:e.nombre})):(0,c.toast)({title:"No encontrado",description:"CÃ³digo no registrado",variant:"destructive"})},W=V.filter(e=>e.nombre.toLowerCase().includes(R.toLowerCase())||e.codigo.includes(R)),X=e=>{if(e.stock<=0)return void(0,c.toast)({title:"Sin stock",description:`No queda stock de ${e.nombre}`,variant:"destructive"});let a=H.find(a=>a.producto.id===e.id);if(a){if(a.cantidad>=e.stock)return void(0,c.toast)({title:"Stock insuficiente",description:"No puedes agregar mÃ¡s unidades de las disponibles.",variant:"destructive"});ee(e.id,a.cantidad+1)}else L([...H,{producto:e,cantidad:1,subtotal:e.precio}])},ee=(e,a)=>{if(a<=0)return void ea(e);let t=V.find(a=>a.id===e);t&&a>t.stock?(0,c.toast)({title:"Stock lÃ­mite alcanzado",variant:"destructive"}):L(H.map(t=>t.producto.id===e?{...t,cantidad:a,subtotal:t.producto.precio*a}:t))},ea=e=>{L(H.filter(a=>a.producto.id!==e))},et=()=>H.reduce((e,a)=>e+a.subtotal,0),es=async()=>{if(0===H.length)return void(0,c.toast)({title:"Carrito vacÃ­o",description:"Agrega productos antes de procesar.",variant:"destructive"});U(!0);try{let a=et(),t=await M.ventasApi.create({total:a,fecha:new Date().toISOString(),vendedor_email:e?.email||"desconocido",estado:"completada",items:H.map(e=>({producto_id:e.producto.id,producto_nombre:e.producto.nombre,cantidad:e.cantidad,precio_unitario:e.producto.precio,subtotal:e.subtotal}))});K(t),Z(!0),L([]),J(),(0,c.toast)({title:"Venta exitosa",description:"La venta se ha registrado correctamente."})}catch(e){console.error("Error al procesar venta:",e),(0,c.toast)({title:"Error",description:"Hubo un problema al procesar la venta.",variant:"destructive"})}finally{U(!1)}},er=async e=>{if(!P("admin"))return void(0,c.toast)({title:"Permiso denegado",description:"Solo administradores pueden anular ventas",variant:"destructive"});if(confirm("Â¿EstÃ¡s seguro de anular esta venta? El stock serÃ¡ devuelto."))try{await M.ventasApi.anular(e),(0,c.toast)({title:"Venta anulada",description:"El stock ha sido restaurado."}),J()}catch(e){console.error(e),(0,c.toast)({title:"Error",description:"No se pudo anular la venta.",variant:"destructive"})}};return B?null:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(S.default,{}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(i.Button,{variant:"outline",size:"icon",onClick:()=>z.push("/dashboard"),children:(0,a.jsx)(k.ArrowLeft,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(m.ShoppingCart,{className:"h-6 w-6"}),"Punto de Venta"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Gestiona ventas y devoluciones"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(i.Button,{variant:"venta"===I?"default":"outline",onClick:()=>O("venta"),children:[(0,a.jsx)(m.ShoppingCart,{className:"h-4 w-4 mr-2"}),"Nueva Venta"]}),(0,a.jsxs)(i.Button,{variant:"historial"===I?"default":"outline",onClick:()=>O("historial"),children:[(0,a.jsx)(j,{className:"h-4 w-4 mr-2"}),"Historial"]})]})]}),"venta"===I?(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)(d.Card,{children:[(0,a.jsx)(d.CardHeader,{className:"pb-3",children:(0,a.jsxs)(d.CardTitle,{className:"text-base flex items-center",children:[(0,a.jsx)(y,{className:"h-4 w-4 mr-2"})," EscÃ¡ner"]})}),(0,a.jsx)(d.CardContent,{children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.Input,{placeholder:"CÃ³digo de barras...",value:$,onChange:e=>q(e.target.value),onKeyDown:e=>"Enter"===e.key&&Q(),autoFocus:!0}),(0,a.jsx)(i.Button,{onClick:Q,children:(0,a.jsx)(x.Search,{className:"h-4 w-4"})})]})})]}),(0,a.jsxs)(d.Card,{className:"flex-1",children:[(0,a.jsx)(d.CardHeader,{className:"pb-3",children:(0,a.jsxs)(d.CardTitle,{className:"text-base flex items-center",children:[(0,a.jsx)(g.Package,{className:"h-4 w-4 mr-2"})," CatÃ¡logo"]})}),(0,a.jsxs)(d.CardContent,{children:[(0,a.jsx)(l.Input,{placeholder:"Filtrar productos...",value:R,onChange:e=>_(e.target.value),className:"mb-4"}),(0,a.jsxs)("div",{className:"h-[400px] overflow-y-auto pr-2 space-y-2",children:[W.map(e=>(0,a.jsxs)("div",{onClick:()=>X(e),className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-all active:scale-[0.99]",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.nombre}),(0,a.jsx)("p",{className:"text-xs text-gray-500 font-mono",children:e.codigo})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-bold text-sm",children:(0,A.formatearPrecio)(e.precio)}),(0,a.jsxs)(n.Badge,{variant:e.stock>0?"secondary":"destructive",className:"text-xs",children:["Stock: ",e.stock]})]})]},e.id)),0===W.length&&(0,a.jsx)("p",{className:"text-center text-gray-400 py-8",children:"No se encontraron productos"})]})]})]})]}),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(d.Card,{className:"h-full flex flex-col border-primary/20 shadow-md",children:[(0,a.jsx)(d.CardHeader,{className:"bg-primary/5 pb-3",children:(0,a.jsxs)(d.CardTitle,{className:"flex justify-between items-center text-base",children:[(0,a.jsx)("span",{children:"Carrito"}),(0,a.jsxs)(n.Badge,{variant:"default",children:[H.length," Items"]})]})}),(0,a.jsxs)(d.CardContent,{className:"flex-1 flex flex-col p-0",children:[0===H.length?(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400 p-8 min-h-[300px]",children:[(0,a.jsx)(m.ShoppingCart,{className:"h-12 w-12 mb-2 opacity-20"}),(0,a.jsx)("p",{children:"Carrito vacÃ­o"})]}):(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 min-h-[300px]",children:H.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-start border-b pb-3 last:border-0",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.producto.nombre}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[(0,A.formatearPrecio)(e.producto.precio)," c/u"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:()=>ee(e.producto.id,e.cantidad-1),children:(0,a.jsx)(u,{className:"h-3 w-3"})}),(0,a.jsx)("span",{className:"text-sm w-8 text-center",children:e.cantidad}),(0,a.jsx)(i.Button,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:()=>ee(e.producto.id,e.cantidad+1),children:(0,a.jsx)(p.Plus,{className:"h-3 w-3"})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,a.jsx)("span",{className:"font-bold text-sm",children:(0,A.formatearPrecio)(e.subtotal)}),(0,a.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-400 hover:text-red-600",onClick:()=>ea(e.producto.id),children:(0,a.jsx)(f.Trash2,{className:"h-4 w-4"})})]})]},e.producto.id))}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 border-t mt-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4 text-xl font-bold",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsx)("span",{children:(0,A.formatearPrecio)(et())})]}),(0,a.jsx)(i.Button,{className:"w-full h-12 text-lg",disabled:0===H.length||F,onClick:es,children:F?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C,{className:"h-5 w-5 mr-2 animate-spin"})," Procesando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.DollarSign,{className:"h-5 w-5 mr-2"})," Pagar"]})})]})]})]})})]}):(0,a.jsxs)(d.Card,{children:[(0,a.jsx)(d.CardHeader,{children:(0,a.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(j,{className:"h-5 w-5"})," Ãšltimas Ventas"]})}),(0,a.jsx)(d.CardContent,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[D.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsxs)("span",{className:"font-bold text-gray-900",children:["#",e.id.slice(0,8),"..."]}),(0,a.jsx)(n.Badge,{variant:"anulada"===e.estado?"destructive":"default",children:e.estado})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-2",children:[new Date(e.fecha).toLocaleString("es-CL"),(0,a.jsx)("span",{children:"â€¢"}),e.vendedor_email]}),(0,a.jsx)("div",{className:"mt-2 text-sm text-gray-600",children:e.items.map((e,t)=>(0,a.jsxs)("span",{className:"mr-3 block sm:inline",children:[e.cantidad,"x ",e.producto_nombre]},t))})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2 w-full md:w-auto",children:[(0,a.jsx)("span",{className:"text-xl font-bold",children:(0,A.formatearPrecio)(e.total)}),P("admin")&&"completada"===e.estado&&(0,a.jsx)(i.Button,{variant:"outline",size:"sm",className:"text-red-600 hover:bg-red-50 hover:text-red-700",onClick:()=>er(e.id),children:"Anular Venta"})]})]},e.id)),0===D.length&&(0,a.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No hay ventas registradas"})]})})]})]}),(0,a.jsx)(o.Dialog,{open:Y,onOpenChange:Z,children:(0,a.jsxs)(o.DialogContent,{className:"sm:max-w-md",children:[(0,a.jsx)(o.DialogHeader,{children:(0,a.jsxs)(o.DialogTitle,{className:"flex items-center text-green-600 gap-2",children:[(0,a.jsx)(N,{className:"h-6 w-6"})," Venta Completada"]})}),G&&(0,a.jsxs)("div",{className:"space-y-6 py-4",children:[(0,a.jsxs)("div",{className:"text-center bg-green-50 p-6 rounded-xl border border-green-100",children:[(0,a.jsx)("p",{className:"text-sm text-green-800 font-medium mb-1",children:"Total Pagado"}),(0,a.jsx)("p",{className:"text-4xl font-bold text-green-700",children:(0,A.formatearPrecio)(G.total)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)(i.Button,{className:"w-full",variant:"outline",onClick:()=>{if(!G)return;let e=window.open("","_blank");if(!e)return;let a=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Boleta #${G.id.slice(0,8)}</title>
        <style>
          body { font-family: 'Courier New', monospace; width: 300px; margin: 0; padding: 20px; }
          .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 15px; }
          .item { display: flex; justify-content: space-between; margin: 5px 0; }
          .total { border-top: 2px solid #000; padding-top: 10px; margin-top: 15px; font-weight: bold; }
          .footer { text-align: center; margin-top: 20px; font-size: 12px; }
        </style>
      </head>
      <body>
        <div class="header">
          <h2>GESTICOM</h2>
          <p>Boleta de Venta</p>
          <p>Ref: ${G.id.slice(0,8)}</p>
          <p>${new Date(G.fecha).toLocaleString("es-CL")}</p>
          <p>Vendedor: ${G.vendedor_email}</p>
        </div>
        
        <div class="items">
          ${G.items.map(e=>`
            <div class="item">
              <span>${e.cantidad}x ${e.producto_nombre}</span>
              <span>${(0,A.formatearPrecio)(e.subtotal)}</span>
            </div>
          `).join("")}
        </div>
        
        <div class="total">
          <div class="item">
            <span>TOTAL:</span>
            <span>${(0,A.formatearPrecio)(G.total)}</span>
          </div>
        </div>
        
        <div class="footer">
          <p>\xa1Gracias por su compra!</p>
        </div>
      </body>
      </html>
    `;e.document.write(a),e.document.close(),e.print()},children:[(0,a.jsx)(b,{className:"h-4 w-4 mr-2"})," Imprimir"]}),(0,a.jsxs)(i.Button,{className:"w-full",onClick:()=>Z(!1),children:[(0,a.jsx)(w,{className:"h-4 w-4 mr-2"})," Nueva Venta"]})]})]})]})})]})}e.s(["default",()=>B],90716)}]);