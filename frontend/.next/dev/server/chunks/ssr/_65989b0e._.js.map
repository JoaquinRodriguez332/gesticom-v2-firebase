{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/lib/auth-context.tsx"],"sourcesContent":["// This file is deprecated - use @/contexts/auth-context instead\nexport { useAuth, AuthProvider } from \"@/contexts/auth-context\"\nexport type { Usuario } from \"@/contexts/auth-context\"\n"],"names":[],"mappings":"AAAA,gEAAgE;;AAChE"}},
    {"offset": {"line": 12, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,IAAA,kHAAE,EACX,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,kHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE"}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,0KAAoB;AAEnC,MAAM,gBAAgB,6KAAuB;AAE7C,MAAM,eAAe,4KAAsB;AAE3C,MAAM,cAAc,2KAAqB;AAEzC,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,6KAAuB;QACtB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,2JACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,6KAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,kHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,8OAAC,2KAAqB;wBAAC,WAAU;;0CAC/B,8OAAC,iMAAC;gCAAC,WAAU;;;;;;0CACb,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,iLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 367, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/dashboard-header.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Store, Shield, User, LogOut } from \"lucide-react\"\nimport { useAuth } from \"@/lib/auth-context\"\n//import NotificacionesPanel from \"./notificaciones-panel\"\n\nconst DashboardHeader: React.FC = () => {\n  const { usuario, logout } = useAuth()\n\nconsole.log(\"üîç Usuario actual:\", {\n  id: usuario?.id,\n  email: usuario?.email,\n  nombre: usuario?.nombre,\n  rol: usuario?.rol,\n  tipo: typeof usuario?.rol\n})\n\n  if (!usuario) return null\n\n  return (\n    <header className=\"bg-white shadow-sm border-b sticky top-0 z-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center h-16\">\n          {/* Logo y t√≠tulo */}\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"bg-gray-900 rounded-lg p-2\">\n              <Store className=\"h-6 w-6 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-xl font-bold text-gray-900\">GestiCom Dashboard</h1>\n            </div>\n          </div>\n\n          {/* Usuario y acciones */}\n          <div className=\"flex items-center space-x-4\">\n            {/* Notificaciones */}\n\n            {/* Info del usuario */}\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"text-right\">\n                <p className=\"text-sm font-medium text-gray-900\">{usuario.nombre}</p>\n                <div className=\"flex items-center justify-end space-x-1\">\n                  {usuario.rol === \"admin\" ? (\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      <Shield className=\"h-3 w-3 mr-1\" />\n                      Administrador\n                    </Badge>\n                  ) : (\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      <User className=\"h-3 w-3 mr-1\" />\n                      Trabajador\n                    </Badge>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Bot√≥n de logout */}\n            <Button variant=\"outline\" size=\"sm\" onClick={logout}>\n              <LogOut className=\"h-4 w-4 mr-2\" />\n              Cerrar Sesi√≥n\n            </Button>\n          </div>\n        </div>\n      </div>\n    </header>\n  )\n}\n\nexport default DashboardHeader\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AANA;;;;;;AAOA,0DAA0D;AAE1D,MAAM,kBAA4B;IAChC,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,uIAAO;IAErC,QAAQ,GAAG,CAAC,sBAAsB;QAChC,IAAI,SAAS;QACb,OAAO,SAAS;QAChB,QAAQ,SAAS;QACjB,KAAK,SAAS;QACd,MAAM,OAAO,SAAS;IACxB;IAEE,IAAI,CAAC,SAAS,OAAO;IAErB,qBACE,8OAAC;QAAO,WAAU;kBAChB,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,6MAAK;oCAAC,WAAU;;;;;;;;;;;0CAEnB,8OAAC;0CACC,cAAA,8OAAC;oCAAG,WAAU;8CAAkC;;;;;;;;;;;;;;;;;kCAKpD,8OAAC;wBAAI,WAAU;;0CAIb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAE,WAAU;sDAAqC,QAAQ,MAAM;;;;;;sDAChE,8OAAC;4CAAI,WAAU;sDACZ,QAAQ,GAAG,KAAK,wBACf,8OAAC,mIAAK;gDAAC,SAAQ;gDAAY,WAAU;;kEACnC,8OAAC,gNAAM;wDAAC,WAAU;;;;;;oDAAiB;;;;;;yGAIrC,8OAAC,mIAAK;gDAAC,SAAQ;gDAAY,WAAU;;kEACnC,8OAAC,0MAAI;wDAAC,WAAU;;;;;;oDAAiB;;;;;;;;;;;;;;;;;;;;;;;0CAS3C,8OAAC,qIAAM;gCAAC,SAAQ;gCAAU,MAAK;gCAAK,SAAS;;kDAC3C,8OAAC,oNAAM;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQjD;uCAEe"}},
    {"offset": {"line": 557, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/lib/api.ts"],"sourcesContent":["// lib/api.ts\nimport { addDoc, collection, deleteDoc, doc, getDoc, getDocs, serverTimestamp, updateDoc, writeBatch,  setDoc   } from \"firebase/firestore\"\nimport { db } from \"@/lib/firebase\"\n\n// ---------------------- Tipos comunes y Errores ----------------------\n\nexport class ApiError extends Error {\n  status?: number\n  constructor(message: string, status?: number) {\n    super(message)\n    this.name = \"ApiError\"\n    this.status = status\n  }\n}\n\n// ---------------------- Interfaces de Productos ----------------------\n\nexport interface Producto {\n  id: string\n  codigo: string\n  nombre: string\n  descripcion?: string\n  precio: number\n  stock: number\n  categoria?: string\n  proveedor?: string\n  createdAt?: any\n  updatedAt?: any\n}\n\nexport type CreateProductoData = Omit<Producto, \"id\" | \"createdAt\" | \"updatedAt\">\nexport type UpdateProductoData = Partial<CreateProductoData>\n\n// ---------------------- Interfaces de Usuarios ----------------------\n\nexport interface UsuarioApi {\n  id: string\n  nombre: string\n  email: string\n  rut?: string\n  rol?: string\n  activo?: boolean\n  fecha_creacion?: string\n  ultimo_acceso?: string | null\n  creado_por_nombre?: string | null\n}\n\n// ---------------------- Interfaces de Ventas ----------------------\n\nexport interface VentaItem {\n  producto_id: string\n  producto_nombre: string\n  cantidad: number\n  precio_unitario: number\n  subtotal: number\n}\n\nexport interface Venta {\n  id: string\n  total: number\n  fecha: string\n  vendedor_email: string\n  estado: \"completada\" | \"anulada\"\n  items: VentaItem[]\n  createdAt?: any\n  updatedAt?: any\n}\n\nexport type CreateVentaData = Omit<Venta, \"id\" | \"createdAt\" | \"updatedAt\">\n\n// ---------------------- Colecciones ----------------------\n\nconst productosCollection = collection(db, \"productos\")\nconst usuariosCollection = collection(db, \"usuarios\")\nconst ventasCollection = collection(db, \"ventas\")\n\n// ---------------------- API: Productos ----------------------\n\nexport const productosApi = {\n  async getAll(search?: string): Promise<Producto[]> {\n    const snapshot = await getDocs(productosCollection)\n    let productos: Producto[] = []\n\n    snapshot.forEach((docSnap) => {\n      const data = docSnap.data() as any\n      productos.push({\n        id: docSnap.id,\n        codigo: data.codigo || \"\",\n        nombre: data.nombre || \"\",\n        descripcion: data.descripcion || \"\",\n        precio: Number(data.precio || 0),\n        stock: Number(data.stock || 0),\n        categoria: data.categoria || \"\",\n        proveedor: data.proveedor || \"\",\n        createdAt: data.createdAt,\n        updatedAt: data.updatedAt,\n      })\n    })\n\n    if (search && search.trim()) {\n      const s = search.toLowerCase()\n      productos = productos.filter((p) => p.nombre.toLowerCase().includes(s) || p.codigo.toLowerCase().includes(s))\n    }\n\n    productos.sort((a, b) => a.nombre.localeCompare(b.nombre))\n\n    return productos\n  },\n\n  async getById(id: string): Promise<Producto | null> {\n    const ref = doc(db, \"productos\", id)\n    const snap = await getDoc(ref)\n    if (!snap.exists()) return null\n    const data = snap.data() as any\n    return {\n      id: snap.id,\n      codigo: data.codigo || \"\",\n      nombre: data.nombre || \"\",\n      descripcion: data.descripcion || \"\",\n      precio: Number(data.precio || 0),\n      stock: Number(data.stock || 0),\n      categoria: data.categoria || \"\",\n      proveedor: data.proveedor || \"\",\n      createdAt: data.createdAt,\n      updatedAt: data.updatedAt,\n    }\n  },\n\n  async create(payload: CreateProductoData): Promise<Producto> {\n    if (!payload.nombre || !payload.codigo) {\n      throw new ApiError(\"Nombre y c√≥digo son obligatorios\", 400)\n    }\n\n    const docRef = await addDoc(productosCollection, {\n      ...payload,\n      precio: Number(payload.precio || 0),\n      stock: Number(payload.stock || 0),\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp(),\n    })\n\n    const snap = await getDoc(docRef)\n    const data = snap.data() as any\n\n    return {\n      id: snap.id,\n      codigo: data.codigo || \"\",\n      nombre: data.nombre || \"\",\n      descripcion: data.descripcion || \"\",\n      precio: Number(data.precio || 0),\n      stock: Number(data.stock || 0),\n      categoria: data.categoria || \"\",\n      proveedor: data.proveedor || \"\",\n      createdAt: data.createdAt,\n      updatedAt: data.updatedAt,\n    }\n  },\n\n  async update(id: string, data: UpdateProductoData): Promise<void> {\n    const ref = doc(db, \"productos\", id)\n    const { id: _ignored, ...rest } = data as any\n\n    await updateDoc(ref, {\n      ...rest,\n      ...(rest.precio !== undefined ? { precio: Number(rest.precio) } : {}),\n      ...(rest.stock !== undefined ? { stock: Number(rest.stock) } : {}),\n      updatedAt: serverTimestamp(),\n    })\n  },\n\n  async delete(id: string): Promise<void> {\n    const ref = doc(db, \"productos\", id)\n    await deleteDoc(ref)\n  },\n}\n\n// ---------------------- API: Usuarios ----------------------\n\nexport const usuariosApi = {\n  async getAll(search?: string, rol?: string, activo?: string): Promise<UsuarioApi[]> {\n    const snapshot = await getDocs(usuariosCollection)\n    let usuarios: UsuarioApi[] = []\n\n    snapshot.forEach((docSnap) => {\n      const data = docSnap.data()\n      usuarios.push({\n        id: docSnap.id,\n        nombre: data.nombre || \"\",\n        email: data.email || \"\",\n        rut: data.rut || \"\",\n        rol: data.rol || \"trabajador\",\n        activo: data.activo ?? true,\n        fecha_creacion: data.createdAt?.toDate ? data.createdAt.toDate().toISOString() : new Date().toISOString(),\n        ultimo_acceso: data.lastLogin?.toDate ? data.lastLogin.toDate().toISOString() : null,\n        creado_por_nombre: data.creado_por_nombre || \"Sistema\"\n      })\n    })\n\n    if (search && search.trim()) {\n      const s = search.toLowerCase()\n      usuarios = usuarios.filter(u => \n        u.nombre.toLowerCase().includes(s) || \n        (u.rut && u.rut.toLowerCase().includes(s)) || \n        u.email.toLowerCase().includes(s)\n      )\n    }\n\n    if (rol && rol !== 'all') {\n      usuarios = usuarios.filter(u => u.rol === rol)\n    }\n\n    if (activo && activo !== 'all') {\n      const isActive = activo === 'true'\n      usuarios = usuarios.filter(u => u.activo === isActive)\n    }\n\n    return usuarios\n  },\n\nasync create(data: any): Promise<void> {\n  console.log(\"üìù usuariosApi.create() - Inicio\")\n  console.log(\"üì¶ Datos recibidos:\", data)\n\n  try {\n    // Extraemos uid si viene\n    const { uid, ...rest } = data\n\n    // Si trae uid, lo usamos como ID del documento.\n    // Si no trae uid, se crea doc con ID autom√°tico.\n    const ref = uid \n      ? doc(usuariosCollection, uid) \n      : doc(usuariosCollection)\n\n    console.log(\"üî• Guardando documento en Firestore... (setDoc)\")\n\n    await setDoc(ref, {\n      ...rest,\n      uid: uid || null,\n      activo: true,\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp(),\n    })\n\n    console.log(\"‚úÖ setDoc() exitoso - ID:\", uid || ref.id)\n\n  } catch (error) {\n    console.error(\"‚ùå Error en usuariosApi.create():\", error)\n    throw error\n  }\n},\n\n\n  async update(id: string, data: any): Promise<void> {\n    const ref = doc(db, \"usuarios\", id)\n    await updateDoc(ref, {\n      ...data,\n      updatedAt: serverTimestamp(),\n    })\n  },\n\n  async toggleStatus(id: string, currentStatus: boolean): Promise<void> {\n    const ref = doc(db, \"usuarios\", id)\n    await updateDoc(ref, {\n      activo: !currentStatus,\n      updatedAt: serverTimestamp(),\n    })\n  },\n\n  async delete(id: string): Promise<void> {\n    const ref = doc(db, \"usuarios\", id)\n    await deleteDoc(ref)\n  }\n}\n\n// ---------------------- API: Ventas ----------------------\n\nexport const ventasApi = {\n  async getAll(): Promise<Venta[]> {\n    const snapshot = await getDocs(ventasCollection)\n    const ventas: Venta[] = []\n\n    snapshot.forEach((docSnap) => {\n      const data = docSnap.data()\n      ventas.push({\n        id: docSnap.id,\n        total: Number(data.total || 0),\n        fecha: data.fecha || new Date().toISOString(),\n        vendedor_email: data.vendedor_email || \"\",\n        estado: data.estado || \"completada\",\n        items: data.items || [],\n        createdAt: data.createdAt,\n        updatedAt: data.updatedAt,\n      })\n    })\n\n    // Ordenar por fecha descendente (m√°s recientes primero)\n    ventas.sort((a, b) => new Date(b.fecha).getTime() - new Date(a.fecha).getTime())\n\n    return ventas\n  },\n\n  async getById(id: string): Promise<Venta | null> {\n    const ref = doc(db, \"ventas\", id)\n    const snap = await getDoc(ref)\n    if (!snap.exists()) return null\n    \n    const data = snap.data()\n    return {\n      id: snap.id,\n      total: Number(data.total || 0),\n      fecha: data.fecha || new Date().toISOString(),\n      vendedor_email: data.vendedor_email || \"\",\n      estado: data.estado || \"completada\",\n      items: data.items || [],\n      createdAt: data.createdAt,\n      updatedAt: data.updatedAt,\n    }\n  },\n\n  async create(payload: CreateVentaData): Promise<Venta> {\n    if (!payload.items || payload.items.length === 0) {\n      throw new ApiError(\"La venta debe tener al menos un producto\", 400)\n    }\n\n    // Usar batch para actualizar stock de m√∫ltiples productos at√≥micamente\n    const batch = writeBatch(db)\n\n    try {\n      // 1. Crear la venta\n      const ventaRef = doc(ventasCollection)\n      batch.set(ventaRef, {\n        ...payload,\n        total: Number(payload.total),\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp(),\n      })\n\n      // 2. Actualizar el stock de cada producto\n      for (const item of payload.items) {\n        const productoRef = doc(db, \"productos\", item.producto_id)\n        const productoSnap = await getDoc(productoRef)\n        \n        if (!productoSnap.exists()) {\n          throw new ApiError(`Producto ${item.producto_nombre} no encontrado`, 404)\n        }\n\n        const productoData = productoSnap.data()\n        const nuevoStock = Number(productoData.stock || 0) - item.cantidad\n\n        if (nuevoStock < 0) {\n          throw new ApiError(`Stock insuficiente para ${item.producto_nombre}`, 400)\n        }\n\n        batch.update(productoRef, {\n          stock: nuevoStock,\n          updatedAt: serverTimestamp(),\n        })\n      }\n\n      // 3. Ejecutar todas las operaciones\n      await batch.commit()\n\n      // 4. Obtener la venta creada\n      const ventaSnap = await getDoc(ventaRef)\n      const data = ventaSnap.data()!\n\n      return {\n        id: ventaSnap.id,\n        total: Number(data.total || 0),\n        fecha: data.fecha || new Date().toISOString(),\n        vendedor_email: data.vendedor_email || \"\",\n        estado: data.estado || \"completada\",\n        items: data.items || [],\n        createdAt: data.createdAt,\n        updatedAt: data.updatedAt,\n      }\n    } catch (error) {\n      console.error(\"Error en transacci√≥n de venta:\", error)\n      throw error instanceof ApiError ? error : new ApiError(\"Error al procesar la venta\", 500)\n    }\n  },\n\n  async anular(id: string): Promise<void> {\n    const ventaRef = doc(db, \"ventas\", id)\n    const ventaSnap = await getDoc(ventaRef)\n\n    if (!ventaSnap.exists()) {\n      throw new ApiError(\"Venta no encontrada\", 404)\n    }\n\n    const ventaData = ventaSnap.data()\n\n    if (ventaData.estado === \"anulada\") {\n      throw new ApiError(\"La venta ya est√° anulada\", 400)\n    }\n\n    // Usar batch para devolver el stock\n    const batch = writeBatch(db)\n\n    try {\n      // 1. Marcar venta como anulada\n      batch.update(ventaRef, {\n        estado: \"anulada\",\n        updatedAt: serverTimestamp(),\n      })\n\n      // 2. Devolver el stock de cada producto\n      for (const item of ventaData.items) {\n        const productoRef = doc(db, \"productos\", item.producto_id)\n        const productoSnap = await getDoc(productoRef)\n\n        if (productoSnap.exists()) {\n          const productoData = productoSnap.data()\n          const nuevoStock = Number(productoData.stock || 0) + item.cantidad\n\n          batch.update(productoRef, {\n            stock: nuevoStock,\n            updatedAt: serverTimestamp(),\n          })\n        }\n      }\n\n      await batch.commit()\n    } catch (error) {\n      console.error(\"Error al anular venta:\", error)\n      throw new ApiError(\"Error al anular la venta\", 500)\n    }\n  },\n\n  async delete(id: string): Promise<void> {\n    // Solo permitir eliminar ventas anuladas\n    const ventaRef = doc(db, \"ventas\", id)\n    const ventaSnap = await getDoc(ventaRef)\n\n    if (!ventaSnap.exists()) {\n      throw new ApiError(\"Venta no encontrada\", 404)\n    }\n\n    const ventaData = ventaSnap.data()\n\n    if (ventaData.estado !== \"anulada\") {\n      throw new ApiError(\"Solo se pueden eliminar ventas anuladas\", 400)\n    }\n\n    await deleteDoc(ventaRef)\n  }\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 891, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/lib/helpers.ts"],"sourcesContent":["// lib/helpers.ts\n\n/**\n * Obtiene el estado visual del stock de un producto\n */\nexport const getStockStatus = (stock: number) => {\n  if (stock === 0) {\n    return { \n      color: \"destructive\" as const, \n      text: \"Sin Stock\",\n      icon: \"üö´\" \n    }\n  }\n  if (stock <= 5) {\n    return { \n      color: \"destructive\" as const, \n      text: \"Stock Cr√≠tico\",\n      icon: \"‚ö†Ô∏è\" \n    }\n  }\n  if (stock <= 15) {\n    return { \n      color: \"secondary\" as const, \n      text: \"Stock Medio\",\n      icon: \"üì¶\" \n    }\n  }\n  return { \n    color: \"default\" as const, \n    text: \"Stock Alto\",\n    icon: \"‚úÖ\" \n  }\n}\n\n/**\n * Formatea una fecha a formato chileno legible\n */\nexport const formatDate = (dateString: string | null | undefined): string => {\n  if (!dateString) return \"Nunca\"\n  \n  try {\n    const date = new Date(dateString)\n    if (isNaN(date.getTime())) return \"Fecha inv√°lida\"\n    \n    return new Intl.DateTimeFormat('es-CL', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    }).format(date)\n  } catch {\n    return \"Error al formatear\"\n  }\n}\n\n/**\n * Formatea un precio a formato CLP\n */\nexport const formatearPrecio = (precio: number): string => {\n  return new Intl.NumberFormat(\"es-CL\", {\n    style: \"currency\",\n    currency: \"CLP\",\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(precio)\n}\n\n/**\n * Valida formato de RUT chileno\n */\nexport const validarRUT = (rut: string): boolean => {\n  const rutLimpio = rut.replace(/[^0-9kK]/g, '')\n  if (rutLimpio.length < 2) return false\n  \n  const cuerpo = rutLimpio.slice(0, -1)\n  const dv = rutLimpio.slice(-1).toUpperCase()\n  \n  // Algoritmo m√≥dulo 11\n  let suma = 0\n  let multiplicador = 2\n  \n  for (let i = cuerpo.length - 1; i >= 0; i--) {\n    suma += parseInt(cuerpo[i]) * multiplicador\n    multiplicador = multiplicador === 7 ? 2 : multiplicador + 1\n  }\n  \n  const dvEsperado = 11 - (suma % 11)\n  const dvCalculado = dvEsperado === 11 ? '0' : dvEsperado === 10 ? 'K' : dvEsperado.toString()\n  \n  return dv === dvCalculado\n}\n\n/**\n * Formatea un RUT con puntos y gui√≥n\n */\nexport const formatRUT = (rut: string): string => {\n  const cleaned = rut.replace(/[^0-9kK]/g, \"\")\n  if (cleaned.length <= 1) return cleaned\n  \n  const number = cleaned.slice(0, -1)\n  const dv = cleaned.slice(-1).toUpperCase()\n  const formattedNumber = number.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")\n  \n  return `${formattedNumber}-${dv}`\n}\n\n/**\n * Valida formato de email\n */\nexport const validarEmail = (email: string): boolean => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n  return emailRegex.test(email)\n}\n\n/**\n * Trunca un texto a un n√∫mero m√°ximo de caracteres\n */\nexport const truncateText = (text: string, maxLength: number): string => {\n  if (text.length <= maxLength) return text\n  return text.slice(0, maxLength) + '...'\n}"],"names":[],"mappings":"AAAA,iBAAiB;AAEjB;;CAEC;;;;;;;;;;;;;;;;AACM,MAAM,iBAAiB,CAAC;IAC7B,IAAI,UAAU,GAAG;QACf,OAAO;YACL,OAAO;YACP,MAAM;YACN,MAAM;QACR;IACF;IACA,IAAI,SAAS,GAAG;QACd,OAAO;YACL,OAAO;YACP,MAAM;YACN,MAAM;QACR;IACF;IACA,IAAI,SAAS,IAAI;QACf,OAAO;YACL,OAAO;YACP,MAAM;YACN,MAAM;QACR;IACF;IACA,OAAO;QACL,OAAO;QACP,MAAM;QACN,MAAM;IACR;AACF;AAKO,MAAM,aAAa,CAAC;IACzB,IAAI,CAAC,YAAY,OAAO;IAExB,IAAI;QACF,MAAM,OAAO,IAAI,KAAK;QACtB,IAAI,MAAM,KAAK,OAAO,KAAK,OAAO;QAElC,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;YACtC,MAAM;YACN,OAAO;YACP,KAAK;YACL,MAAM;YACN,QAAQ;QACV,GAAG,MAAM,CAAC;IACZ,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAKO,MAAM,kBAAkB,CAAC;IAC9B,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;QACvB,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAKO,MAAM,aAAa,CAAC;IACzB,MAAM,YAAY,IAAI,OAAO,CAAC,aAAa;IAC3C,IAAI,UAAU,MAAM,GAAG,GAAG,OAAO;IAEjC,MAAM,SAAS,UAAU,KAAK,CAAC,GAAG,CAAC;IACnC,MAAM,KAAK,UAAU,KAAK,CAAC,CAAC,GAAG,WAAW;IAE1C,sBAAsB;IACtB,IAAI,OAAO;IACX,IAAI,gBAAgB;IAEpB,IAAK,IAAI,IAAI,OAAO,MAAM,GAAG,GAAG,KAAK,GAAG,IAAK;QAC3C,QAAQ,SAAS,MAAM,CAAC,EAAE,IAAI;QAC9B,gBAAgB,kBAAkB,IAAI,IAAI,gBAAgB;IAC5D;IAEA,MAAM,aAAa,KAAM,OAAO;IAChC,MAAM,cAAc,eAAe,KAAK,MAAM,eAAe,KAAK,MAAM,WAAW,QAAQ;IAE3F,OAAO,OAAO;AAChB;AAKO,MAAM,YAAY,CAAC;IACxB,MAAM,UAAU,IAAI,OAAO,CAAC,aAAa;IACzC,IAAI,QAAQ,MAAM,IAAI,GAAG,OAAO;IAEhC,MAAM,SAAS,QAAQ,KAAK,CAAC,GAAG,CAAC;IACjC,MAAM,KAAK,QAAQ,KAAK,CAAC,CAAC,GAAG,WAAW;IACxC,MAAM,kBAAkB,OAAO,OAAO,CAAC,yBAAyB;IAEhE,OAAO,GAAG,gBAAgB,CAAC,EAAE,IAAI;AACnC;AAKO,MAAM,eAAe,CAAC;IAC3B,MAAM,aAAa;IACnB,OAAO,WAAW,IAAI,CAAC;AACzB;AAKO,MAAM,eAAe,CAAC,MAAc;IACzC,IAAI,KAAK,MAAM,IAAI,WAAW,OAAO;IACrC,OAAO,KAAK,KAAK,CAAC,GAAG,aAAa;AACpC"}},
    {"offset": {"line": 998, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/app/dashboard/ventas/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { useAuth } from \"@/lib/auth-context\"\n\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\nimport { toast } from \"@/hooks/use-toast\"\n\nimport {\n  Search,\n  ShoppingCart,\n  Plus,\n  Minus,\n  Trash2,\n  DollarSign,\n  Package,\n  Scan,\n  History,\n  Printer,\n  CheckCircle,\n  Receipt,\n  ArrowLeft,\n  Loader2\n} from \"lucide-react\"\n\nimport DashboardHeader from \"@/components/dashboard-header\"\nimport { productosApi, ventasApi, type Producto, type Venta } from \"@/lib/api\"\nimport { formatearPrecio } from \"@/lib/helpers\"\n\n// Interfaz local para el carrito\ninterface ItemCarrito {\n  producto: Producto\n  cantidad: number\n  subtotal: number\n}\n\nexport default function VentasPage() {\n  const { usuario, isAuthenticated, isLoading: authLoading, hasRole } = useAuth()\n  const router = useRouter()\n\n  const [productos, setProductos] = useState<Producto[]>([])\n  const [carrito, setCarrito] = useState<ItemCarrito[]>([])\n  const [ventas, setVentas] = useState<Venta[]>([])\n  \n  const [busqueda, setBusqueda] = useState(\"\")\n  const [codigoBarras, setCodigoBarras] = useState(\"\")\n  const [vistaActual, setVistaActual] = useState<\"venta\" | \"historial\">(\"venta\")\n  const [procesando, setProcesando] = useState(false)\n  const [ventaCompletada, setVentaCompletada] = useState<Venta | null>(null)\n  const [mostrarBoleta, setMostrarBoleta] = useState(false)\n\n  // Carga inicial\n  useEffect(() => {\n    if (!authLoading && !isAuthenticated) {\n      router.push(\"/login\")\n      return\n    }\n\n    if (isAuthenticated) {\n      cargarDatos()\n    }\n  }, [isAuthenticated, authLoading, router])\n\n  const cargarDatos = async () => {\n    try {\n      const [productosData, ventasData] = await Promise.all([\n        productosApi.getAll(),\n        ventasApi.getAll()\n      ])\n      setProductos(productosData)\n      setVentas(ventasData)\n    } catch (error) {\n      console.error(\"Error cargando datos:\", error)\n      toast({ \n        title: \"Error\", \n        description: \"No se pudieron cargar los datos.\", \n        variant: \"destructive\" \n      })\n    }\n  }\n\n  // --- L√≥gica del Carrito ---\n\n  const buscarPorCodigo = () => {\n    if (!codigoBarras.trim()) return\n\n    const producto = productos.find((p) => p.codigo === codigoBarras.trim())\n    if (producto) {\n      agregarAlCarrito(producto)\n      setCodigoBarras(\"\")\n      toast({ title: \"Producto agregado\", description: producto.nombre })\n    } else {\n      toast({ \n        title: \"No encontrado\", \n        description: \"C√≥digo no registrado\", \n        variant: \"destructive\" \n      })\n    }\n  }\n\n  const productosFiltrados = productos.filter(\n    (producto) => \n      producto.nombre.toLowerCase().includes(busqueda.toLowerCase()) || \n      producto.codigo.includes(busqueda)\n  )\n\n  const agregarAlCarrito = (producto: Producto) => {\n    if (producto.stock <= 0) {\n      toast({ \n        title: \"Sin stock\", \n        description: `No queda stock de ${producto.nombre}`, \n        variant: \"destructive\" \n      })\n      return\n    }\n\n    const itemExistente = carrito.find((item) => item.producto.id === producto.id)\n\n    if (itemExistente) {\n      if (itemExistente.cantidad >= producto.stock) {\n        toast({ \n          title: \"Stock insuficiente\", \n          description: \"No puedes agregar m√°s unidades de las disponibles.\", \n          variant: \"destructive\" \n        })\n        return\n      }\n      actualizarCantidad(producto.id, itemExistente.cantidad + 1)\n    } else {\n      const nuevoItem: ItemCarrito = {\n        producto,\n        cantidad: 1,\n        subtotal: producto.precio,\n      }\n      setCarrito([...carrito, nuevoItem])\n    }\n  }\n\n  const actualizarCantidad = (productoId: string, nuevaCantidad: number) => {\n    if (nuevaCantidad <= 0) {\n      eliminarDelCarrito(productoId)\n      return\n    }\n\n    const producto = productos.find((p) => p.id === productoId)\n    if (producto && nuevaCantidad > producto.stock) {\n      toast({ title: \"Stock l√≠mite alcanzado\", variant: \"destructive\" })\n      return\n    }\n\n    setCarrito(\n      carrito.map((item) =>\n        item.producto.id === productoId\n          ? {\n              ...item,\n              cantidad: nuevaCantidad,\n              subtotal: item.producto.precio * nuevaCantidad,\n            }\n          : item,\n      ),\n    )\n  }\n\n  const eliminarDelCarrito = (productoId: string) => {\n    setCarrito(carrito.filter((item) => item.producto.id !== productoId))\n  }\n\n  const calcularTotal = () => {\n    return carrito.reduce((total, item) => total + item.subtotal, 0)\n  }\n\n  // --- Procesar Venta con Firebase ---\n\n  const procesarVenta = async () => {\n    if (carrito.length === 0) {\n      toast({ \n        title: \"Carrito vac√≠o\", \n        description: \"Agrega productos antes de procesar.\", \n        variant: \"destructive\" \n      })\n      return\n    }\n\n    setProcesando(true)\n    try {\n      const totalVenta = calcularTotal()\n      \n      const nuevaVenta = await ventasApi.create({\n        total: totalVenta,\n        fecha: new Date().toISOString(),\n        vendedor_email: usuario?.email || \"desconocido\",\n        estado: \"completada\",\n        items: carrito.map(item => ({\n          producto_id: item.producto.id,\n          producto_nombre: item.producto.nombre,\n          cantidad: item.cantidad,\n          precio_unitario: item.producto.precio,\n          subtotal: item.subtotal\n        }))\n      })\n\n      setVentaCompletada(nuevaVenta)\n      setMostrarBoleta(true)\n      \n      // Limpieza y recarga\n      setCarrito([])\n      cargarDatos()\n      \n      toast({ \n        title: \"Venta exitosa\", \n        description: \"La venta se ha registrado correctamente.\" \n      })\n\n    } catch (error) {\n      console.error(\"Error al procesar venta:\", error)\n      toast({ \n        title: \"Error\", \n        description: \"Hubo un problema al procesar la venta.\", \n        variant: \"destructive\" \n      })\n    } finally {\n      setProcesando(false)\n    }\n  }\n\n  const anularVenta = async (ventaId: string) => {\n    if (!hasRole(\"admin\")) {\n      toast({\n        title: \"Permiso denegado\",\n        description: \"Solo administradores pueden anular ventas\",\n        variant: \"destructive\"\n      })\n      return\n    }\n\n    if(!confirm(\"¬øEst√°s seguro de anular esta venta? El stock ser√° devuelto.\")) return\n\n    try {\n      await ventasApi.anular(ventaId)\n      toast({ \n        title: \"Venta anulada\", \n        description: \"El stock ha sido restaurado.\" \n      })\n      cargarDatos()\n    } catch (error) {\n      console.error(error)\n      toast({ \n        title: \"Error\", \n        description: \"No se pudo anular la venta.\", \n        variant: \"destructive\" \n      })\n    }\n  }\n\n  // --- Impresi√≥n ---\n\n  const imprimirBoleta = () => {\n    if (!ventaCompletada) return\n\n    const ventana = window.open(\"\", \"_blank\")\n    if (!ventana) return\n\n    const contenidoBoleta = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Boleta #${ventaCompletada.id.slice(0, 8)}</title>\n        <style>\n          body { font-family: 'Courier New', monospace; width: 300px; margin: 0; padding: 20px; }\n          .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 15px; }\n          .item { display: flex; justify-content: space-between; margin: 5px 0; }\n          .total { border-top: 2px solid #000; padding-top: 10px; margin-top: 15px; font-weight: bold; }\n          .footer { text-align: center; margin-top: 20px; font-size: 12px; }\n        </style>\n      </head>\n      <body>\n        <div class=\"header\">\n          <h2>GESTICOM</h2>\n          <p>Boleta de Venta</p>\n          <p>Ref: ${ventaCompletada.id.slice(0, 8)}</p>\n          <p>${new Date(ventaCompletada.fecha).toLocaleString(\"es-CL\")}</p>\n          <p>Vendedor: ${ventaCompletada.vendedor_email}</p>\n        </div>\n        \n        <div class=\"items\">\n          ${ventaCompletada.items\n            .map(\n              (item) => `\n            <div class=\"item\">\n              <span>${item.cantidad}x ${item.producto_nombre}</span>\n              <span>${formatearPrecio(item.subtotal)}</span>\n            </div>\n          `,\n            )\n            .join(\"\")}\n        </div>\n        \n        <div class=\"total\">\n          <div class=\"item\">\n            <span>TOTAL:</span>\n            <span>${formatearPrecio(ventaCompletada.total)}</span>\n          </div>\n        </div>\n        \n        <div class=\"footer\">\n          <p>¬°Gracias por su compra!</p>\n        </div>\n      </body>\n      </html>\n    `\n\n    ventana.document.write(contenidoBoleta)\n    ventana.document.close()\n    ventana.print()\n  }\n\n  // Loading State\n  if (authLoading) return null\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <DashboardHeader />\n\n      <main className=\"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 space-y-6\">\n        \n        {/* Barra Superior */}\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n          <div className=\"flex items-center gap-4\">\n            <Button variant=\"outline\" size=\"icon\" onClick={() => router.push(\"/dashboard\")}>\n              <ArrowLeft className=\"h-4 w-4\" />\n            </Button>\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900 flex items-center gap-2\">\n                <ShoppingCart className=\"h-6 w-6\" />\n                Punto de Venta\n              </h1>\n              <p className=\"text-sm text-gray-500\">Gestiona ventas y devoluciones</p>\n            </div>\n          </div>\n\n          <div className=\"flex gap-2\">\n            <Button\n              variant={vistaActual === \"venta\" ? \"default\" : \"outline\"}\n              onClick={() => setVistaActual(\"venta\")}\n            >\n              <ShoppingCart className=\"h-4 w-4 mr-2\" />\n              Nueva Venta\n            </Button>\n            <Button\n              variant={vistaActual === \"historial\" ? \"default\" : \"outline\"}\n              onClick={() => setVistaActual(\"historial\")}\n            >\n              <History className=\"h-4 w-4 mr-2\" />\n              Historial\n            </Button>\n          </div>\n        </div>\n\n        {vistaActual === \"venta\" ? (\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n            \n            {/* Columna Izquierda: Buscador y Cat√°logo */}\n            <div className=\"lg:col-span-2 space-y-6\">\n              \n              {/* Esc√°ner */}\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-base flex items-center\">\n                    <Scan className=\"h-4 w-4 mr-2\" /> Esc√°ner\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"flex gap-2\">\n                    <Input\n                      placeholder=\"C√≥digo de barras...\"\n                      value={codigoBarras}\n                      onChange={(e) => setCodigoBarras(e.target.value)}\n                      onKeyDown={(e) => e.key === \"Enter\" && buscarPorCodigo()}\n                      autoFocus\n                    />\n                    <Button onClick={buscarPorCodigo}>\n                      <Search className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Cat√°logo */}\n              <Card className=\"flex-1\">\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-base flex items-center\">\n                    <Package className=\"h-4 w-4 mr-2\" /> Cat√°logo\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <Input\n                    placeholder=\"Filtrar productos...\"\n                    value={busqueda}\n                    onChange={(e) => setBusqueda(e.target.value)}\n                    className=\"mb-4\"\n                  />\n                  \n                  <div className=\"h-[400px] overflow-y-auto pr-2 space-y-2\">\n                    {productosFiltrados.map((producto) => (\n                      <div\n                        key={producto.id}\n                        onClick={() => agregarAlCarrito(producto)}\n                        className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-all active:scale-[0.99]\"\n                      >\n                        <div>\n                          <p className=\"font-medium text-sm\">{producto.nombre}</p>\n                          <p className=\"text-xs text-gray-500 font-mono\">{producto.codigo}</p>\n                        </div>\n                        <div className=\"text-right\">\n                          <p className=\"font-bold text-sm\">{formatearPrecio(producto.precio)}</p>\n                          <Badge variant={producto.stock > 0 ? \"secondary\" : \"destructive\"} className=\"text-xs\">\n                            Stock: {producto.stock}\n                          </Badge>\n                        </div>\n                      </div>\n                    ))}\n                    {productosFiltrados.length === 0 && (\n                      <p className=\"text-center text-gray-400 py-8\">No se encontraron productos</p>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Columna Derecha: Carrito */}\n            <div className=\"space-y-6\">\n              <Card className=\"h-full flex flex-col border-primary/20 shadow-md\">\n                <CardHeader className=\"bg-primary/5 pb-3\">\n                  <CardTitle className=\"flex justify-between items-center text-base\">\n                    <span>Carrito</span>\n                    <Badge variant=\"default\">{carrito.length} Items</Badge>\n                  </CardTitle>\n                </CardHeader>\n                \n                <CardContent className=\"flex-1 flex flex-col p-0\">\n                  {carrito.length === 0 ? (\n                    <div className=\"flex-1 flex flex-col items-center justify-center text-gray-400 p-8 min-h-[300px]\">\n                      <ShoppingCart className=\"h-12 w-12 mb-2 opacity-20\" />\n                      <p>Carrito vac√≠o</p>\n                    </div>\n                  ) : (\n                    <div className=\"flex-1 overflow-y-auto p-4 space-y-3 min-h-[300px]\">\n                      {carrito.map((item) => (\n                        <div key={item.producto.id} className=\"flex justify-between items-start border-b pb-3 last:border-0\">\n                          <div className=\"flex-1\">\n                            <p className=\"text-sm font-medium\">{item.producto.nombre}</p>\n                            <p className=\"text-xs text-gray-500\">{formatearPrecio(item.producto.precio)} c/u</p>\n                            \n                            <div className=\"flex items-center gap-2 mt-2\">\n                              <Button \n                                variant=\"outline\" \n                                size=\"icon\" \n                                className=\"h-6 w-6\" \n                                onClick={() => actualizarCantidad(item.producto.id, item.cantidad - 1)}\n                              >\n                                <Minus className=\"h-3 w-3\" />\n                              </Button>\n                              <span className=\"text-sm w-8 text-center\">{item.cantidad}</span>\n                              <Button \n                                variant=\"outline\" \n                                size=\"icon\" \n                                className=\"h-6 w-6\" \n                                onClick={() => actualizarCantidad(item.producto.id, item.cantidad + 1)}\n                              >\n                                <Plus className=\"h-3 w-3\" />\n                              </Button>\n                            </div>\n                          </div>\n                          <div className=\"flex flex-col items-end gap-2\">\n                            <span className=\"font-bold text-sm\">{formatearPrecio(item.subtotal)}</span>\n                            <Button \n                              variant=\"ghost\" \n                              size=\"icon\" \n                              className=\"h-6 w-6 text-red-400 hover:text-red-600\" \n                              onClick={() => eliminarDelCarrito(item.producto.id)}\n                            >\n                              <Trash2 className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n\n                  <div className=\"p-4 bg-gray-50 border-t mt-auto\">\n                    <div className=\"flex justify-between items-center mb-4 text-xl font-bold\">\n                      <span>Total</span>\n                      <span>{formatearPrecio(calcularTotal())}</span>\n                    </div>\n                    <Button \n                      className=\"w-full h-12 text-lg\" \n                      disabled={carrito.length === 0 || procesando}\n                      onClick={procesarVenta}\n                    >\n                      {procesando ? (\n                        <><Loader2 className=\"h-5 w-5 mr-2 animate-spin\" /> Procesando...</>\n                      ) : (\n                        <><DollarSign className=\"h-5 w-5 mr-2\" /> Pagar</>\n                      )}\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        ) : (\n          /* VISTA HISTORIAL */\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <History className=\"h-5 w-5\" /> √öltimas Ventas\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {ventas.map((venta) => (\n                  <div \n                    key={venta.id} \n                    className=\"border rounded-lg p-4 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 hover:bg-gray-50 transition-colors\"\n                  >\n                    <div>\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <span className=\"font-bold text-gray-900\">#{venta.id.slice(0, 8)}...</span>\n                        <Badge variant={venta.estado === \"anulada\" ? \"destructive\" : \"default\"}>\n                          {venta.estado}\n                        </Badge>\n                      </div>\n                      <p className=\"text-xs text-gray-500 flex items-center gap-2\">\n                        {new Date(venta.fecha).toLocaleString(\"es-CL\")} \n                        <span>‚Ä¢</span> \n                        {venta.vendedor_email}\n                      </p>\n                      <div className=\"mt-2 text-sm text-gray-600\">\n                        {venta.items.map((it, idx) => (\n                          <span key={idx} className=\"mr-3 block sm:inline\">\n                            {it.cantidad}x {it.producto_nombre}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex flex-col items-end gap-2 w-full md:w-auto\">\n                      <span className=\"text-xl font-bold\">{formatearPrecio(venta.total)}</span>\n                      {hasRole(\"admin\") && venta.estado === \"completada\" && (\n                        <Button \n                          variant=\"outline\" \n                          size=\"sm\" \n                          className=\"text-red-600 hover:bg-red-50 hover:text-red-700\" \n                          onClick={() => anularVenta(venta.id)}\n                        >\n                          Anular Venta\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                ))}\n                {ventas.length === 0 && (\n                  <div className=\"text-center text-gray-500 py-8\">\n                    No hay ventas registradas\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        )}\n      </main>\n\n      {/* Modal Boleta */}\n      <Dialog open={mostrarBoleta} onOpenChange={setMostrarBoleta}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center text-green-600 gap-2\">\n              <CheckCircle className=\"h-6 w-6\" /> Venta Completada\n            </DialogTitle>\n          </DialogHeader>\n          \n          {ventaCompletada && (\n            <div className=\"space-y-6 py-4\">\n              <div className=\"text-center bg-green-50 p-6 rounded-xl border border-green-100\">\n                <p className=\"text-sm text-green-800 font-medium mb-1\">Total Pagado</p>\n                <p className=\"text-4xl font-bold text-green-700\">{formatearPrecio(ventaCompletada.total)}</p>\n              </div>\n              \n              <div className=\"grid grid-cols-2 gap-3\">\n                <Button className=\"w-full\" variant=\"outline\" onClick={imprimirBoleta}>\n                  <Printer className=\"h-4 w-4 mr-2\" /> Imprimir\n                </Button>\n                <Button className=\"w-full\" onClick={() => setMostrarBoleta(false)}>\n                  <Receipt className=\"h-4 w-4 mr-2\" /> Nueva Venta\n                </Button>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}"],"names":[],"mappings":"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"}}]
}