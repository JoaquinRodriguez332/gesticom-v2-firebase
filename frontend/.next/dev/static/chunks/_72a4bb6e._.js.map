{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/lib/auth-context.tsx"],"sourcesContent":["// This file is deprecated - use @/contexts/auth-context instead\nexport { useAuth, AuthProvider } from \"@/contexts/auth-context\"\nexport type { Usuario } from \"@/contexts/auth-context\"\n"],"names":[],"mappings":"AAAA,gEAAgE;;AAChE"}},
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,2KAAgB,MAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS"}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/dashboard-header.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Store, Shield, User, LogOut } from \"lucide-react\"\nimport { useAuth } from \"@/lib/auth-context\"\n//import NotificacionesPanel from \"./notificaciones-panel\"\n\nconst DashboardHeader: React.FC = () => {\n  const { usuario, logout } = useAuth()\n\nconsole.log(\"üîç Usuario actual:\", {\n  id: usuario?.id,\n  email: usuario?.email,\n  nombre: usuario?.nombre,\n  rol: usuario?.rol,\n  tipo: typeof usuario?.rol\n})\n\n  if (!usuario) return null\n\n  return (\n    <header className=\"bg-white shadow-sm border-b sticky top-0 z-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center h-16\">\n          {/* Logo y t√≠tulo */}\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"bg-gray-900 rounded-lg p-2\">\n              <Store className=\"h-6 w-6 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-xl font-bold text-gray-900\">GestiCom Dashboard</h1>\n            </div>\n          </div>\n\n          {/* Usuario y acciones */}\n          <div className=\"flex items-center space-x-4\">\n            {/* Notificaciones */}\n\n            {/* Info del usuario */}\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"text-right\">\n                <p className=\"text-sm font-medium text-gray-900\">{usuario.nombre}</p>\n                <div className=\"flex items-center justify-end space-x-1\">\n                  {usuario.rol === \"admin\" ? (\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      <Shield className=\"h-3 w-3 mr-1\" />\n                      Administrador\n                    </Badge>\n                  ) : (\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      <User className=\"h-3 w-3 mr-1\" />\n                      Trabajador\n                    </Badge>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Bot√≥n de logout */}\n            <Button variant=\"outline\" size=\"sm\" onClick={logout}>\n              <LogOut className=\"h-4 w-4 mr-2\" />\n              Cerrar Sesi√≥n\n            </Button>\n          </div>\n        </div>\n      </div>\n    </header>\n  )\n}\n\nexport default DashboardHeader\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;;;AANA;;;;;AAOA,0DAA0D;AAE1D,MAAM,kBAA4B;;IAChC,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,0IAAO;IAErC,QAAQ,GAAG,CAAC,sBAAsB;QAChC,IAAI,SAAS;QACb,OAAO,SAAS;QAChB,QAAQ,SAAS;QACjB,KAAK,SAAS;QACd,MAAM,OAAO,SAAS;IACxB;IAEE,IAAI,CAAC,SAAS,OAAO;IAErB,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,gNAAK;oCAAC,WAAU;;;;;;;;;;;0CAEnB,6LAAC;0CACC,cAAA,6LAAC;oCAAG,WAAU;8CAAkC;;;;;;;;;;;;;;;;;kCAKpD,6LAAC;wBAAI,WAAU;;0CAIb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAE,WAAU;sDAAqC,QAAQ,MAAM;;;;;;sDAChE,6LAAC;4CAAI,WAAU;sDACZ,QAAQ,GAAG,KAAK,wBACf,6LAAC,sIAAK;gDAAC,SAAQ;gDAAY,WAAU;;kEACnC,6LAAC,mNAAM;wDAAC,WAAU;;;;;;oDAAiB;;;;;;yGAIrC,6LAAC,sIAAK;gDAAC,SAAQ;gDAAY,WAAU;;kEACnC,6LAAC,6MAAI;wDAAC,WAAU;;;;;;oDAAiB;;;;;;;;;;;;;;;;;;;;;;;0CAS3C,6LAAC,wIAAM;gCAAC,SAAQ;gCAAU,MAAK;gCAAK,SAAS;;kDAC3C,6LAAC,uNAAM;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQjD;GA7DM;;QACwB,0IAAO;;;KAD/B;uCA+DS"}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 440, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,2KAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,IAAA,qHAAE,EACX,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 475, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,IAAA,0KAAG,EACvB;AAGF,MAAM,sBAAQ,2KAAgB,MAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,4KAAmB;QAClB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,4KAAmB,CAAC,WAAW"}},
    {"offset": {"line": 513, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,2KAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AACA,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 547, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/lib/api.ts"],"sourcesContent":["// lib/api.ts\nimport { addDoc, collection, deleteDoc, doc, getDoc, getDocs, serverTimestamp, updateDoc, writeBatch,  setDoc   } from \"firebase/firestore\"\nimport { db } from \"@/lib/firebase\"\n\n// ---------------------- Tipos comunes y Errores ----------------------\n\nexport class ApiError extends Error {\n  status?: number\n  constructor(message: string, status?: number) {\n    super(message)\n    this.name = \"ApiError\"\n    this.status = status\n  }\n}\n\n// ---------------------- Interfaces de Productos ----------------------\n\nexport interface Producto {\n  id: string\n  codigo: string\n  nombre: string\n  descripcion?: string\n  precio: number\n  stock: number\n  categoria?: string\n  proveedor?: string\n  createdAt?: any\n  updatedAt?: any\n}\n\nexport type CreateProductoData = Omit<Producto, \"id\" | \"createdAt\" | \"updatedAt\">\nexport type UpdateProductoData = Partial<CreateProductoData>\n\n// ---------------------- Interfaces de Usuarios ----------------------\n\nexport interface UsuarioApi {\n  id: string\n  nombre: string\n  email: string\n  rut?: string\n  rol?: string\n  activo?: boolean\n  fecha_creacion?: string\n  ultimo_acceso?: string | null\n  creado_por_nombre?: string | null\n}\n\n// ---------------------- Interfaces de Ventas ----------------------\n\nexport interface VentaItem {\n  producto_id: string\n  producto_nombre: string\n  cantidad: number\n  precio_unitario: number\n  subtotal: number\n}\n\nexport interface Venta {\n  id: string\n  total: number\n  fecha: string\n  vendedor_email: string\n  estado: \"completada\" | \"anulada\"\n  items: VentaItem[]\n  createdAt?: any\n  updatedAt?: any\n}\n\nexport type CreateVentaData = Omit<Venta, \"id\" | \"createdAt\" | \"updatedAt\">\n\n// ---------------------- Colecciones ----------------------\n\nconst productosCollection = collection(db, \"productos\")\nconst usuariosCollection = collection(db, \"usuarios\")\nconst ventasCollection = collection(db, \"ventas\")\n\n// ---------------------- API: Productos ----------------------\n\nexport const productosApi = {\n  async getAll(search?: string): Promise<Producto[]> {\n    const snapshot = await getDocs(productosCollection)\n    let productos: Producto[] = []\n\n    snapshot.forEach((docSnap) => {\n      const data = docSnap.data() as any\n      productos.push({\n        id: docSnap.id,\n        codigo: data.codigo || \"\",\n        nombre: data.nombre || \"\",\n        descripcion: data.descripcion || \"\",\n        precio: Number(data.precio || 0),\n        stock: Number(data.stock || 0),\n        categoria: data.categoria || \"\",\n        proveedor: data.proveedor || \"\",\n        createdAt: data.createdAt,\n        updatedAt: data.updatedAt,\n      })\n    })\n\n    if (search && search.trim()) {\n      const s = search.toLowerCase()\n      productos = productos.filter((p) => p.nombre.toLowerCase().includes(s) || p.codigo.toLowerCase().includes(s))\n    }\n\n    productos.sort((a, b) => a.nombre.localeCompare(b.nombre))\n\n    return productos\n  },\n\n  async getById(id: string): Promise<Producto | null> {\n    const ref = doc(db, \"productos\", id)\n    const snap = await getDoc(ref)\n    if (!snap.exists()) return null\n    const data = snap.data() as any\n    return {\n      id: snap.id,\n      codigo: data.codigo || \"\",\n      nombre: data.nombre || \"\",\n      descripcion: data.descripcion || \"\",\n      precio: Number(data.precio || 0),\n      stock: Number(data.stock || 0),\n      categoria: data.categoria || \"\",\n      proveedor: data.proveedor || \"\",\n      createdAt: data.createdAt,\n      updatedAt: data.updatedAt,\n    }\n  },\n\n  async create(payload: CreateProductoData): Promise<Producto> {\n    if (!payload.nombre || !payload.codigo) {\n      throw new ApiError(\"Nombre y c√≥digo son obligatorios\", 400)\n    }\n\n    const docRef = await addDoc(productosCollection, {\n      ...payload,\n      precio: Number(payload.precio || 0),\n      stock: Number(payload.stock || 0),\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp(),\n    })\n\n    const snap = await getDoc(docRef)\n    const data = snap.data() as any\n\n    return {\n      id: snap.id,\n      codigo: data.codigo || \"\",\n      nombre: data.nombre || \"\",\n      descripcion: data.descripcion || \"\",\n      precio: Number(data.precio || 0),\n      stock: Number(data.stock || 0),\n      categoria: data.categoria || \"\",\n      proveedor: data.proveedor || \"\",\n      createdAt: data.createdAt,\n      updatedAt: data.updatedAt,\n    }\n  },\n\n  async update(id: string, data: UpdateProductoData): Promise<void> {\n    const ref = doc(db, \"productos\", id)\n    const { id: _ignored, ...rest } = data as any\n\n    await updateDoc(ref, {\n      ...rest,\n      ...(rest.precio !== undefined ? { precio: Number(rest.precio) } : {}),\n      ...(rest.stock !== undefined ? { stock: Number(rest.stock) } : {}),\n      updatedAt: serverTimestamp(),\n    })\n  },\n\n  async delete(id: string): Promise<void> {\n    const ref = doc(db, \"productos\", id)\n    await deleteDoc(ref)\n  },\n}\n\n// ---------------------- API: Usuarios ----------------------\n\nexport const usuariosApi = {\n  async getAll(search?: string, rol?: string, activo?: string): Promise<UsuarioApi[]> {\n    const snapshot = await getDocs(usuariosCollection)\n    let usuarios: UsuarioApi[] = []\n\n    snapshot.forEach((docSnap) => {\n      const data = docSnap.data()\n      usuarios.push({\n        id: docSnap.id,\n        nombre: data.nombre || \"\",\n        email: data.email || \"\",\n        rut: data.rut || \"\",\n        rol: data.rol || \"trabajador\",\n        activo: data.activo ?? true,\n        fecha_creacion: data.createdAt?.toDate ? data.createdAt.toDate().toISOString() : new Date().toISOString(),\n        ultimo_acceso: data.lastLogin?.toDate ? data.lastLogin.toDate().toISOString() : null,\n        creado_por_nombre: data.creado_por_nombre || \"Sistema\"\n      })\n    })\n\n    if (search && search.trim()) {\n      const s = search.toLowerCase()\n      usuarios = usuarios.filter(u => \n        u.nombre.toLowerCase().includes(s) || \n        (u.rut && u.rut.toLowerCase().includes(s)) || \n        u.email.toLowerCase().includes(s)\n      )\n    }\n\n    if (rol && rol !== 'all') {\n      usuarios = usuarios.filter(u => u.rol === rol)\n    }\n\n    if (activo && activo !== 'all') {\n      const isActive = activo === 'true'\n      usuarios = usuarios.filter(u => u.activo === isActive)\n    }\n\n    return usuarios\n  },\n\nasync create(data: any): Promise<void> {\n  console.log(\"üìù usuariosApi.create() - Inicio\")\n  console.log(\"üì¶ Datos recibidos:\", data)\n\n  try {\n    // Extraemos uid si viene\n    const { uid, ...rest } = data\n\n    // Si trae uid, lo usamos como ID del documento.\n    // Si no trae uid, se crea doc con ID autom√°tico.\n    const ref = uid \n      ? doc(usuariosCollection, uid) \n      : doc(usuariosCollection)\n\n    console.log(\"üî• Guardando documento en Firestore... (setDoc)\")\n\n    await setDoc(ref, {\n      ...rest,\n      uid: uid || null,\n      activo: true,\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp(),\n    })\n\n    console.log(\"‚úÖ setDoc() exitoso - ID:\", uid || ref.id)\n\n  } catch (error) {\n    console.error(\"‚ùå Error en usuariosApi.create():\", error)\n    throw error\n  }\n},\n\n\n  async update(id: string, data: any): Promise<void> {\n    const ref = doc(db, \"usuarios\", id)\n    await updateDoc(ref, {\n      ...data,\n      updatedAt: serverTimestamp(),\n    })\n  },\n\n  async toggleStatus(id: string, currentStatus: boolean): Promise<void> {\n    const ref = doc(db, \"usuarios\", id)\n    await updateDoc(ref, {\n      activo: !currentStatus,\n      updatedAt: serverTimestamp(),\n    })\n  },\n\n  async delete(id: string): Promise<void> {\n    const ref = doc(db, \"usuarios\", id)\n    await deleteDoc(ref)\n  }\n}\n\n// ---------------------- API: Ventas ----------------------\n\nexport const ventasApi = {\n  async getAll(): Promise<Venta[]> {\n    const snapshot = await getDocs(ventasCollection)\n    const ventas: Venta[] = []\n\n    snapshot.forEach((docSnap) => {\n      const data = docSnap.data()\n      ventas.push({\n        id: docSnap.id,\n        total: Number(data.total || 0),\n        fecha: data.fecha || new Date().toISOString(),\n        vendedor_email: data.vendedor_email || \"\",\n        estado: data.estado || \"completada\",\n        items: data.items || [],\n        createdAt: data.createdAt,\n        updatedAt: data.updatedAt,\n      })\n    })\n\n    // Ordenar por fecha descendente (m√°s recientes primero)\n    ventas.sort((a, b) => new Date(b.fecha).getTime() - new Date(a.fecha).getTime())\n\n    return ventas\n  },\n\n  async getById(id: string): Promise<Venta | null> {\n    const ref = doc(db, \"ventas\", id)\n    const snap = await getDoc(ref)\n    if (!snap.exists()) return null\n    \n    const data = snap.data()\n    return {\n      id: snap.id,\n      total: Number(data.total || 0),\n      fecha: data.fecha || new Date().toISOString(),\n      vendedor_email: data.vendedor_email || \"\",\n      estado: data.estado || \"completada\",\n      items: data.items || [],\n      createdAt: data.createdAt,\n      updatedAt: data.updatedAt,\n    }\n  },\n\n  async create(payload: CreateVentaData): Promise<Venta> {\n    if (!payload.items || payload.items.length === 0) {\n      throw new ApiError(\"La venta debe tener al menos un producto\", 400)\n    }\n\n    // Usar batch para actualizar stock de m√∫ltiples productos at√≥micamente\n    const batch = writeBatch(db)\n\n    try {\n      // 1. Crear la venta\n      const ventaRef = doc(ventasCollection)\n      batch.set(ventaRef, {\n        ...payload,\n        total: Number(payload.total),\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp(),\n      })\n\n      // 2. Actualizar el stock de cada producto\n      for (const item of payload.items) {\n        const productoRef = doc(db, \"productos\", item.producto_id)\n        const productoSnap = await getDoc(productoRef)\n        \n        if (!productoSnap.exists()) {\n          throw new ApiError(`Producto ${item.producto_nombre} no encontrado`, 404)\n        }\n\n        const productoData = productoSnap.data()\n        const nuevoStock = Number(productoData.stock || 0) - item.cantidad\n\n        if (nuevoStock < 0) {\n          throw new ApiError(`Stock insuficiente para ${item.producto_nombre}`, 400)\n        }\n\n        batch.update(productoRef, {\n          stock: nuevoStock,\n          updatedAt: serverTimestamp(),\n        })\n      }\n\n      // 3. Ejecutar todas las operaciones\n      await batch.commit()\n\n      // 4. Obtener la venta creada\n      const ventaSnap = await getDoc(ventaRef)\n      const data = ventaSnap.data()!\n\n      return {\n        id: ventaSnap.id,\n        total: Number(data.total || 0),\n        fecha: data.fecha || new Date().toISOString(),\n        vendedor_email: data.vendedor_email || \"\",\n        estado: data.estado || \"completada\",\n        items: data.items || [],\n        createdAt: data.createdAt,\n        updatedAt: data.updatedAt,\n      }\n    } catch (error) {\n      console.error(\"Error en transacci√≥n de venta:\", error)\n      throw error instanceof ApiError ? error : new ApiError(\"Error al procesar la venta\", 500)\n    }\n  },\n\n  async anular(id: string): Promise<void> {\n    const ventaRef = doc(db, \"ventas\", id)\n    const ventaSnap = await getDoc(ventaRef)\n\n    if (!ventaSnap.exists()) {\n      throw new ApiError(\"Venta no encontrada\", 404)\n    }\n\n    const ventaData = ventaSnap.data()\n\n    if (ventaData.estado === \"anulada\") {\n      throw new ApiError(\"La venta ya est√° anulada\", 400)\n    }\n\n    // Usar batch para devolver el stock\n    const batch = writeBatch(db)\n\n    try {\n      // 1. Marcar venta como anulada\n      batch.update(ventaRef, {\n        estado: \"anulada\",\n        updatedAt: serverTimestamp(),\n      })\n\n      // 2. Devolver el stock de cada producto\n      for (const item of ventaData.items) {\n        const productoRef = doc(db, \"productos\", item.producto_id)\n        const productoSnap = await getDoc(productoRef)\n\n        if (productoSnap.exists()) {\n          const productoData = productoSnap.data()\n          const nuevoStock = Number(productoData.stock || 0) + item.cantidad\n\n          batch.update(productoRef, {\n            stock: nuevoStock,\n            updatedAt: serverTimestamp(),\n          })\n        }\n      }\n\n      await batch.commit()\n    } catch (error) {\n      console.error(\"Error al anular venta:\", error)\n      throw new ApiError(\"Error al anular la venta\", 500)\n    }\n  },\n\n  async delete(id: string): Promise<void> {\n    // Solo permitir eliminar ventas anuladas\n    const ventaRef = doc(db, \"ventas\", id)\n    const ventaSnap = await getDoc(ventaRef)\n\n    if (!ventaSnap.exists()) {\n      throw new ApiError(\"Venta no encontrada\", 404)\n    }\n\n    const ventaData = ventaSnap.data()\n\n    if (ventaData.estado !== \"anulada\") {\n      throw new ApiError(\"Solo se pueden eliminar ventas anuladas\", 400)\n    }\n\n    await deleteDoc(ventaRef)\n  }\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 884, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/crear-producto-form.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { Package, Plus } from \"lucide-react\"\nimport { productosApi, type CreateProductoData, ApiError } from \"@/lib/api\"\n\ninterface Props {\n  onProductoAgregado: () => void\n}\n\nconst CrearProductoForm: React.FC<Props> = ({ onProductoAgregado }) => {\n  const [form, setForm] = useState<CreateProductoData>({\n    codigo: \"\",\n    nombre: \"\",\n    descripcion: \"\",\n    precio: 0,\n    stock: 0,\n    categoria: \"\",\n    proveedor: \"\",\n  })\n  const [isLoading, setIsLoading] = useState(false)\n  const { toast } = useToast()\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target\n    setForm((prev) => ({\n      ...prev,\n      [name]: name === \"precio\" || name === \"stock\" ? Number(value) : value,\n    }))\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setIsLoading(true)\n\n    try {\n      await productosApi.create(form)\n\n      toast({\n        title: \"Producto creado\",\n        description: \"El producto se ha agregado exitosamente al inventario.\",\n      })\n\n      onProductoAgregado()\n      setForm({\n        codigo: \"\",\n        nombre: \"\",\n        descripcion: \"\",\n        precio: 0,\n        stock: 0,\n        categoria: \"\",\n        proveedor: \"\",\n      })\n    } catch (error) {\n      console.error(\"Error al crear producto:\", error)\n\n      let errorMessage = \"No se pudo crear el producto. Int√©ntalo de nuevo.\"\n\n      if (error instanceof ApiError) {\n        errorMessage = error.message\n      }\n\n      toast({\n        title: \"Error\",\n        description: errorMessage,\n        variant: \"destructive\",\n      })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <Card className=\"w-full max-w-2xl mx-auto\">\n      <CardHeader className=\"space-y-1\">\n        <div className=\"flex items-center space-x-2\">\n          <Package className=\"h-5 w-5 text-primary\" />\n          <CardTitle className=\"text-xl\">Nuevo Producto</CardTitle>\n        </div>\n        <CardDescription>Agrega un nuevo producto al inventario</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"codigo\">C√≥digo de Barras</Label>\n              <Input\n                id=\"codigo\"\n                name=\"codigo\"\n                placeholder=\"Ej: 123456789\"\n                value={form.codigo}\n                onChange={handleChange}\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"nombre\">Nombre del Producto</Label>\n              <Input\n                id=\"nombre\"\n                name=\"nombre\"\n                placeholder=\"Ej: Laptop Dell XPS\"\n                value={form.nombre}\n                onChange={handleChange}\n                required\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"descripcion\">Descripci√≥n</Label>\n            <Textarea\n              id=\"descripcion\"\n              name=\"descripcion\"\n              placeholder=\"Descripci√≥n detallada del producto...\"\n              value={form.descripcion}\n              onChange={handleChange}\n              rows={3}\n            />\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"precio\">Precio ($)</Label>\n              <Input\n                id=\"precio\"\n                name=\"precio\"\n                type=\"number\"\n                step=\"0.01\"\n                min=\"0\"\n                placeholder=\"0.00\"\n                value={form.precio || \"\"}\n                onChange={handleChange}\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"stock\">Stock</Label>\n              <Input\n                id=\"stock\"\n                name=\"stock\"\n                type=\"number\"\n                min=\"0\"\n                placeholder=\"0\"\n                value={form.stock || \"\"}\n                onChange={handleChange}\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"categoria\">Categor√≠a</Label>\n              <Input\n                id=\"categoria\"\n                name=\"categoria\"\n                placeholder=\"Ej: Electr√≥nicos\"\n                value={form.categoria}\n                onChange={handleChange}\n                required\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"proveedor\">Proveedor</Label>\n            <Input\n              id=\"proveedor\"\n              name=\"proveedor\"\n              placeholder=\"Nombre del proveedor\"\n              value={form.proveedor}\n              onChange={handleChange}\n              required\n            />\n          </div>\n\n          <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\n            {isLoading ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\" />\n                Creando...\n              </>\n            ) : (\n              <>\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Crear Producto\n              </>\n            )}\n          </Button>\n        </form>\n      </CardContent>\n    </Card>\n  )\n}\n\nexport default CrearProductoForm\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1305, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,6KAAoB;AAEnC,MAAM,gBAAgB,gLAAuB;AAE7C,MAAM,eAAe,+KAAsB;AAE3C,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,2JACA;QAED,GAAG,KAAK;;;;;;KAVP;AAaN,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,2KAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,gLAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,qHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,6LAAC,8KAAqB;wBAAC,WAAU;;0CAC/B,6LAAC,oMAAC;gCAAC,WAAU;;;;;;0CACb,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,2KAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,oLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 1464, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/actualizar-producto-form.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\nimport { Edit, Save, X } from \"lucide-react\"\nimport { productosApi, type Producto, type UpdateProductoData, ApiError } from \"@/lib/api\"\n\ninterface Props {\n  producto: Producto\n  onProductoActualizado: () => void\n  onClose: () => void\n}\n\nconst ActualizarProductoForm: React.FC<Props> = ({ producto, onProductoActualizado, onClose }) => {\n  const [form, setForm] = useState<UpdateProductoData>({\n    nombre: producto.nombre,\n    descripcion: producto.descripcion,\n    precio: producto.precio,\n    stock: producto.stock,\n    categoria: producto.categoria,\n    proveedor: producto.proveedor,\n  })\n  const [isLoading, setIsLoading] = useState(false)\n  const { toast } = useToast()\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target\n    setForm((prev) => ({\n      ...prev,\n      [name]: name === \"precio\" || name === \"stock\" ? Number(value) : value,\n    }))\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setIsLoading(true)\n\n    try {\n      await productosApi.update(producto.id, form)\n\n      toast({\n        title: \"Producto actualizado\",\n        description: \"Los cambios se han guardado exitosamente.\",\n      })\n\n      onProductoActualizado()\n    } catch (error) {\n      console.error(\"Error al actualizar producto:\", error)\n\n      let errorMessage = \"No se pudo actualizar el producto. Int√©ntalo de nuevo.\"\n\n      if (error instanceof ApiError) {\n        errorMessage = error.message\n      }\n\n      toast({\n        title: \"Error\",\n        description: errorMessage,\n        variant: \"destructive\",\n      })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <DialogHeader>\n        <div className=\"flex items-center space-x-2\">\n          <Edit className=\"h-5 w-5 text-primary\" />\n          <DialogTitle>Editar Producto</DialogTitle>\n        </div>\n      </DialogHeader>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"nombre\">Nombre del Producto</Label>\n            <Input id=\"nombre\" name=\"nombre\" value={form.nombre} onChange={handleChange} required />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"categoria\">Categor√≠a</Label>\n            <Input id=\"categoria\" name=\"categoria\" value={form.categoria} onChange={handleChange} required />\n          </div>\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"descripcion\">Descripci√≥n</Label>\n          <Textarea id=\"descripcion\" name=\"descripcion\" value={form.descripcion} onChange={handleChange} rows={3} />\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"precio\">Precio ($)</Label>\n            <Input\n              id=\"precio\"\n              name=\"precio\"\n              type=\"number\"\n              step=\"0.01\"\n              min=\"0\"\n              value={form.precio || \"\"}\n              onChange={handleChange}\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"stock\">Stock</Label>\n            <Input\n              id=\"stock\"\n              name=\"stock\"\n              type=\"number\"\n              min=\"0\"\n              value={form.stock || \"\"}\n              onChange={handleChange}\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"proveedor\">Proveedor</Label>\n            <Input id=\"proveedor\" name=\"proveedor\" value={form.proveedor} onChange={handleChange} required />\n          </div>\n        </div>\n\n        <div className=\"flex justify-end space-x-2 pt-4\">\n          <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n            <X className=\"h-4 w-4 mr-2\" />\n            Cancelar\n          </Button>\n          <Button type=\"submit\" disabled={isLoading}>\n            {isLoading ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\" />\n                Guardando...\n              </>\n            ) : (\n              <>\n                <Save className=\"h-4 w-4 mr-2\" />\n                Guardar Cambios\n              </>\n            )}\n          </Button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default ActualizarProductoForm\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1851, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/alert-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AAEA;AACA;AANA;;;;;;AAQA,MAAM,cAAc,sLAAyB;AAE7C,MAAM,qBAAqB,yLAA4B;AAEvD,MAAM,oBAAoB,wLAA2B;AAErD,MAAM,mCAAqB,2KAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,yLAA4B;QAC3B,WAAW,IAAA,qHAAE,EACX,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;KAVH;AAaN,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,2KAAgB,OAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,yLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,qHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,2KAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,uLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,uLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,2KAAgB,OAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,6LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,uBAAuB,WAAW,GAChC,6LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,2KAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,IAAA,gJAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,2KAAgB,QAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,IAAA,gJAAc,EAAC;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 2012, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/lib/helpers.ts"],"sourcesContent":["// lib/helpers.ts\n\n/**\n * Obtiene el estado visual del stock de un producto\n */\nexport const getStockStatus = (stock: number) => {\n  if (stock === 0) {\n    return { \n      color: \"destructive\" as const, \n      text: \"Sin Stock\",\n      icon: \"üö´\" \n    }\n  }\n  if (stock <= 5) {\n    return { \n      color: \"destructive\" as const, \n      text: \"Stock Cr√≠tico\",\n      icon: \"‚ö†Ô∏è\" \n    }\n  }\n  if (stock <= 15) {\n    return { \n      color: \"secondary\" as const, \n      text: \"Stock Medio\",\n      icon: \"üì¶\" \n    }\n  }\n  return { \n    color: \"default\" as const, \n    text: \"Stock Alto\",\n    icon: \"‚úÖ\" \n  }\n}\n\n/**\n * Formatea una fecha a formato chileno legible\n */\nexport const formatDate = (dateString: string | null | undefined): string => {\n  if (!dateString) return \"Nunca\"\n  \n  try {\n    const date = new Date(dateString)\n    if (isNaN(date.getTime())) return \"Fecha inv√°lida\"\n    \n    return new Intl.DateTimeFormat('es-CL', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    }).format(date)\n  } catch {\n    return \"Error al formatear\"\n  }\n}\n\n/**\n * Formatea un precio a formato CLP\n */\nexport const formatearPrecio = (precio: number): string => {\n  return new Intl.NumberFormat(\"es-CL\", {\n    style: \"currency\",\n    currency: \"CLP\",\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(precio)\n}\n\n/**\n * Valida formato de RUT chileno\n */\nexport const validarRUT = (rut: string): boolean => {\n  const rutLimpio = rut.replace(/[^0-9kK]/g, '')\n  if (rutLimpio.length < 2) return false\n  \n  const cuerpo = rutLimpio.slice(0, -1)\n  const dv = rutLimpio.slice(-1).toUpperCase()\n  \n  // Algoritmo m√≥dulo 11\n  let suma = 0\n  let multiplicador = 2\n  \n  for (let i = cuerpo.length - 1; i >= 0; i--) {\n    suma += parseInt(cuerpo[i]) * multiplicador\n    multiplicador = multiplicador === 7 ? 2 : multiplicador + 1\n  }\n  \n  const dvEsperado = 11 - (suma % 11)\n  const dvCalculado = dvEsperado === 11 ? '0' : dvEsperado === 10 ? 'K' : dvEsperado.toString()\n  \n  return dv === dvCalculado\n}\n\n/**\n * Formatea un RUT con puntos y gui√≥n\n */\nexport const formatRUT = (rut: string): string => {\n  const cleaned = rut.replace(/[^0-9kK]/g, \"\")\n  if (cleaned.length <= 1) return cleaned\n  \n  const number = cleaned.slice(0, -1)\n  const dv = cleaned.slice(-1).toUpperCase()\n  const formattedNumber = number.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")\n  \n  return `${formattedNumber}-${dv}`\n}\n\n/**\n * Valida formato de email\n */\nexport const validarEmail = (email: string): boolean => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n  return emailRegex.test(email)\n}\n\n/**\n * Trunca un texto a un n√∫mero m√°ximo de caracteres\n */\nexport const truncateText = (text: string, maxLength: number): string => {\n  if (text.length <= maxLength) return text\n  return text.slice(0, maxLength) + '...'\n}"],"names":[],"mappings":"AAAA,iBAAiB;AAEjB;;CAEC;;;;;;;;;;;;;;;;AACM,MAAM,iBAAiB,CAAC;IAC7B,IAAI,UAAU,GAAG;QACf,OAAO;YACL,OAAO;YACP,MAAM;YACN,MAAM;QACR;IACF;IACA,IAAI,SAAS,GAAG;QACd,OAAO;YACL,OAAO;YACP,MAAM;YACN,MAAM;QACR;IACF;IACA,IAAI,SAAS,IAAI;QACf,OAAO;YACL,OAAO;YACP,MAAM;YACN,MAAM;QACR;IACF;IACA,OAAO;QACL,OAAO;QACP,MAAM;QACN,MAAM;IACR;AACF;AAKO,MAAM,aAAa,CAAC;IACzB,IAAI,CAAC,YAAY,OAAO;IAExB,IAAI;QACF,MAAM,OAAO,IAAI,KAAK;QACtB,IAAI,MAAM,KAAK,OAAO,KAAK,OAAO;QAElC,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;YACtC,MAAM;YACN,OAAO;YACP,KAAK;YACL,MAAM;YACN,QAAQ;QACV,GAAG,MAAM,CAAC;IACZ,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAKO,MAAM,kBAAkB,CAAC;IAC9B,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;QACvB,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAKO,MAAM,aAAa,CAAC;IACzB,MAAM,YAAY,IAAI,OAAO,CAAC,aAAa;IAC3C,IAAI,UAAU,MAAM,GAAG,GAAG,OAAO;IAEjC,MAAM,SAAS,UAAU,KAAK,CAAC,GAAG,CAAC;IACnC,MAAM,KAAK,UAAU,KAAK,CAAC,CAAC,GAAG,WAAW;IAE1C,sBAAsB;IACtB,IAAI,OAAO;IACX,IAAI,gBAAgB;IAEpB,IAAK,IAAI,IAAI,OAAO,MAAM,GAAG,GAAG,KAAK,GAAG,IAAK;QAC3C,QAAQ,SAAS,MAAM,CAAC,EAAE,IAAI;QAC9B,gBAAgB,kBAAkB,IAAI,IAAI,gBAAgB;IAC5D;IAEA,MAAM,aAAa,KAAM,OAAO;IAChC,MAAM,cAAc,eAAe,KAAK,MAAM,eAAe,KAAK,MAAM,WAAW,QAAQ;IAE3F,OAAO,OAAO;AAChB;AAKO,MAAM,YAAY,CAAC;IACxB,MAAM,UAAU,IAAI,OAAO,CAAC,aAAa;IACzC,IAAI,QAAQ,MAAM,IAAI,GAAG,OAAO;IAEhC,MAAM,SAAS,QAAQ,KAAK,CAAC,GAAG,CAAC;IACjC,MAAM,KAAK,QAAQ,KAAK,CAAC,CAAC,GAAG,WAAW;IACxC,MAAM,kBAAkB,OAAO,OAAO,CAAC,yBAAyB;IAEhE,OAAO,GAAG,gBAAgB,CAAC,EAAE,IAAI;AACnC;AAKO,MAAM,eAAe,CAAC;IAC3B,MAAM,aAAa;IACnB,OAAO,WAAW,IAAI,CAAC;AACzB;AAKO,MAAM,eAAe,CAAC,MAAc;IACzC,IAAI,KAAK,MAAM,IAAI,WAAW,OAAO;IACrC,OAAO,KAAK,KAAK,CAAC,GAAG,aAAa;AACpC"}},
    {"offset": {"line": 2122, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/hooks/use-debounce.ts"],"sourcesContent":["// hooks/use-debounce.ts\nimport { useState, useEffect } from 'react'\n\n/**\n * Hook para debounce de valores\n * √ötil para b√∫squedas en tiempo real\n * \n * @example\n * const debouncedSearch = useDebounce(searchTerm, 300)\n * \n * useEffect(() => {\n *   fetchResults(debouncedSearch)\n * }, [debouncedSearch])\n */\nexport function useDebounce<T>(value: T, delay: number): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value)\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value)\n    }, delay)\n\n    return () => {\n      clearTimeout(handler)\n    }\n  }, [value, delay])\n\n  return debouncedValue\n}"],"names":[],"mappings":"AAAA,wBAAwB;;;;;AACxB;;;AAaO,SAAS,YAAe,KAAQ,EAAE,KAAa;;IACpD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAI;IAExD,IAAA,0KAAS;iCAAC;YACR,MAAM,UAAU;iDAAW;oBACzB,kBAAkB;gBACpB;gDAAG;YAEH;yCAAO;oBACL,aAAa;gBACf;;QACF;gCAAG;QAAC;QAAO;KAAM;IAEjB,OAAO;AACT;GAdgB"}},
    {"offset": {"line": 2160, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/inventario-list.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useEffect, useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { Search, Edit, Trash2, Package, DollarSign, Hash, Building, Tag, AlertCircle } from \"lucide-react\"\nimport ActualizarProductoForm from \"./actualizar-producto-form\"\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\nimport { productosApi, type Producto, ApiError } from \"@/lib/api\"\nimport { getStockStatus, formatearPrecio } from \"@/lib/helpers\"\nimport { useDebounce } from \"@/hooks/use-debounce\"\n\ninterface Props {\n  reload: boolean\n}\n\nconst InventarioList: React.FC<Props> = ({ reload }) => {\n  const [productos, setProductos] = useState<Producto[]>([])\n  const [busqueda, setBusqueda] = useState(\"\")\n  const [productoEditar, setProductoEditar] = useState<Producto | null>(null)\n  const [productoEliminar, setProductoEliminar] = useState<string | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const { toast } = useToast()\n\n  // Implementar debounce para b√∫squeda\n  const debouncedBusqueda = useDebounce(busqueda, 300)\n\n  const fetchProductos = async (searchTerm?: string) => {\n    setIsLoading(true)\n    setError(null)\n\n    try {\n      const data = await productosApi.getAll(searchTerm)\n      setProductos(data)\n    } catch (error) {\n      console.error(\"Error al cargar productos:\", error)\n\n      let errorMessage = \"No se pudieron cargar los productos.\"\n\n      if (error instanceof ApiError) {\n        errorMessage = error.message\n      }\n\n      setError(errorMessage)\n      toast({\n        title: \"Error\",\n        description: errorMessage,\n        variant: \"destructive\",\n      })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchProductos()\n  }, [reload])\n\n  useEffect(() => {\n    if (debouncedBusqueda.trim()) {\n      fetchProductos(debouncedBusqueda)\n    } else {\n      fetchProductos()\n    }\n  }, [debouncedBusqueda])\n\n  const handleEliminar = async () => {\n    if (productoEliminar !== null) {\n      try {\n        await productosApi.delete(productoEliminar)\n\n        setProductos(productos.filter((p) => p.id !== productoEliminar))\n        toast({\n          title: \"Producto eliminado\",\n          description: \"El producto se ha eliminado exitosamente.\",\n        })\n      } catch (error) {\n        console.error(\"Error al eliminar producto:\", error)\n\n        let errorMessage = \"No se pudo eliminar el producto.\"\n\n        if (error instanceof ApiError) {\n          errorMessage = error.message\n        }\n\n        toast({\n          title: \"Error\",\n          description: errorMessage,\n          variant: \"destructive\",\n        })\n      } finally {\n        setProductoEliminar(null)\n      }\n    }\n  }\n\n  if (isLoading) {\n    return (\n      <Card className=\"w-full\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-center h-32\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\" />\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  if (error) {\n    return (\n      <Card className=\"w-full\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex flex-col items-center justify-center h-32 space-y-4\">\n            <AlertCircle className=\"h-12 w-12 text-destructive\" />\n            <div className=\"text-center\">\n              <p className=\"text-lg font-semibold\">Error al cargar productos</p>\n              <p className=\"text-muted-foreground\">{error}</p>\n            </div>\n            <Button onClick={() => fetchProductos()} variant=\"outline\">\n              Reintentar\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <Package className=\"h-5 w-5 text-primary\" />\n              <CardTitle>Inventario de Productos</CardTitle>\n            </div>\n            <Badge variant=\"outline\" className=\"text-sm\">\n              {productos.length} productos\n            </Badge>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"relative mb-6\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4\" />\n            <Input\n              placeholder=\"Buscar por nombre, c√≥digo o categor√≠a...\"\n              value={busqueda}\n              onChange={(e) => setBusqueda(e.target.value)}\n              className=\"pl-10\"\n            />\n          </div>\n\n          <div className=\"grid gap-4\">\n            {productos.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                <Package className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                <p>No se encontraron productos</p>\n              </div>\n            ) : (\n              productos.map((producto) => {\n                const stockStatus = getStockStatus(producto.stock)\n                \n                return (\n                  <Card key={producto.id} className=\"hover:shadow-md transition-shadow\">\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1 space-y-2\">\n                          <div className=\"flex items-center space-x-2\">\n                            <h3 className=\"font-semibold text-lg\">{producto.nombre}</h3>\n                            <Badge variant={stockStatus.color}>\n                              {stockStatus.icon} {stockStatus.text}\n                            </Badge>\n                          </div>\n\n                          <p className=\"text-muted-foreground text-sm\">{producto.descripcion}</p>\n\n                          <div className=\"flex flex-wrap gap-4 text-sm text-muted-foreground\">\n                            <div className=\"flex items-center space-x-1\">\n                              <Hash className=\"h-3 w-3\" />\n                              <span>{producto.codigo}</span>\n                            </div>\n                            <div className=\"flex items-center space-x-1\">\n                              <DollarSign className=\"h-3 w-3\" />\n                              <span>{formatearPrecio(producto.precio)}</span>\n                            </div>\n                            <div className=\"flex items-center space-x-1\">\n                              <Package className=\"h-3 w-3\" />\n                              <span>{producto.stock} unidades</span>\n                            </div>\n                            <div className=\"flex items-center space-x-1\">\n                              <Tag className=\"h-3 w-3\" />\n                              <span>{producto.categoria}</span>\n                            </div>\n                            <div className=\"flex items-center space-x-1\">\n                              <Building className=\"h-3 w-3\" />\n                              <span>{producto.proveedor}</span>\n                            </div>\n                          </div>\n                        </div>\n\n                        <div className=\"flex space-x-2 ml-4\">\n                          <Button variant=\"outline\" size=\"sm\" onClick={() => setProductoEditar(producto)}>\n                            <Edit className=\"h-4 w-4\" />\n                          </Button>\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => setProductoEliminar(producto.id)}\n                            className=\"text-destructive hover:text-destructive\"\n                          >\n                            <Trash2 className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                )\n              })\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Modal de edici√≥n */}\n      <Dialog open={!!productoEditar} onOpenChange={() => setProductoEditar(null)}>\n        <DialogContent className=\"max-w-2xl\">\n          {productoEditar && (\n            <ActualizarProductoForm\n              producto={productoEditar}\n              onProductoActualizado={() => {\n                fetchProductos(busqueda)\n                setProductoEditar(null)\n              }}\n              onClose={() => setProductoEditar(null)}\n            />\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {/* Modal de confirmaci√≥n de eliminaci√≥n */}\n      <AlertDialog open={!!productoEliminar} onOpenChange={() => setProductoEliminar(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>¬øEliminar producto?</AlertDialogTitle>\n            <AlertDialogDescription>\n              Esta acci√≥n no se puede deshacer. El producto ser√° eliminado permanentemente del inventario.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancelar</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleEliminar}\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n            >\n              Eliminar\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  )\n}\n\nexport default InventarioList"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2852, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/app/dashboard/inventario/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { useAuth } from \"@/lib/auth-context\"\nimport { Button } from \"@/components/ui/button\"\nimport { ArrowLeft, Plus, Package } from \"lucide-react\"\nimport DashboardHeader from \"@/components/dashboard-header\" // ‚úÖ Usamos el header est√°ndar\nimport CrearProductoForm from \"@/components/crear-producto-form\"\nimport InventarioList from \"@/components/inventario-list\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nexport default function InventarioPage() {\n  const { isAuthenticated, isLoading, hasRole } = useAuth()\n  const router = useRouter()\n  const [mostrarCrearForm, setMostrarCrearForm] = useState(false)\n  const [reloadList, setReloadList] = useState(false)\n\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      router.push(\"/login\")\n    }\n  }, [isAuthenticated, isLoading, router])\n\n  // Protecci√≥n de ruta: Solo admin o roles autorizados deber√≠an ver esto\n  // (Opcional: Si quieres que todos vean inventario, quita este bloque)\n  useEffect(() => {\n    if (!isLoading && isAuthenticated && !hasRole(\"admin\")) {\n       // Si es trabajador y no tiene permiso, lo devolvemos (ajusta seg√∫n tu l√≥gica)\n       // router.push(\"/dashboard\") \n    }\n  }, [isLoading, isAuthenticated, hasRole, router])\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900\" />\n      </div>\n    )\n  }\n\n  if (!isAuthenticated) {\n    return null\n  }\n\n  const handleProductoAgregado = () => {\n    setReloadList(!reloadList)\n    setMostrarCrearForm(false)\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* 1. Header Global */}\n      <DashboardHeader />\n\n      <main className=\"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 space-y-6\">\n        {/* 2. Barra de herramientas superior */}\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n          <div className=\"flex items-center gap-4\">\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              onClick={() => router.push(\"/dashboard\")}\n              className=\"h-10 w-10\"\n              title=\"Volver al Dashboard\"\n            >\n              <ArrowLeft className=\"h-4 w-4\" />\n            </Button>\n            \n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900 flex items-center gap-2\">\n                <Package className=\"h-6 w-6\" />\n                Gesti√≥n de Inventario\n              </h1>\n              <p className=\"text-sm text-gray-500\">\n                Administra tus productos, stock y precios.\n              </p>\n            </div>\n          </div>\n\n          <Button onClick={() => setMostrarCrearForm(true)}>\n            <Plus className=\"h-4 w-4 mr-2\" />\n            Nuevo Producto\n          </Button>\n        </div>\n\n        {/* 3. Lista de Productos (Ya conectada a Firebase) */}\n        <InventarioList reload={reloadList} />\n      </main>\n\n      {/* 4. Modal para crear producto */}\n      <Dialog open={mostrarCrearForm} onOpenChange={setMostrarCrearForm}>\n        <DialogContent className=\"max-w-2xl\">\n          {/* El t√≠tulo ya est√° dentro del componente CrearProductoForm en tu c√≥digo original, \n              pero si lo necesitas fuera, puedes descomentar esto:\n          <DialogHeader>\n            <DialogTitle>Crear Nuevo Producto</DialogTitle>\n          </DialogHeader> \n          */}\n          <CrearProductoForm onProductoAgregado={handleProductoAgregado} />\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA,4OAA4D,8BAA8B;AAC1F;AACA;AACA;;;AAVA;;;;;;;;;;AAYe,SAAS;;IACtB,MAAM,EAAE,eAAe,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,IAAA,0IAAO;IACvD,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAC;IACzD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,IAAA,0KAAS;oCAAC;YACR,IAAI,CAAC,aAAa,CAAC,iBAAiB;gBAClC,OAAO,IAAI,CAAC;YACd;QACF;mCAAG;QAAC;QAAiB;QAAW;KAAO;IAEvC,uEAAuE;IACvE,sEAAsE;IACtE,IAAA,0KAAS;oCAAC;YACR,IAAI,CAAC,aAAa,mBAAmB,CAAC,QAAQ,UAAU;YACrD,8EAA8E;YAC9E,6BAA6B;YAChC;QACF;mCAAG;QAAC;QAAW;QAAiB;QAAS;KAAO;IAEhD,IAAI,WAAW;QACb,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,IAAI,CAAC,iBAAiB;QACpB,OAAO;IACT;IAEA,MAAM,yBAAyB;QAC7B,cAAc,CAAC;QACf,oBAAoB;IACtB;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC,gJAAe;;;;;0BAEhB,6LAAC;gBAAK,WAAU;;kCAEd,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,wIAAM;wCACL,SAAQ;wCACR,MAAK;wCACL,SAAS,IAAM,OAAO,IAAI,CAAC;wCAC3B,WAAU;wCACV,OAAM;kDAEN,cAAA,6LAAC,gOAAS;4CAAC,WAAU;;;;;;;;;;;kDAGvB,6LAAC;;0DACC,6LAAC;gDAAG,WAAU;;kEACZ,6LAAC,sNAAO;wDAAC,WAAU;;;;;;oDAAY;;;;;;;0DAGjC,6LAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;0CAMzC,6LAAC,wIAAM;gCAAC,SAAS,IAAM,oBAAoB;;kDACzC,6LAAC,6MAAI;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;kCAMrC,6LAAC,+IAAc;wBAAC,QAAQ;;;;;;;;;;;;0BAI1B,6LAAC,wIAAM;gBAAC,MAAM;gBAAkB,cAAc;0BAC5C,cAAA,6LAAC,+IAAa;oBAAC,WAAU;8BAOvB,cAAA,6LAAC,sJAAiB;wBAAC,oBAAoB;;;;;;;;;;;;;;;;;;;;;;AAKjD;GA5FwB;;QAC0B,0IAAO;QACxC,kJAAS;;;KAFF"}}]
}