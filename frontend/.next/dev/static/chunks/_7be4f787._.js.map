{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/lib/auth-context.tsx"],"sourcesContent":["// This file is deprecated - use @/contexts/auth-context instead\nexport { useAuth, AuthProvider } from \"@/contexts/auth-context\"\nexport type { Usuario } from \"@/contexts/auth-context\"\n"],"names":[],"mappings":"AAAA,gEAAgE;;AAChE"}},
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,2KAAgB,MAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS"}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/dashboard-header.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Store, Shield, User, LogOut } from \"lucide-react\"\nimport { useAuth } from \"@/lib/auth-context\"\n//import NotificacionesPanel from \"./notificaciones-panel\"\n\nconst DashboardHeader: React.FC = () => {\n  const { usuario, logout } = useAuth()\n\nconsole.log(\"üîç Usuario actual:\", {\n  id: usuario?.id,\n  email: usuario?.email,\n  nombre: usuario?.nombre,\n  rol: usuario?.rol,\n  tipo: typeof usuario?.rol\n})\n\n  if (!usuario) return null\n\n  return (\n    <header className=\"bg-white shadow-sm border-b sticky top-0 z-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center h-16\">\n          {/* Logo y t√≠tulo */}\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"bg-gray-900 rounded-lg p-2\">\n              <Store className=\"h-6 w-6 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-xl font-bold text-gray-900\">GestiCom Dashboard</h1>\n            </div>\n          </div>\n\n          {/* Usuario y acciones */}\n          <div className=\"flex items-center space-x-4\">\n            {/* Notificaciones */}\n\n            {/* Info del usuario */}\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"text-right\">\n                <p className=\"text-sm font-medium text-gray-900\">{usuario.nombre}</p>\n                <div className=\"flex items-center justify-end space-x-1\">\n                  {usuario.rol === \"admin\" ? (\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      <Shield className=\"h-3 w-3 mr-1\" />\n                      Administrador\n                    </Badge>\n                  ) : (\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      <User className=\"h-3 w-3 mr-1\" />\n                      Trabajador\n                    </Badge>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Bot√≥n de logout */}\n            <Button variant=\"outline\" size=\"sm\" onClick={logout}>\n              <LogOut className=\"h-4 w-4 mr-2\" />\n              Cerrar Sesi√≥n\n            </Button>\n          </div>\n        </div>\n      </div>\n    </header>\n  )\n}\n\nexport default DashboardHeader\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;;;AANA;;;;;AAOA,0DAA0D;AAE1D,MAAM,kBAA4B;;IAChC,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,0IAAO;IAErC,QAAQ,GAAG,CAAC,sBAAsB;QAChC,IAAI,SAAS;QACb,OAAO,SAAS;QAChB,QAAQ,SAAS;QACjB,KAAK,SAAS;QACd,MAAM,OAAO,SAAS;IACxB;IAEE,IAAI,CAAC,SAAS,OAAO;IAErB,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,gNAAK;oCAAC,WAAU;;;;;;;;;;;0CAEnB,6LAAC;0CACC,cAAA,6LAAC;oCAAG,WAAU;8CAAkC;;;;;;;;;;;;;;;;;kCAKpD,6LAAC;wBAAI,WAAU;;0CAIb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAE,WAAU;sDAAqC,QAAQ,MAAM;;;;;;sDAChE,6LAAC;4CAAI,WAAU;sDACZ,QAAQ,GAAG,KAAK,wBACf,6LAAC,sIAAK;gDAAC,SAAQ;gDAAY,WAAU;;kEACnC,6LAAC,mNAAM;wDAAC,WAAU;;;;;;oDAAiB;;;;;;yGAIrC,6LAAC,sIAAK;gDAAC,SAAQ;gDAAY,WAAU;;kEACnC,6LAAC,6MAAI;wDAAC,WAAU;;;;;;oDAAiB;;;;;;;;;;;;;;;;;;;;;;;0CAS3C,6LAAC,wIAAM;gCAAC,SAAQ;gCAAU,MAAK;gCAAK,SAAS;;kDAC3C,6LAAC,uNAAM;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQjD;GA7DM;;QACwB,0IAAO;;;KAD/B;uCA+DS"}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 440, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,2KAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,IAAA,qHAAE,EACX,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 475, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/alert-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AAEA;AACA;AANA;;;;;;AAQA,MAAM,cAAc,sLAAyB;AAE7C,MAAM,qBAAqB,yLAA4B;AAEvD,MAAM,oBAAoB,wLAA2B;AAErD,MAAM,mCAAqB,2KAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,yLAA4B;QAC3B,WAAW,IAAA,qHAAE,EACX,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;KAVH;AAaN,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,2KAAgB,OAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,yLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,qHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,2KAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,uLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,uLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,2KAAgB,OAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,6LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,uBAAuB,WAAW,GAChC,6LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,2KAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,IAAA,gJAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,2KAAgB,QAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,IAAA,gJAAc,EAAC;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 636, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,6KAAoB;AAEnC,MAAM,gBAAgB,gLAAuB;AAE7C,MAAM,eAAe,+KAAsB;AAE3C,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,2JACA;QAED,GAAG,KAAK;;;;;;KAVP;AAaN,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,2KAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,gLAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,qHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,6LAAC,8KAAqB;wBAAC,WAAU;;0CAC/B,6LAAC,oMAAC;gCAAC,WAAU;;;;;;0CACb,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,2KAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,oLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 795, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,6KAAoB;AAEnC,MAAM,cAAc,8KAAqB;AAEzC,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,MAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,mTACA;QAED,GAAG,KAAK;;YAER;0BACD,6LAAC,6KAAoB;gBAAC,OAAO;0BAC3B,cAAA,6LAAC,sOAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,2KAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,uLAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,gOAAS;YAAC,WAAU;;;;;;;;;;;MAZnB;AAeN,qBAAqB,WAAW,GAAG,uLAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,2KAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,yLAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,sOAAW;YAAC,WAAU;;;;;;;;;;;MAZrB;AAeN,uBAAuB,WAAW,GAChC,yLAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,2KAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,6LAAC,+KAAsB;kBACrB,cAAA,6LAAC,gLAAuB;YACtB,KAAK;YACL,WAAW,IAAA,qHAAE,EACX,ucACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,6LAAC;;;;;8BACD,6LAAC,iLAAwB;oBACvB,WAAW,IAAA,qHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,6LAAC;;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,0CAA0C;QACvD,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,6KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC,sLAA6B;8BAC5B,cAAA,6LAAC,gNAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,6LAAC,iLAAwB;0BAAE;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,6KAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,2KAAgB,QAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,kLAAyB;QACxB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG,kLAAyB,CAAC,WAAW"}},
    {"offset": {"line": 1018, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/lib/api.ts"],"sourcesContent":["// lib/api.ts\nimport { addDoc, collection, deleteDoc, doc, getDoc, getDocs, serverTimestamp, updateDoc, writeBatch,  setDoc   } from \"firebase/firestore\"\nimport { db } from \"@/lib/firebase\"\n\n// ---------------------- Tipos comunes y Errores ----------------------\n\nexport class ApiError extends Error {\n  status?: number\n  constructor(message: string, status?: number) {\n    super(message)\n    this.name = \"ApiError\"\n    this.status = status\n  }\n}\n\n// ---------------------- Interfaces de Productos ----------------------\n\nexport interface Producto {\n  id: string\n  codigo: string\n  nombre: string\n  descripcion?: string\n  precio: number\n  stock: number\n  categoria?: string\n  proveedor?: string\n  createdAt?: any\n  updatedAt?: any\n}\n\nexport type CreateProductoData = Omit<Producto, \"id\" | \"createdAt\" | \"updatedAt\">\nexport type UpdateProductoData = Partial<CreateProductoData>\n\n// ---------------------- Interfaces de Usuarios ----------------------\n\nexport interface UsuarioApi {\n  id: string\n  nombre: string\n  email: string\n  rut?: string\n  rol?: string\n  activo?: boolean\n  fecha_creacion?: string\n  ultimo_acceso?: string | null\n  creado_por_nombre?: string | null\n}\n\n// ---------------------- Interfaces de Ventas ----------------------\n\nexport interface VentaItem {\n  producto_id: string\n  producto_nombre: string\n  cantidad: number\n  precio_unitario: number\n  subtotal: number\n}\n\nexport interface Venta {\n  id: string\n  total: number\n  fecha: string\n  vendedor_email: string\n  estado: \"completada\" | \"anulada\"\n  items: VentaItem[]\n  createdAt?: any\n  updatedAt?: any\n}\n\nexport type CreateVentaData = Omit<Venta, \"id\" | \"createdAt\" | \"updatedAt\">\n\n// ---------------------- Colecciones ----------------------\n\nconst productosCollection = collection(db, \"productos\")\nconst usuariosCollection = collection(db, \"usuarios\")\nconst ventasCollection = collection(db, \"ventas\")\n\n// ---------------------- API: Productos ----------------------\n\nexport const productosApi = {\n  async getAll(search?: string): Promise<Producto[]> {\n    const snapshot = await getDocs(productosCollection)\n    let productos: Producto[] = []\n\n    snapshot.forEach((docSnap) => {\n      const data = docSnap.data() as any\n      productos.push({\n        id: docSnap.id,\n        codigo: data.codigo || \"\",\n        nombre: data.nombre || \"\",\n        descripcion: data.descripcion || \"\",\n        precio: Number(data.precio || 0),\n        stock: Number(data.stock || 0),\n        categoria: data.categoria || \"\",\n        proveedor: data.proveedor || \"\",\n        createdAt: data.createdAt,\n        updatedAt: data.updatedAt,\n      })\n    })\n\n    if (search && search.trim()) {\n      const s = search.toLowerCase()\n      productos = productos.filter((p) => p.nombre.toLowerCase().includes(s) || p.codigo.toLowerCase().includes(s))\n    }\n\n    productos.sort((a, b) => a.nombre.localeCompare(b.nombre))\n\n    return productos\n  },\n\n  async getById(id: string): Promise<Producto | null> {\n    const ref = doc(db, \"productos\", id)\n    const snap = await getDoc(ref)\n    if (!snap.exists()) return null\n    const data = snap.data() as any\n    return {\n      id: snap.id,\n      codigo: data.codigo || \"\",\n      nombre: data.nombre || \"\",\n      descripcion: data.descripcion || \"\",\n      precio: Number(data.precio || 0),\n      stock: Number(data.stock || 0),\n      categoria: data.categoria || \"\",\n      proveedor: data.proveedor || \"\",\n      createdAt: data.createdAt,\n      updatedAt: data.updatedAt,\n    }\n  },\n\n  async create(payload: CreateProductoData): Promise<Producto> {\n    if (!payload.nombre || !payload.codigo) {\n      throw new ApiError(\"Nombre y c√≥digo son obligatorios\", 400)\n    }\n\n    const docRef = await addDoc(productosCollection, {\n      ...payload,\n      precio: Number(payload.precio || 0),\n      stock: Number(payload.stock || 0),\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp(),\n    })\n\n    const snap = await getDoc(docRef)\n    const data = snap.data() as any\n\n    return {\n      id: snap.id,\n      codigo: data.codigo || \"\",\n      nombre: data.nombre || \"\",\n      descripcion: data.descripcion || \"\",\n      precio: Number(data.precio || 0),\n      stock: Number(data.stock || 0),\n      categoria: data.categoria || \"\",\n      proveedor: data.proveedor || \"\",\n      createdAt: data.createdAt,\n      updatedAt: data.updatedAt,\n    }\n  },\n\n  async update(id: string, data: UpdateProductoData): Promise<void> {\n    const ref = doc(db, \"productos\", id)\n    const { id: _ignored, ...rest } = data as any\n\n    await updateDoc(ref, {\n      ...rest,\n      ...(rest.precio !== undefined ? { precio: Number(rest.precio) } : {}),\n      ...(rest.stock !== undefined ? { stock: Number(rest.stock) } : {}),\n      updatedAt: serverTimestamp(),\n    })\n  },\n\n  async delete(id: string): Promise<void> {\n    const ref = doc(db, \"productos\", id)\n    await deleteDoc(ref)\n  },\n}\n\n// ---------------------- API: Usuarios ----------------------\n\nexport const usuariosApi = {\n  async getAll(search?: string, rol?: string, activo?: string): Promise<UsuarioApi[]> {\n    const snapshot = await getDocs(usuariosCollection)\n    let usuarios: UsuarioApi[] = []\n\n    snapshot.forEach((docSnap) => {\n      const data = docSnap.data()\n      usuarios.push({\n        id: docSnap.id,\n        nombre: data.nombre || \"\",\n        email: data.email || \"\",\n        rut: data.rut || \"\",\n        rol: data.rol || \"trabajador\",\n        activo: data.activo ?? true,\n        fecha_creacion: data.createdAt?.toDate ? data.createdAt.toDate().toISOString() : new Date().toISOString(),\n        ultimo_acceso: data.lastLogin?.toDate ? data.lastLogin.toDate().toISOString() : null,\n        creado_por_nombre: data.creado_por_nombre || \"Sistema\"\n      })\n    })\n\n    if (search && search.trim()) {\n      const s = search.toLowerCase()\n      usuarios = usuarios.filter(u => \n        u.nombre.toLowerCase().includes(s) || \n        (u.rut && u.rut.toLowerCase().includes(s)) || \n        u.email.toLowerCase().includes(s)\n      )\n    }\n\n    if (rol && rol !== 'all') {\n      usuarios = usuarios.filter(u => u.rol === rol)\n    }\n\n    if (activo && activo !== 'all') {\n      const isActive = activo === 'true'\n      usuarios = usuarios.filter(u => u.activo === isActive)\n    }\n\n    return usuarios\n  },\n\nasync create(data: any): Promise<void> {\n  console.log(\"üìù usuariosApi.create() - Inicio\")\n  console.log(\"üì¶ Datos recibidos:\", data)\n\n  try {\n    // Extraemos uid si viene\n    const { uid, ...rest } = data\n\n    // Si trae uid, lo usamos como ID del documento.\n    // Si no trae uid, se crea doc con ID autom√°tico.\n    const ref = uid \n      ? doc(usuariosCollection, uid) \n      : doc(usuariosCollection)\n\n    console.log(\"üî• Guardando documento en Firestore... (setDoc)\")\n\n    await setDoc(ref, {\n      ...rest,\n      uid: uid || null,\n      activo: true,\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp(),\n    })\n\n    console.log(\"‚úÖ setDoc() exitoso - ID:\", uid || ref.id)\n\n  } catch (error) {\n    console.error(\"‚ùå Error en usuariosApi.create():\", error)\n    throw error\n  }\n},\n\n\n  async update(id: string, data: any): Promise<void> {\n    const ref = doc(db, \"usuarios\", id)\n    await updateDoc(ref, {\n      ...data,\n      updatedAt: serverTimestamp(),\n    })\n  },\n\n  async toggleStatus(id: string, currentStatus: boolean): Promise<void> {\n    const ref = doc(db, \"usuarios\", id)\n    await updateDoc(ref, {\n      activo: !currentStatus,\n      updatedAt: serverTimestamp(),\n    })\n  },\n\n  async delete(id: string): Promise<void> {\n    const ref = doc(db, \"usuarios\", id)\n    await deleteDoc(ref)\n  }\n}\n\n// ---------------------- API: Ventas ----------------------\n\nexport const ventasApi = {\n  async getAll(): Promise<Venta[]> {\n    const snapshot = await getDocs(ventasCollection)\n    const ventas: Venta[] = []\n\n    snapshot.forEach((docSnap) => {\n      const data = docSnap.data()\n      ventas.push({\n        id: docSnap.id,\n        total: Number(data.total || 0),\n        fecha: data.fecha || new Date().toISOString(),\n        vendedor_email: data.vendedor_email || \"\",\n        estado: data.estado || \"completada\",\n        items: data.items || [],\n        createdAt: data.createdAt,\n        updatedAt: data.updatedAt,\n      })\n    })\n\n    // Ordenar por fecha descendente (m√°s recientes primero)\n    ventas.sort((a, b) => new Date(b.fecha).getTime() - new Date(a.fecha).getTime())\n\n    return ventas\n  },\n\n  async getById(id: string): Promise<Venta | null> {\n    const ref = doc(db, \"ventas\", id)\n    const snap = await getDoc(ref)\n    if (!snap.exists()) return null\n    \n    const data = snap.data()\n    return {\n      id: snap.id,\n      total: Number(data.total || 0),\n      fecha: data.fecha || new Date().toISOString(),\n      vendedor_email: data.vendedor_email || \"\",\n      estado: data.estado || \"completada\",\n      items: data.items || [],\n      createdAt: data.createdAt,\n      updatedAt: data.updatedAt,\n    }\n  },\n\n  async create(payload: CreateVentaData): Promise<Venta> {\n    if (!payload.items || payload.items.length === 0) {\n      throw new ApiError(\"La venta debe tener al menos un producto\", 400)\n    }\n\n    // Usar batch para actualizar stock de m√∫ltiples productos at√≥micamente\n    const batch = writeBatch(db)\n\n    try {\n      // 1. Crear la venta\n      const ventaRef = doc(ventasCollection)\n      batch.set(ventaRef, {\n        ...payload,\n        total: Number(payload.total),\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp(),\n      })\n\n      // 2. Actualizar el stock de cada producto\n      for (const item of payload.items) {\n        const productoRef = doc(db, \"productos\", item.producto_id)\n        const productoSnap = await getDoc(productoRef)\n        \n        if (!productoSnap.exists()) {\n          throw new ApiError(`Producto ${item.producto_nombre} no encontrado`, 404)\n        }\n\n        const productoData = productoSnap.data()\n        const nuevoStock = Number(productoData.stock || 0) - item.cantidad\n\n        if (nuevoStock < 0) {\n          throw new ApiError(`Stock insuficiente para ${item.producto_nombre}`, 400)\n        }\n\n        batch.update(productoRef, {\n          stock: nuevoStock,\n          updatedAt: serverTimestamp(),\n        })\n      }\n\n      // 3. Ejecutar todas las operaciones\n      await batch.commit()\n\n      // 4. Obtener la venta creada\n      const ventaSnap = await getDoc(ventaRef)\n      const data = ventaSnap.data()!\n\n      return {\n        id: ventaSnap.id,\n        total: Number(data.total || 0),\n        fecha: data.fecha || new Date().toISOString(),\n        vendedor_email: data.vendedor_email || \"\",\n        estado: data.estado || \"completada\",\n        items: data.items || [],\n        createdAt: data.createdAt,\n        updatedAt: data.updatedAt,\n      }\n    } catch (error) {\n      console.error(\"Error en transacci√≥n de venta:\", error)\n      throw error instanceof ApiError ? error : new ApiError(\"Error al procesar la venta\", 500)\n    }\n  },\n\n  async anular(id: string): Promise<void> {\n    const ventaRef = doc(db, \"ventas\", id)\n    const ventaSnap = await getDoc(ventaRef)\n\n    if (!ventaSnap.exists()) {\n      throw new ApiError(\"Venta no encontrada\", 404)\n    }\n\n    const ventaData = ventaSnap.data()\n\n    if (ventaData.estado === \"anulada\") {\n      throw new ApiError(\"La venta ya est√° anulada\", 400)\n    }\n\n    // Usar batch para devolver el stock\n    const batch = writeBatch(db)\n\n    try {\n      // 1. Marcar venta como anulada\n      batch.update(ventaRef, {\n        estado: \"anulada\",\n        updatedAt: serverTimestamp(),\n      })\n\n      // 2. Devolver el stock de cada producto\n      for (const item of ventaData.items) {\n        const productoRef = doc(db, \"productos\", item.producto_id)\n        const productoSnap = await getDoc(productoRef)\n\n        if (productoSnap.exists()) {\n          const productoData = productoSnap.data()\n          const nuevoStock = Number(productoData.stock || 0) + item.cantidad\n\n          batch.update(productoRef, {\n            stock: nuevoStock,\n            updatedAt: serverTimestamp(),\n          })\n        }\n      }\n\n      await batch.commit()\n    } catch (error) {\n      console.error(\"Error al anular venta:\", error)\n      throw new ApiError(\"Error al anular la venta\", 500)\n    }\n  },\n\n  async delete(id: string): Promise<void> {\n    // Solo permitir eliminar ventas anuladas\n    const ventaRef = doc(db, \"ventas\", id)\n    const ventaSnap = await getDoc(ventaRef)\n\n    if (!ventaSnap.exists()) {\n      throw new ApiError(\"Venta no encontrada\", 404)\n    }\n\n    const ventaData = ventaSnap.data()\n\n    if (ventaData.estado !== \"anulada\") {\n      throw new ApiError(\"Solo se pueden eliminar ventas anuladas\", 400)\n    }\n\n    await deleteDoc(ventaRef)\n  }\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1355, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/lib/helpers.ts"],"sourcesContent":["// lib/helpers.ts\n\n/**\n * Obtiene el estado visual del stock de un producto\n */\nexport const getStockStatus = (stock: number) => {\n  if (stock === 0) {\n    return { \n      color: \"destructive\" as const, \n      text: \"Sin Stock\",\n      icon: \"üö´\" \n    }\n  }\n  if (stock <= 5) {\n    return { \n      color: \"destructive\" as const, \n      text: \"Stock Cr√≠tico\",\n      icon: \"‚ö†Ô∏è\" \n    }\n  }\n  if (stock <= 15) {\n    return { \n      color: \"secondary\" as const, \n      text: \"Stock Medio\",\n      icon: \"üì¶\" \n    }\n  }\n  return { \n    color: \"default\" as const, \n    text: \"Stock Alto\",\n    icon: \"‚úÖ\" \n  }\n}\n\n/**\n * Formatea una fecha a formato chileno legible\n */\nexport const formatDate = (dateString: string | null | undefined): string => {\n  if (!dateString) return \"Nunca\"\n  \n  try {\n    const date = new Date(dateString)\n    if (isNaN(date.getTime())) return \"Fecha inv√°lida\"\n    \n    return new Intl.DateTimeFormat('es-CL', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    }).format(date)\n  } catch {\n    return \"Error al formatear\"\n  }\n}\n\n/**\n * Formatea un precio a formato CLP\n */\nexport const formatearPrecio = (precio: number): string => {\n  return new Intl.NumberFormat(\"es-CL\", {\n    style: \"currency\",\n    currency: \"CLP\",\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(precio)\n}\n\n/**\n * Valida formato de RUT chileno\n */\nexport const validarRUT = (rut: string): boolean => {\n  const rutLimpio = rut.replace(/[^0-9kK]/g, '')\n  if (rutLimpio.length < 2) return false\n  \n  const cuerpo = rutLimpio.slice(0, -1)\n  const dv = rutLimpio.slice(-1).toUpperCase()\n  \n  // Algoritmo m√≥dulo 11\n  let suma = 0\n  let multiplicador = 2\n  \n  for (let i = cuerpo.length - 1; i >= 0; i--) {\n    suma += parseInt(cuerpo[i]) * multiplicador\n    multiplicador = multiplicador === 7 ? 2 : multiplicador + 1\n  }\n  \n  const dvEsperado = 11 - (suma % 11)\n  const dvCalculado = dvEsperado === 11 ? '0' : dvEsperado === 10 ? 'K' : dvEsperado.toString()\n  \n  return dv === dvCalculado\n}\n\n/**\n * Formatea un RUT con puntos y gui√≥n\n */\nexport const formatRUT = (rut: string): string => {\n  const cleaned = rut.replace(/[^0-9kK]/g, \"\")\n  if (cleaned.length <= 1) return cleaned\n  \n  const number = cleaned.slice(0, -1)\n  const dv = cleaned.slice(-1).toUpperCase()\n  const formattedNumber = number.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")\n  \n  return `${formattedNumber}-${dv}`\n}\n\n/**\n * Valida formato de email\n */\nexport const validarEmail = (email: string): boolean => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n  return emailRegex.test(email)\n}\n\n/**\n * Trunca un texto a un n√∫mero m√°ximo de caracteres\n */\nexport const truncateText = (text: string, maxLength: number): string => {\n  if (text.length <= maxLength) return text\n  return text.slice(0, maxLength) + '...'\n}"],"names":[],"mappings":"AAAA,iBAAiB;AAEjB;;CAEC;;;;;;;;;;;;;;;;AACM,MAAM,iBAAiB,CAAC;IAC7B,IAAI,UAAU,GAAG;QACf,OAAO;YACL,OAAO;YACP,MAAM;YACN,MAAM;QACR;IACF;IACA,IAAI,SAAS,GAAG;QACd,OAAO;YACL,OAAO;YACP,MAAM;YACN,MAAM;QACR;IACF;IACA,IAAI,SAAS,IAAI;QACf,OAAO;YACL,OAAO;YACP,MAAM;YACN,MAAM;QACR;IACF;IACA,OAAO;QACL,OAAO;QACP,MAAM;QACN,MAAM;IACR;AACF;AAKO,MAAM,aAAa,CAAC;IACzB,IAAI,CAAC,YAAY,OAAO;IAExB,IAAI;QACF,MAAM,OAAO,IAAI,KAAK;QACtB,IAAI,MAAM,KAAK,OAAO,KAAK,OAAO;QAElC,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;YACtC,MAAM;YACN,OAAO;YACP,KAAK;YACL,MAAM;YACN,QAAQ;QACV,GAAG,MAAM,CAAC;IACZ,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAKO,MAAM,kBAAkB,CAAC;IAC9B,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;QACvB,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAKO,MAAM,aAAa,CAAC;IACzB,MAAM,YAAY,IAAI,OAAO,CAAC,aAAa;IAC3C,IAAI,UAAU,MAAM,GAAG,GAAG,OAAO;IAEjC,MAAM,SAAS,UAAU,KAAK,CAAC,GAAG,CAAC;IACnC,MAAM,KAAK,UAAU,KAAK,CAAC,CAAC,GAAG,WAAW;IAE1C,sBAAsB;IACtB,IAAI,OAAO;IACX,IAAI,gBAAgB;IAEpB,IAAK,IAAI,IAAI,OAAO,MAAM,GAAG,GAAG,KAAK,GAAG,IAAK;QAC3C,QAAQ,SAAS,MAAM,CAAC,EAAE,IAAI;QAC9B,gBAAgB,kBAAkB,IAAI,IAAI,gBAAgB;IAC5D;IAEA,MAAM,aAAa,KAAM,OAAO;IAChC,MAAM,cAAc,eAAe,KAAK,MAAM,eAAe,KAAK,MAAM,WAAW,QAAQ;IAE3F,OAAO,OAAO;AAChB;AAKO,MAAM,YAAY,CAAC;IACxB,MAAM,UAAU,IAAI,OAAO,CAAC,aAAa;IACzC,IAAI,QAAQ,MAAM,IAAI,GAAG,OAAO;IAEhC,MAAM,SAAS,QAAQ,KAAK,CAAC,GAAG,CAAC;IACjC,MAAM,KAAK,QAAQ,KAAK,CAAC,CAAC,GAAG,WAAW;IACxC,MAAM,kBAAkB,OAAO,OAAO,CAAC,yBAAyB;IAEhE,OAAO,GAAG,gBAAgB,CAAC,EAAE,IAAI;AACnC;AAKO,MAAM,eAAe,CAAC;IAC3B,MAAM,aAAa;IACnB,OAAO,WAAW,IAAI,CAAC;AACzB;AAKO,MAAM,eAAe,CAAC,MAAc;IACzC,IAAI,KAAK,MAAM,IAAI,WAAW,OAAO;IACrC,OAAO,KAAK,KAAK,CAAC,GAAG,aAAa;AACpC"}},
    {"offset": {"line": 1465, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/hooks/use-debounce.ts"],"sourcesContent":["// hooks/use-debounce.ts\nimport { useState, useEffect } from 'react'\n\n/**\n * Hook para debounce de valores\n * √ötil para b√∫squedas en tiempo real\n * \n * @example\n * const debouncedSearch = useDebounce(searchTerm, 300)\n * \n * useEffect(() => {\n *   fetchResults(debouncedSearch)\n * }, [debouncedSearch])\n */\nexport function useDebounce<T>(value: T, delay: number): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value)\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value)\n    }, delay)\n\n    return () => {\n      clearTimeout(handler)\n    }\n  }, [value, delay])\n\n  return debouncedValue\n}"],"names":[],"mappings":"AAAA,wBAAwB;;;;;AACxB;;;AAaO,SAAS,YAAe,KAAQ,EAAE,KAAa;;IACpD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAI;IAExD,IAAA,0KAAS;iCAAC;YACR,MAAM,UAAU;iDAAW;oBACzB,kBAAkB;gBACpB;gDAAG;YAEH;yCAAO;oBACL,aAAa;gBACf;;QACF;gCAAG;QAAC;QAAO;KAAM;IAEjB,OAAO;AACT;GAdgB"}},
    {"offset": {"line": 1503, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,IAAA,0KAAG,EACvB;AAGF,MAAM,sBAAQ,2KAAgB,MAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,4KAAmB;QAClB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,4KAAmB,CAAC,WAAW"}},
    {"offset": {"line": 1541, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/crear-usuario-form.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\nimport { UserPlus, Save, X, Eye, EyeOff } from \"lucide-react\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n// Importamos API y clases\nimport { createUserWithEmailAndPassword } from \"firebase/auth\"\nimport { adminAuth } from \"@/lib/firebase\"\n\nimport { usuariosApi, ApiError } from \"@/lib/api\"\n\ninterface Props {\n  onUsuarioCreado: () => void\n  onClose: () => void\n}\n\ninterface FormData {\n  nombre: string\n  rut: string\n  email: string\n  password: string\n  confirmPassword: string\n  rol: \"admin\" | \"trabajador\" | \"\"\n}\n\nconst CrearUsuarioForm: React.FC<Props> = ({ onUsuarioCreado, onClose }) => {\n  const [form, setForm] = useState<FormData>({\n    nombre: \"\",\n    rut: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    rol: \"\",\n  })\n  const [showPassword, setShowPassword] = useState(false)\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false)\n  const [isLoading, setIsLoading] = useState(false)\n  const { toast } = useToast()\n\n  const handleChange = (field: keyof FormData, value: string) => {\n    setForm((prev) => ({ ...prev, [field]: value }))\n  }\n\n  const formatRUT = (rut: string) => {\n    const cleaned = rut.replace(/[^0-9kK]/g, \"\")\n    if (cleaned.length <= 1) return cleaned\n    const number = cleaned.slice(0, -1)\n    const dv = cleaned.slice(-1).toUpperCase()\n    const formattedNumber = number.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")\n    return `${formattedNumber}-${dv}`\n  }\n\n  const handleRUTChange = (value: string) => {\n    const formatted = formatRUT(value)\n    handleChange(\"rut\", formatted)\n  }\n\n  const validateForm = () => {\n    const errors: string[] = []\n\n    if (!form.nombre.trim()) errors.push(\"El nombre es requerido\")\n    if (!form.rut.trim()) errors.push(\"El RUT es requerido\")\n    if (!form.email.trim()) errors.push(\"El email es requerido\")\n    if (!form.password) errors.push(\"La contrase√±a es requerida\")\n    if (!form.confirmPassword) errors.push(\"Confirmar contrase√±a es requerido\")\n    if (!form.rol) errors.push(\"El rol es requerido\")\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n    if (form.email && !emailRegex.test(form.email)) {\n      errors.push(\"El formato del email es inv√°lido\")\n    }\n\n    const rutRegex = /^[0-9.]+-[0-9kK]$/\n    if (form.rut && !rutRegex.test(form.rut)) {\n      errors.push(\"El formato del RUT es inv√°lido\")\n    }\n\n    if (form.password.length < 6) { // Firebase pide min 6\n      errors.push(\"La contrase√±a debe tener al menos 6 caracteres\")\n    }\n\n    if (form.password !== form.confirmPassword) {\n      errors.push(\"Las contrase√±as no coinciden\")\n    }\n\n    return errors\n  }\nconst handleSubmit = async (e: React.FormEvent) => {\n  e.preventDefault()\n\n  const errors = validateForm()\n  if (errors.length > 0) {\n    toast({\n      title: \"Errores de validaci√≥n\",\n      description: errors.join(\", \"),\n      variant: \"destructive\",\n    })\n    return\n  }\n\n  setIsLoading(true)\n\n  try {\n    console.log(\"===== INICIANDO CREACI√ìN DE USUARIO =====\")\n\n    const email = form.email.trim()\n    const password = form.password\n    const nombre = form.nombre.trim()\n    const rutFormateado = formatRUT(form.rut.trim())\n    const rol = form.rol\n\n    // 1Ô∏è‚É£ Crear usuario en Firebase Auth usando el Auth secundario\n    console.log(\"1) Creando usuario en Firebase Auth...\")\n    const cred = await createUserWithEmailAndPassword(adminAuth, email, password)\n    const uid = cred.user.uid\n    console.log(\"‚úÖ Auth user creado:\", uid)\n\n    // 2Ô∏è‚É£ Guardar perfil en Firestore usando la API\n    console.log(\"2) Guardando perfil en Firestore...\")\n    await usuariosApi.create({\n      uid,\n      nombre,\n      rut: rutFormateado,\n      email,\n      rol,\n    })\n\n    // 3Ô∏è‚É£ Feedback y cierre\n    toast({\n      title: \"Usuario creado\",\n      description: \"El usuario se ha guardado en la base de datos y ya puede iniciar sesi√≥n.\",\n    })\n\n    // Limpiar formulario y cerrar\n    setForm({\n      nombre: \"\",\n      rut: \"\",\n      email: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n      rol: \"\",\n    })\n\n    onUsuarioCreado()\n    onClose()\n  } catch (error) {\n    console.error(\"Error al crear usuario:\", error)\n    let message = \"Error al crear usuario\"\n\n    if (error && typeof error === \"object\" && \"code\" in error) {\n      const code = (error as any).code as string\n      if (code === \"auth/email-already-in-use\") {\n        message = \"Ya existe una cuenta con este correo\"\n      } else if (code === \"auth/invalid-email\") {\n        message = \"El correo electr√≥nico no es v√°lido\"\n      } else if (code === \"auth/weak-password\") {\n        message = \"La contrase√±a es demasiado d√©bil\"\n      }\n    }\n\n    toast({\n      title: \"Error\",\n      description: message,\n      variant: \"destructive\",\n    })\n  } finally {\n    setIsLoading(false)\n  }\n}\n\n  return (\n    <div className=\"space-y-6\">\n      <DialogHeader>\n        <div className=\"flex items-center space-x-2\">\n          <UserPlus className=\"h-5 w-5 text-primary\" />\n          <DialogTitle>Crear Nuevo Usuario</DialogTitle>\n        </div>\n      </DialogHeader>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        {/* ... (El resto del formulario visual sigue igual, solo cambia la l√≥gica de arriba) ... */}\n        {/* Te lo dejo resumido, los inputs son los mismos que ten√≠as */}\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"nombre\">Nombre Completo</Label>\n            <Input\n              id=\"nombre\"\n              placeholder=\"Juan P√©rez\"\n              value={form.nombre}\n              onChange={(e) => handleChange(\"nombre\", e.target.value)}\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"rut\">RUT</Label>\n            <Input\n              id=\"rut\"\n              placeholder=\"12.345.678-9\"\n              value={form.rut}\n              onChange={(e) => handleRUTChange(e.target.value)}\n              required\n            />\n          </div>\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"email\">Correo Electr√≥nico</Label>\n          <Input\n            id=\"email\"\n            type=\"email\"\n            placeholder=\"usuario@gesticom.cl\"\n            value={form.email}\n            onChange={(e) => handleChange(\"email\", e.target.value)}\n            required\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"rol\">Rol</Label>\n          <Select value={form.rol} onValueChange={(value) => handleChange(\"rol\", value)}>\n            <SelectTrigger>\n              <SelectValue placeholder=\"Seleccionar rol\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"trabajador\">Trabajador</SelectItem>\n              <SelectItem value=\"admin\">Admin</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"password\">Contrase√±a</Label>\n            <div className=\"relative\">\n              <Input\n                id=\"password\"\n                type={showPassword ? \"text\" : \"password\"}\n                placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                value={form.password}\n                onChange={(e) => handleChange(\"password\", e.target.value)}\n                required\n              />\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\n                onClick={() => setShowPassword(!showPassword)}\n              >\n                {showPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n              </Button>\n            </div>\n            <p className=\"text-xs text-muted-foreground\">M√≠nimo 6 caracteres</p>\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"confirmPassword\">Confirmar Contrase√±a</Label>\n            <div className=\"relative\">\n              <Input\n                id=\"confirmPassword\"\n                type={showConfirmPassword ? \"text\" : \"password\"}\n                placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                value={form.confirmPassword}\n                onChange={(e) => handleChange(\"confirmPassword\", e.target.value)}\n                required\n              />\n              <Button\n                type=\"button\"\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\"\n                onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n              >\n                {showConfirmPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex justify-end space-x-2 pt-4\">\n          <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n            <X className=\"h-4 w-4 mr-2\" />\n            Cancelar\n          </Button>\n          <Button type=\"submit\" disabled={isLoading}>\n            {isLoading ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\" />\n                Creando...\n              </>\n            ) : (\n              <>\n                <Save className=\"h-4 w-4 mr-2\" />\n                Crear Usuario\n              </>\n            )}\n          </Button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default CrearUsuarioForm"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2127, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/editar-usuario-form.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\nimport { Edit, Save, X } from \"lucide-react\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { useAuth } from \"@/lib/auth-context\"\n// Importar API\nimport { usuariosApi, ApiError } from \"@/lib/api\"\n\n// INTERFAZ ACTUALIZADA (ID STRING)\ninterface Usuario {\n  id: string \n  nombre: string\n  rut: string\n  email: string\n  rol: \"admin\" | \"trabajador\"\n  activo: boolean\n}\n\ninterface Props {\n  usuario: Usuario\n  onUsuarioActualizado: () => void\n  onClose: () => void\n}\n\ninterface FormData {\n  nombre: string\n  email: string\n  rol: \"admin\" | \"trabajador\"\n}\n\nconst EditarUsuarioForm: React.FC<Props> = ({ usuario, onUsuarioActualizado, onClose }) => {\n  const [form, setForm] = useState<FormData>({\n    nombre: usuario.nombre,\n    email: usuario.email,\n    rol: usuario.rol,\n  })\n  const [isLoading, setIsLoading] = useState(false)\n  const { usuario: currentUser } = useAuth()\n  const { toast } = useToast()\n\n  const handleChange = (field: keyof FormData, value: string) => {\n    setForm((prev) => ({ ...prev, [field]: value }))\n  }\n\n  const validateForm = () => {\n    const errors: string[] = []\n\n    if (!form.nombre.trim()) errors.push(\"El nombre es requerido\")\n    if (!form.email.trim()) errors.push(\"El email es requerido\")\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n    if (form.email && !emailRegex.test(form.email)) {\n      errors.push(\"El formato del email es inv√°lido\")\n    }\n\n    return errors\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    const errors = validateForm()\n    if (errors.length > 0) {\n      toast({\n        title: \"Errores de validaci√≥n\",\n        description: errors.join(\", \"),\n        variant: \"destructive\",\n      })\n      return\n    }\n\n    setIsLoading(true)\n\n    try {\n      // Uso de la API actualizada\n      await usuariosApi.update(usuario.id, {\n        nombre: form.nombre.trim(),\n        email: form.email.trim(),\n        rol: form.rol,\n      })\n\n      toast({\n        title: \"Usuario actualizado\",\n        description: \"Los cambios se han guardado exitosamente\",\n      })\n\n      onUsuarioActualizado()\n    } catch (error) {\n      console.error(\"Error al actualizar usuario:\", error)\n      toast({\n        title: \"Error\",\n        description: error instanceof ApiError ? error.message : \"Error al actualizar usuario\",\n        variant: \"destructive\",\n      })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  // Comparaci√≥n de IDs como string\n  const canEditRole = currentUser?.rol === \"admin\" && String(currentUser?.id) !== String(usuario.id)\n\n  return (\n    <div className=\"space-y-6\">\n      <DialogHeader>\n        <div className=\"flex items-center space-x-2\">\n          <Edit className=\"h-5 w-5 text-primary\" />\n          <DialogTitle>Editar Usuario</DialogTitle>\n        </div>\n      </DialogHeader>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"nombre\">Nombre Completo</Label>\n          <Input id=\"nombre\" value={form.nombre} onChange={(e) => handleChange(\"nombre\", e.target.value)} required />\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"rut\">RUT</Label>\n          <Input id=\"rut\" value={usuario.rut} disabled className=\"bg-muted\" />\n          <p className=\"text-xs text-muted-foreground\">El RUT no se puede modificar</p>\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"email\">Correo Electr√≥nico</Label>\n          <Input\n            id=\"email\"\n            type=\"email\"\n            value={form.email}\n            onChange={(e) => handleChange(\"email\", e.target.value)}\n            required\n          />\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label htmlFor=\"rol\">Rol</Label>\n          <Select value={form.rol} onValueChange={(value) => handleChange(\"rol\", value)} disabled={!canEditRole}>\n            <SelectTrigger className={!canEditRole ? \"bg-muted\" : \"\"}>\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"trabajador\">Trabajador</SelectItem>\n              <SelectItem value=\"admin\">Admin</SelectItem>\n            </SelectContent>\n          </Select>\n          {!canEditRole && (\n            <p className=\"text-xs text-muted-foreground\">\n              {String(currentUser?.id) === String(usuario.id)\n                ? \"No puedes cambiar tu propio rol\"\n                : \"Solo los administradores pueden cambiar roles\"}\n            </p>\n          )}\n        </div>\n\n        <div className=\"flex justify-end space-x-2 pt-4\">\n          <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n            <X className=\"h-4 w-4 mr-2\" />\n            Cancelar\n          </Button>\n          <Button type=\"submit\" disabled={isLoading}>\n            {isLoading ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\" />\n                Guardando...\n              </>\n            ) : (\n              <>\n                <Save className=\"h-4 w-4 mr-2\" />\n                Guardar Cambios\n              </>\n            )}\n          </Button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default EditarUsuarioForm"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2509, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/components/usuarios-management.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useEffect } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport {\n  Search,\n  Plus,\n  Edit,\n  UserX,\n  UserCheck,\n  Trash2,\n  Users,\n  Shield,\n  User,\n  Mail,\n  Calendar,\n  Activity,\n} from \"lucide-react\"\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { useAuth } from \"@/lib/auth-context\"\nimport { usuariosApi, ApiError } from \"@/lib/api\"\nimport { formatDate } from \"@/lib/helpers\"\nimport { useDebounce } from \"@/hooks/use-debounce\"\nimport CrearUsuarioForm from \"./crear-usuario-form\"\nimport EditarUsuarioForm from \"./editar-usuario-form\"\n\ninterface Usuario {\n  id: string \n  nombre: string\n  rut: string\n  email: string\n  rol: \"admin\" | \"trabajador\"\n  activo: boolean\n  fecha_creacion: string\n  ultimo_acceso: string | null\n  creado_por_nombre: string | null\n}\n\nconst UsuariosManagement: React.FC = () => {\n  const [usuarios, setUsuarios] = useState<Usuario[]>([])\n  const [busqueda, setBusqueda] = useState(\"\")\n  const [filtroRol, setFiltroRol] = useState<string>(\"all\")\n  const [filtroActivo, setFiltroActivo] = useState<string>(\"all\")\n  \n  const [usuarioEditar, setUsuarioEditar] = useState<Usuario | null>(null)\n  const [usuarioToggle, setUsuarioToggle] = useState<Usuario | null>(null)\n  const [usuarioEliminar, setUsuarioEliminar] = useState<Usuario | null>(null)\n  const [showCrearForm, setShowCrearForm] = useState(false)\n  \n  const [isLoading, setIsLoading] = useState(true)\n  const { hasRole } = useAuth()\n  const { toast } = useToast()\n\n  // Debounce para b√∫squeda\n  const debouncedBusqueda = useDebounce(busqueda, 300)\n\n  const fetchUsuarios = async () => {\n    setIsLoading(true)\n    try {\n      const data = await usuariosApi.getAll(debouncedBusqueda, filtroRol, filtroActivo)\n      setUsuarios(data as unknown as Usuario[])\n    } catch (error) {\n      console.error(\"Error al cargar usuarios:\", error)\n      toast({\n        title: \"Error\",\n        description: \"No se pudieron cargar los usuarios\",\n        variant: \"destructive\",\n      })\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchUsuarios()\n  }, [debouncedBusqueda, filtroRol, filtroActivo])\n\n  const handleToggleStatus = async () => {\n    if (!usuarioToggle) return\n\n    try {\n      await usuariosApi.toggleStatus(usuarioToggle.id, usuarioToggle.activo)\n\n      toast({\n        title: \"Estado actualizado\",\n        description: `El usuario ahora est√° ${!usuarioToggle.activo ? 'activo' : 'inactivo'}.`,\n      })\n\n      fetchUsuarios()\n    } catch (error) {\n      console.error(\"Error al cambiar estado:\", error)\n      toast({\n        title: \"Error\",\n        description: error instanceof ApiError ? error.message : \"Error al cambiar estado\",\n        variant: \"destructive\",\n      })\n    } finally {\n      setUsuarioToggle(null)\n    }\n  }\n\n  const handleEliminar = async () => {\n    if (!usuarioEliminar) return\n\n    try {\n      await usuariosApi.delete(usuarioEliminar.id)\n\n      toast({\n        title: \"Usuario eliminado\",\n        description: \"El usuario ha sido eliminado exitosamente\",\n      })\n\n      fetchUsuarios()\n    } catch (error) {\n      console.error(\"Error al eliminar usuario:\", error)\n      toast({\n        title: \"Error\",\n        description: error instanceof ApiError ? error.message : \"Error al eliminar usuario\",\n        variant: \"destructive\",\n      })\n    } finally {\n      setUsuarioEliminar(null)\n    }\n  }\n\n  const getRolBadge = (rol: string) => {\n    return rol === \"admin\" ? (\n      <Badge variant=\"default\" className=\"bg-purple-100 text-purple-800\">\n        <Shield className=\"h-3 w-3 mr-1\" />\n        Admin\n      </Badge>\n    ) : (\n      <Badge variant=\"secondary\">\n        <User className=\"h-3 w-3 mr-1\" />\n        Trabajador\n      </Badge>\n    )\n  }\n\n  const getStatusBadge = (activo: boolean) => {\n    return activo ? (\n      <Badge variant=\"default\" className=\"bg-green-100 text-green-800\">\n        Activo\n      </Badge>\n    ) : (\n      <Badge variant=\"destructive\">Inactivo</Badge>\n    )\n  }\n\n  if (!hasRole(\"admin\")) {\n    return (\n      <Card className=\"w-full\">\n        <CardContent className=\"p-6\">\n          <div className=\"text-center\">\n            <Shield className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground\" />\n            <h3 className=\"text-lg font-semibold mb-2\">Acceso Restringido</h3>\n            <p className=\"text-muted-foreground\">No tienes permisos para acceder a la gesti√≥n de usuarios.</p>\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <Users className=\"h-5 w-5 text-primary\" />\n              <CardTitle>Gesti√≥n de Usuarios</CardTitle>\n            </div>\n            <Button onClick={() => setShowCrearForm(true)}>\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Nuevo Usuario\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {/* Filtros */}\n          <div className=\"flex flex-col md:flex-row gap-4 mb-6\">\n            <div className=\"relative flex-1\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4\" />\n              <Input\n                placeholder=\"Buscar por nombre, RUT o email...\"\n                value={busqueda}\n                onChange={(e) => setBusqueda(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n            <Select value={filtroRol} onValueChange={setFiltroRol}>\n              <SelectTrigger className=\"w-full md:w-40\">\n                <SelectValue placeholder=\"Filtrar por rol\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">Todos los roles</SelectItem>\n                <SelectItem value=\"admin\">Administrador</SelectItem>\n                <SelectItem value=\"trabajador\">Trabajador</SelectItem>\n              </SelectContent>\n            </Select>\n            <Select value={filtroActivo} onValueChange={setFiltroActivo}>\n              <SelectTrigger className=\"w-full md:w-40\">\n                <SelectValue placeholder=\"Filtrar por estado\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">Todos los estados</SelectItem>\n                <SelectItem value=\"true\">Activos</SelectItem>\n                <SelectItem value=\"false\">Inactivos</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Lista de usuarios */}\n          {isLoading ? (\n            <div className=\"flex items-center justify-center h-32\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\" />\n            </div>\n          ) : (\n            <div className=\"grid gap-4\">\n              {usuarios.length === 0 ? (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  <Users className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                  <p>No se encontraron usuarios</p>\n                </div>\n              ) : (\n                usuarios.map((usuario) => (\n                  <Card key={usuario.id} className=\"hover:shadow-md transition-shadow\">\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1 space-y-2\">\n                          <div className=\"flex items-center space-x-2\">\n                            <h3 className=\"font-semibold text-lg\">{usuario.nombre}</h3>\n                            {getRolBadge(usuario.rol)}\n                            {getStatusBadge(usuario.activo)}\n                          </div>\n\n                          <div className=\"flex flex-wrap gap-4 text-sm text-muted-foreground\">\n                            <div className=\"flex items-center space-x-1\">\n                              <User className=\"h-3 w-3\" />\n                              <span>{usuario.rut}</span>\n                            </div>\n                            <div className=\"flex items-center space-x-1\">\n                              <Mail className=\"h-3 w-3\" />\n                              <span>{usuario.email}</span>\n                            </div>\n                            <div className=\"flex items-center space-x-1\">\n                              <Calendar className=\"h-3 w-3\" />\n                              <span>Creado: {formatDate(usuario.fecha_creacion)}</span>\n                            </div>\n                            {usuario.ultimo_acceso && (\n                              <div className=\"flex items-center space-x-1\">\n                                <Activity className=\"h-3 w-3\" />\n                                <span>√öltimo acceso: {formatDate(usuario.ultimo_acceso)}</span>\n                              </div>\n                            )}\n                          </div>\n\n                          {usuario.creado_por_nombre && (\n                            <p className=\"text-xs text-muted-foreground\">\n                              Creado por: {usuario.creado_por_nombre}\n                            </p>\n                          )}\n                        </div>\n\n                        <div className=\"flex space-x-2 ml-4\">\n                          <Button variant=\"outline\" size=\"sm\" onClick={() => setUsuarioEditar(usuario)}>\n                            <Edit className=\"h-4 w-4\" />\n                          </Button>\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => setUsuarioToggle(usuario)}\n                            className={\n                              usuario.activo\n                                ? \"text-orange-600 hover:text-orange-700\"\n                                : \"text-green-600 hover:text-green-700\"\n                            }\n                          >\n                            {usuario.activo ? <UserX className=\"h-4 w-4\" /> : <UserCheck className=\"h-4 w-4\" />}\n                          </Button>\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => setUsuarioEliminar(usuario)}\n                            className=\"text-destructive hover:text-destructive\"\n                          >\n                            <Trash2 className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Modales */}\n      <Dialog open={showCrearForm} onOpenChange={setShowCrearForm}>\n        <DialogContent className=\"max-w-2xl\">\n          <CrearUsuarioForm\n            onUsuarioCreado={() => {\n              fetchUsuarios()\n              setShowCrearForm(false)\n            }}\n            onClose={() => setShowCrearForm(false)}\n          />\n        </DialogContent>\n      </Dialog>\n\n      <Dialog open={!!usuarioEditar} onOpenChange={() => setUsuarioEditar(null)}>\n        <DialogContent className=\"max-w-2xl\">\n          {usuarioEditar && (\n            <EditarUsuarioForm\n              usuario={usuarioEditar as any} \n              onUsuarioActualizado={() => {\n                fetchUsuarios()\n                setUsuarioEditar(null)\n              }}\n              onClose={() => setUsuarioEditar(null)}\n            />\n          )}\n        </DialogContent>\n      </Dialog>\n\n      <AlertDialog open={!!usuarioToggle} onOpenChange={() => setUsuarioToggle(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>\n              {usuarioToggle?.activo ? \"¬øDesactivar usuario?\" : \"¬øActivar usuario?\"}\n            </AlertDialogTitle>\n            <AlertDialogDescription>\n              {usuarioToggle?.activo\n                ? `¬øEst√°s seguro de que quieres desactivar a ${usuarioToggle?.nombre}?`\n                : `¬øEst√°s seguro de que quieres activar a ${usuarioToggle?.nombre}?`}\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancelar</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleToggleStatus}\n              className={\n                usuarioToggle?.activo ? \"bg-orange-600 hover:bg-orange-700\" : \"bg-green-600 hover:bg-green-700\"\n              }\n            >\n              {usuarioToggle?.activo ? \"Desactivar\" : \"Activar\"}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n\n      <AlertDialog open={!!usuarioEliminar} onOpenChange={() => setUsuarioEliminar(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>¬øEliminar usuario?</AlertDialogTitle>\n            <AlertDialogDescription>\n              ¬øEst√°s seguro de que quieres eliminar a {usuarioEliminar?.nombre}? Esta acci√≥n no se puede deshacer.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancelar</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleEliminar}\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n            >\n              Eliminar\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  )\n}\n\nexport default UsuariosManagement"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3446, "column": 0}, "map": {"version":3,"sources":["file:///Users/joaquin/gesticom_2.0/frontend/app/dashboard/usuarios/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { useAuth } from \"@/lib/auth-context\"\nimport { Button } from \"@/components/ui/button\"\nimport { ArrowLeft, Users, ShieldAlert } from \"lucide-react\"\nimport DashboardHeader from \"@/components/dashboard-header\" // ‚úÖ Header unificado\nimport UsuariosManagement from \"@/components/usuarios-management\"\n\nexport default function UsuariosPage() {\n  const { isAuthenticated, isLoading, hasRole } = useAuth()\n  const router = useRouter()\n\n  // 1. Redirecci√≥n si no est√° logueado\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      router.push(\"/login\")\n    }\n  }, [isAuthenticated, isLoading, router])\n\n  // 2. Redirecci√≥n de seguridad (Solo Admins)\n  useEffect(() => {\n    if (!isLoading && isAuthenticated && !hasRole(\"admin\")) {\n      // Si un trabajador intenta entrar por URL directa, lo mandamos al dashboard\n      router.push(\"/dashboard\")\n    }\n  }, [isAuthenticated, isLoading, hasRole, router])\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900\" />\n      </div>\n    )\n  }\n\n  // Protecci√≥n extra de renderizado\n  if (!isAuthenticated || !hasRole(\"admin\")) {\n    return null\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header Global */}\n      <DashboardHeader />\n\n      <main className=\"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 space-y-6\">\n        \n        {/* Barra de t√≠tulo y navegaci√≥n */}\n        <div className=\"flex items-center gap-4\">\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={() => router.push(\"/dashboard\")}\n            className=\"h-10 w-10\"\n            title=\"Volver al Dashboard\"\n          >\n            <ArrowLeft className=\"h-4 w-4\" />\n          </Button>\n          \n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 flex items-center gap-2\">\n              <Users className=\"h-6 w-6\" />\n              Gesti√≥n de Personal\n            </h1>\n            <p className=\"text-sm text-gray-500 flex items-center gap-1\">\n              <ShieldAlert className=\"h-3 w-3\" />\n              Zona administrativa: Control de accesos y roles.\n            </p>\n          </div>\n        </div>\n\n        {/* Componente Principal de Gesti√≥n (Tabla, Modales, etc.) */}\n        <UsuariosManagement />\n        \n      </main>\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA,4OAA4D,qBAAqB;AACjF;;;AARA;;;;;;;;AAUe,SAAS;;IACtB,MAAM,EAAE,eAAe,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,IAAA,0IAAO;IACvD,MAAM,SAAS,IAAA,kJAAS;IAExB,qCAAqC;IACrC,IAAA,0KAAS;kCAAC;YACR,IAAI,CAAC,aAAa,CAAC,iBAAiB;gBAClC,OAAO,IAAI,CAAC;YACd;QACF;iCAAG;QAAC;QAAiB;QAAW;KAAO;IAEvC,4CAA4C;IAC5C,IAAA,0KAAS;kCAAC;YACR,IAAI,CAAC,aAAa,mBAAmB,CAAC,QAAQ,UAAU;gBACtD,4EAA4E;gBAC5E,OAAO,IAAI,CAAC;YACd;QACF;iCAAG;QAAC;QAAiB;QAAW;QAAS;KAAO;IAEhD,IAAI,WAAW;QACb,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,kCAAkC;IAClC,IAAI,CAAC,mBAAmB,CAAC,QAAQ,UAAU;QACzC,OAAO;IACT;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC,gJAAe;;;;;0BAEhB,6LAAC;gBAAK,WAAU;;kCAGd,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,wIAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,SAAS,IAAM,OAAO,IAAI,CAAC;gCAC3B,WAAU;gCACV,OAAM;0CAEN,cAAA,6LAAC,gOAAS;oCAAC,WAAU;;;;;;;;;;;0CAGvB,6LAAC;;kDACC,6LAAC;wCAAG,WAAU;;0DACZ,6LAAC,gNAAK;gDAAC,WAAU;;;;;;4CAAY;;;;;;;kDAG/B,6LAAC;wCAAE,WAAU;;0DACX,6LAAC,sOAAW;gDAAC,WAAU;;;;;;4CAAY;;;;;;;;;;;;;;;;;;;kCAOzC,6LAAC,mJAAkB;;;;;;;;;;;;;;;;;AAK3B;GArEwB;;QAC0B,0IAAO;QACxC,kJAAS;;;KAFF"}}]
}