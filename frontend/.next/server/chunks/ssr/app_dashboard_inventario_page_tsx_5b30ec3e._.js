module.exports=[49623,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(79973);var e=a.i(38422),f=a.i(40695),g=a.i(210),h=a.i(15618),i=a.i(83497),j=a.i(69265),k=a.i(3130),l=a.i(5522),m=a.i(17171),n=a.i(97895);let o=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:d,...c}));o.displayName="Textarea";var p=a.i(77687),q=a.i(53250);let r=({onProductoAgregado:a})=>{let[d,e]=(0,c.useState)({codigo:"",nombre:"",descripcion:"",precio:0,stock:0,categoria:"",proveedor:""}),[g,j]=(0,c.useState)(!1),{toast:n}=(0,p.useToast)(),r=a=>{let{name:b,value:c}=a.target;e(a=>({...a,[b]:"precio"===b||"stock"===b?Number(c):c}))},s=async b=>{b.preventDefault(),j(!0);try{await q.productosApi.create(d),n({title:"Producto creado",description:"El producto se ha agregado exitosamente al inventario."}),a(),e({codigo:"",nombre:"",descripcion:"",precio:0,stock:0,categoria:"",proveedor:""})}catch(b){console.error("Error al crear producto:",b);let a="No se pudo crear el producto. Inténtalo de nuevo.";b instanceof q.ApiError&&(a=b.message),n({title:"Error",description:a,variant:"destructive"})}finally{j(!1)}};return(0,b.jsxs)(k.Card,{className:"w-full max-w-2xl mx-auto",children:[(0,b.jsxs)(k.CardHeader,{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(i.Package,{className:"h-5 w-5 text-primary"}),(0,b.jsx)(k.CardTitle,{className:"text-xl",children:"Nuevo Producto"})]}),(0,b.jsx)(k.CardDescription,{children:"Agrega un nuevo producto al inventario"})]}),(0,b.jsx)(k.CardContent,{children:(0,b.jsxs)("form",{onSubmit:s,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"codigo",children:"Código de Barras"}),(0,b.jsx)(l.Input,{id:"codigo",name:"codigo",placeholder:"Ej: 123456789",value:d.codigo,onChange:r,required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"nombre",children:"Nombre del Producto"}),(0,b.jsx)(l.Input,{id:"nombre",name:"nombre",placeholder:"Ej: Laptop Dell XPS",value:d.nombre,onChange:r,required:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"descripcion",children:"Descripción"}),(0,b.jsx)(o,{id:"descripcion",name:"descripcion",placeholder:"Descripción detallada del producto...",value:d.descripcion,onChange:r,rows:3})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"precio",children:"Precio ($)"}),(0,b.jsx)(l.Input,{id:"precio",name:"precio",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:d.precio||"",onChange:r,required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"stock",children:"Stock"}),(0,b.jsx)(l.Input,{id:"stock",name:"stock",type:"number",min:"0",placeholder:"0",value:d.stock||"",onChange:r,required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"categoria",children:"Categoría"}),(0,b.jsx)(l.Input,{id:"categoria",name:"categoria",placeholder:"Ej: Electrónicos",value:d.categoria,onChange:r,required:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"proveedor",children:"Proveedor"}),(0,b.jsx)(l.Input,{id:"proveedor",name:"proveedor",placeholder:"Nombre del proveedor",value:d.proveedor,onChange:r,required:!0})]}),(0,b.jsx)(f.Button,{type:"submit",className:"w-full",disabled:g,children:g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creando..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Plus,{className:"h-4 w-4 mr-2"}),"Crear Producto"]})})]})})]})};var s=a.i(54161),t=a.i(87532),u=a.i(24569),v=a.i(81560),w=a.i(90166),x=a.i(70106);let y=(0,x.default)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),z=(0,x.default)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),A=(0,x.default)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),B=(0,x.default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var C=a.i(65733),D=a.i(14548),E=a.i(33508);let F=({producto:a,onProductoActualizado:d,onClose:e})=>{let[g,h]=(0,c.useState)({nombre:a.nombre,descripcion:a.descripcion,precio:a.precio,stock:a.stock,categoria:a.categoria,proveedor:a.proveedor}),[i,j]=(0,c.useState)(!1),{toast:k}=(0,p.useToast)(),n=a=>{let{name:b,value:c}=a.target;h(a=>({...a,[b]:"precio"===b||"stock"===b?Number(c):c}))},r=async b=>{b.preventDefault(),j(!0);try{await q.productosApi.update(a.id,g),k({title:"Producto actualizado",description:"Los cambios se han guardado exitosamente."}),d()}catch(b){console.error("Error al actualizar producto:",b);let a="No se pudo actualizar el producto. Inténtalo de nuevo.";b instanceof q.ApiError&&(a=b.message),k({title:"Error",description:a,variant:"destructive"})}finally{j(!1)}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(C.DialogHeader,{children:(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(u.Edit,{className:"h-5 w-5 text-primary"}),(0,b.jsx)(C.DialogTitle,{children:"Editar Producto"})]})}),(0,b.jsxs)("form",{onSubmit:r,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"nombre",children:"Nombre del Producto"}),(0,b.jsx)(l.Input,{id:"nombre",name:"nombre",value:g.nombre,onChange:n,required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"categoria",children:"Categoría"}),(0,b.jsx)(l.Input,{id:"categoria",name:"categoria",value:g.categoria,onChange:n,required:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"descripcion",children:"Descripción"}),(0,b.jsx)(o,{id:"descripcion",name:"descripcion",value:g.descripcion,onChange:n,rows:3})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"precio",children:"Precio ($)"}),(0,b.jsx)(l.Input,{id:"precio",name:"precio",type:"number",step:"0.01",min:"0",value:g.precio||"",onChange:n,required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"stock",children:"Stock"}),(0,b.jsx)(l.Input,{id:"stock",name:"stock",type:"number",min:"0",value:g.stock||"",onChange:n,required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"proveedor",children:"Proveedor"}),(0,b.jsx)(l.Input,{id:"proveedor",name:"proveedor",value:g.proveedor,onChange:n,required:!0})]})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,b.jsxs)(f.Button,{type:"button",variant:"outline",onClick:e,children:[(0,b.jsx)(E.X,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),(0,b.jsx)(f.Button,{type:"submit",disabled:i,children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Guardando..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(D.Save,{className:"h-4 w-4 mr-2"}),"Guardar Cambios"]})})]})]})]})};var G=a.i(5094),H=a.i(11339),I=a.i(81579);let J=({reload:a})=>{let[d,e]=(0,c.useState)([]),[g,h]=(0,c.useState)(""),[j,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(null),[r,x]=(0,c.useState)(!0),[D,E]=(0,c.useState)(null),{toast:J}=(0,p.useToast)(),K=(0,I.useDebounce)(g,300),L=async a=>{x(!0),E(null);try{let b=await q.productosApi.getAll(a);e(b)}catch(b){console.error("Error al cargar productos:",b);let a="No se pudieron cargar los productos.";b instanceof q.ApiError&&(a=b.message),E(a),J({title:"Error",description:a,variant:"destructive"})}finally{x(!1)}};(0,c.useEffect)(()=>{L()},[a]),(0,c.useEffect)(()=>{K.trim()?L(K):L()},[K]);let M=async()=>{if(null!==n)try{await q.productosApi.delete(n),e(d.filter(a=>a.id!==n)),J({title:"Producto eliminado",description:"El producto se ha eliminado exitosamente."})}catch(b){console.error("Error al eliminar producto:",b);let a="No se pudo eliminar el producto.";b instanceof q.ApiError&&(a=b.message),J({title:"Error",description:a,variant:"destructive"})}finally{o(null)}};return r?(0,b.jsx)(k.Card,{className:"w-full",children:(0,b.jsx)(k.CardContent,{className:"p-6",children:(0,b.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):D?(0,b.jsx)(k.Card,{className:"w-full",children:(0,b.jsx)(k.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-32 space-y-4",children:[(0,b.jsx)(B,{className:"h-12 w-12 text-destructive"}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-lg font-semibold",children:"Error al cargar productos"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:D})]}),(0,b.jsx)(f.Button,{onClick:()=>L(),variant:"outline",children:"Reintentar"})]})})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(i.Package,{className:"h-5 w-5 text-primary"}),(0,b.jsx)(k.CardTitle,{children:"Inventario de Productos"})]}),(0,b.jsxs)(s.Badge,{variant:"outline",className:"text-sm",children:[d.length," productos"]})]})}),(0,b.jsxs)(k.CardContent,{children:[(0,b.jsxs)("div",{className:"relative mb-6",children:[(0,b.jsx)(t.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,b.jsx)(l.Input,{placeholder:"Buscar por nombre, código o categoría...",value:g,onChange:a=>h(a.target.value),className:"pl-10"})]}),(0,b.jsx)("div",{className:"grid gap-4",children:0===d.length?(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)(i.Package,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{children:"No se encontraron productos"})]}):d.map(a=>{let c=(0,H.getStockStatus)(a.stock);return(0,b.jsx)(k.Card,{className:"hover:shadow-md transition-shadow",children:(0,b.jsx)(k.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:a.nombre}),(0,b.jsxs)(s.Badge,{variant:c.color,children:[c.icon," ",c.text]})]}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:a.descripcion}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(y,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.codigo})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(w.DollarSign,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:(0,H.formatearPrecio)(a.precio)})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(i.Package,{className:"h-3 w-3"}),(0,b.jsxs)("span",{children:[a.stock," unidades"]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(A,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.categoria})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(z,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:a.proveedor})]})]})]}),(0,b.jsxs)("div",{className:"flex space-x-2 ml-4",children:[(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>m(a),children:(0,b.jsx)(u.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>o(a.id),className:"text-destructive hover:text-destructive",children:(0,b.jsx)(v.Trash2,{className:"h-4 w-4"})})]})]})})},a.id)})})]})]}),(0,b.jsx)(C.Dialog,{open:!!j,onOpenChange:()=>m(null),children:(0,b.jsx)(C.DialogContent,{className:"max-w-2xl",children:j&&(0,b.jsx)(F,{producto:j,onProductoActualizado:()=>{L(g),m(null)},onClose:()=>m(null)})})}),(0,b.jsx)(G.AlertDialog,{open:!!n,onOpenChange:()=>o(null),children:(0,b.jsxs)(G.AlertDialogContent,{children:[(0,b.jsxs)(G.AlertDialogHeader,{children:[(0,b.jsx)(G.AlertDialogTitle,{children:"¿Eliminar producto?"}),(0,b.jsx)(G.AlertDialogDescription,{children:"Esta acción no se puede deshacer. El producto será eliminado permanentemente del inventario."})]}),(0,b.jsxs)(G.AlertDialogFooter,{children:[(0,b.jsx)(G.AlertDialogCancel,{children:"Cancelar"}),(0,b.jsx)(G.AlertDialogAction,{onClick:M,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Eliminar"})]})]})})]})};function K(){let{isAuthenticated:a,isLoading:k,hasRole:l}=(0,e.useAuth)(),m=(0,d.useRouter)(),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{k||a||m.push("/login")},[a,k,m]),(0,c.useEffect)(()=>{!k&&a&&l("admin")},[k,a,l,m]),k)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):a?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(j.default,{}),(0,b.jsxs)("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(f.Button,{variant:"outline",size:"icon",onClick:()=>m.push("/dashboard"),className:"h-10 w-10",title:"Volver al Dashboard",children:(0,b.jsx)(g.ArrowLeft,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(i.Package,{className:"h-6 w-6"}),"Gestión de Inventario"]}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Administra tus productos, stock y precios."})]})]}),(0,b.jsxs)(f.Button,{onClick:()=>o(!0),children:[(0,b.jsx)(h.Plus,{className:"h-4 w-4 mr-2"}),"Nuevo Producto"]})]}),(0,b.jsx)(J,{reload:p})]}),(0,b.jsx)(C.Dialog,{open:n,onOpenChange:o,children:(0,b.jsx)(C.DialogContent,{className:"max-w-2xl",children:(0,b.jsx)(r,{onProductoAgregado:()=>{q(!p),o(!1)}})})})]}):null}a.s(["default",()=>K],49623)}];

//# sourceMappingURL=app_dashboard_inventario_page_tsx_5b30ec3e._.js.map